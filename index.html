<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì†Œê°œ ì´ë¯¸ì§€ ìƒì„±</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <style>
    @font-face {
        font-family: 'NanumSquareRound';
        src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_two@1.0/NanumSquareRound.woff') format('woff');
        font-weight: normal;
        font-style: normal;
    }

    body {
      font-family: 'NanumSquareRound', sans-serif;
      background-color: #1e1e1e;
      color: white;
      margin: 20px;
      display: flex;
      justify-content: center;
    }
    #app {
      display:flex;
      flex-direction: column;
      width: 80%;
      max-width: 800px;
      background: #2c2c2c;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
    }
    input:not([type='color']):not([type='checkbox']), select, textarea {
     font-family: 'NanumSquareRound', sans-serif;
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: none;
      border-radius: 5px;
      background: #3a3a3a;
      color: white;
      box-sizing: border-box;
    }
    h3 {
      border-bottom: 2px solid #444;
      padding-bottom: 5px;
      margin-top: 20px;
    }
    button {
      width: 100%;
      padding: 10px;
      background: #007BFF;
      border: none;
      color: white;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
      transition: background 0.3s;
    }
    button:hover {
      background: #0056b3;
    }
    canvas {
      display: block;
      width: 100%;
      max-width: 800px;
      border: 2px solid white;
      border-radius: 10px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div id="app">
    <h2>ì†Œê°œ ì´ë¯¸ì§€ ìƒì„±</h2>
ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025.02.25 09:38
    <div>
        <label>í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ(7:10)</label>
        <input type="file" @change="handleImageUpload"><br>
        
        <label>ë°°ê²½ ì´ë¯¸ì§€ ì—…ë¡œë“œ (ë°°ê²½ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° ì„ íƒ)</label><input type="color" v-model="profile.backgroundColor"><br>
        <input type="file" @change="handleBgImageUpload"><br>
    </div>
    

    <!-- ê¸°ë³¸ ì •ë³´ ì…ë ¥ -->
    <div>
        <label for="nickname">ë‹‰ë„¤ì„</label>
        <input v-model="profile.nickname" id="nickname" placeholder="ë‹‰ë„¤ì„" />
      </div>
      <div>
        <label for="server">ì„œë²„</label>
        <select v-model="profile.server" id="server" >
            <option value="ë¥˜íŠ¸" selected>ë¥˜íŠ¸</option>
            <option value="í•˜í”„">í•˜í”„</option>
            <option value="ë§ŒëŒë¦°">ë§ŒëŒë¦°</option>
            <option value="ìš¸í”„">ìš¸í”„</option>
        </select>
      </div>
      <div>
        <label for="race">ì¢…ì¡±</label>
        <select v-model="profile.race" id="race" >
            <option value="ì¸ê°„" selected>ì¸ê°„</option>
            <option value="ì—˜í”„">ì—˜í”„</option>
            <option value="ìì´ì–¸íŠ¸">ìì´ì–¸íŠ¸</option>
        </select>
      </div>
      <div>
        <label for="playtime">ì£¼ ì ‘ì† ì‹œê°„ëŒ€</label>
        <input v-model="profile.playtime" id="playtime" placeholder="ì£¼ ì ‘ì† ì‹œê°„ëŒ€" />
      </div>
      <div>
        <label for="comment">í•œë§ˆë””</label>
        <textarea v-model="profile.comment" id="comment" placeholder="í•œë§ˆë””"></textarea>
      </div>
  
      <hr />
  
      <!-- ë˜ì „ ì„ í˜¸ë„ -->
      <h3>ì„ í˜¸ ë˜ì „</h3>
      <div v-for="(dungeon, key) in profile.dungeons" :key="key">
        <input type="checkbox" :id="key" v-model="dungeon.enabled"><label :for="key">{{ key }}</label>
        <template v-if="dungeon.enabled == true">
            <template v-if="key != 'ê¸°íƒ€'">
                <div>
                    <label for="difficulty">ë‚œì´ë„</label>
                    <input v-model="dungeon.difficulty" id="difficulty" placeholder="ë‚œì´ë„" />
                </div>
                <div>
                <label for="skillLevel">ë¯¸ìˆ™/ë°˜ìˆ™/ì™„ìˆ™</label>
                <select v-model="dungeon.skillLevel">
                    <option value="ë¯¸ìˆ™" selected>ë¯¸ìˆ™</option>
                    <option value="ë°˜ìˆ™">ë°˜ìˆ™</option>
                    <option value="ì™„ìˆ™">ì™„ìˆ™</option>
                </select>
                </div>
                <div>
                    <label for="comment">ì½”ë©˜íŠ¸</label>
                    <input v-model="dungeon.comment" id="comment" placeholder="ì½”ë©˜íŠ¸" />
                </div>
            </template>
            <template v-else>
                <div>
                    <label for="difficulty">ë˜ì „ëª…</label>
                    <input v-model="dungeon.difficulty" id="difficulty" placeholder="ë˜ì „ëª…" />
                </div>
                <div>
                    <label for="comment">ì½”ë©˜íŠ¸</label>
                    <input v-model="dungeon.comment" id="comment" placeholder="ì½”ë©˜íŠ¸" />
                </div>
            </template>
        </template>
      </div>
  
      <hr />
  
      <!-- ìŠ¤í™ ê¸°ì¬ë€ -->
      <h3>ìŠ¤í™ ê¸°ì¬ë€</h3>
      <div v-for="(spec, key) in profile.specs" :key="key">
        <input type="checkbox" :id="key" v-model="spec.enabled"><label :for="key">{{ key }}</label><br>
        <template v-if="spec.enabled == true">
            <div>
                <template v-if="key == 'ì„¸ì¸íŠ¸ë°”ë“œ'">
                    <label for="specWeapon">ì „ì¥</label>
                    <input v-model="spec.weapon">
                </template>
                <template v-else>
                    <label for="specWeapon">ì£¼ë¬´ê¸°</label>
                    <select v-model="spec.weapon" id="specWeapon" >
                        <option value="ì†Œìš¸ ë¦¬ë²„ë ˆì´íŠ¸">ì†Œìš¸ ë¦¬ë²„ë ˆì´íŠ¸</option>
                        <option value="ë‚˜ì´íŠ¸ë¸Œë§ì–´">ë‚˜ì´íŠ¸ë¸Œë§ì–´</option>
                        <option value="í˜ëŸ¬ì‹œìš°ìŠ¤">í˜ëŸ¬ì‹œìš°ìŠ¤</option>
                        <option value="ì¼ˆí‹±">ì¼ˆí‹±</option>
                        <option value="ë¬´ê¸° ì—†ìŒ" selected>ë¬´ê¸° ì—†ìŒ</option>
                    </select>
                </template>
            </div>
            <div>
                <template v-if="key == 'ì„¸ì¸íŠ¸ë°”ë“œ'">
                    <label for="specErg">ë¹„ë°”ì²´</label>
                    <input v-model="spec.erg">
                </template>
                <template v-else>
                    <label for="specErg">ì—ë¥´ê·¸</label>
                    <select v-model="spec.erg" id="specErg" >
                        <option value="S50">S50</option>
                        <option value="S45">S45</option>
                        <option value="S40">S40</option>
                        <option value="S35">S35</option>
                        <option value="A50">A50</option>
                        <option value="ì—ë¥´ê·¸ ì—†ìŒ" selected>ì—ë¥´ê·¸ ì—†ìŒ</option>
                    </select>
                </template>
            </div>
            <div>
                <template v-if="key == 'ì„¸ì¸íŠ¸ë°”ë“œ'">
                    <label for="specAttack">í–‰ì§„ê³¡</label>
                    <input v-model="spec.attack">
                </template>
                <template v-else-if="key == 'ì„¸ì´í¬ë¦¬ë“œê°€ë“œ'">
                    <label for="specAttack">ë…¸ë„í•‘ ë³´í˜¸</label>
                    <input v-model="spec.attack" id="specAttack"/>
                </template>
                <template v-else>
                    <label for="specAttack">ë…¸ë„í•‘ {{ key == "ë‹¤í¬ë©”ì´ì§€" ? 'ë§ˆê³µ' : 'ë¬¼ê³µ'}}</label>
                    <input v-model="spec.attack" id="specAttack"/>
                </template>
            </div>
            <div>
                <template v-if="key != 'ì„¸ì¸íŠ¸ë°”ë“œ'">
                    <label for="specPiercing">í”¼ì–´ì‹± {{ key == "ë‹¤í¬ë©”ì´ì§€" ? '(í”¼ì–´ìŠ¤ í¬í•¨)' : ''}}</label>
                    <input v-model="spec.piercing" id="specPiercing" placeholder="í”¼ì–´ì‹±" />
                </template>
            </div>
            <div>
                <label for="specComment">ì½”ë©˜íŠ¸</label>
                <input v-model="spec.comment" id="specComment" placeholder="ì½”ë©˜íŠ¸" />
            </div>
        </template>
      </div>
  
      <hr />
    
    <button @click="generateImage">ì´ë¯¸ì§€ ìƒì„±</button>
    <canvas ref="canvas" width="1600" height="900"></canvas>
    <div v-if="dataUrl != null" id="downloadBtn">ì´ë¯¸ì§€ë¥¼ ìš°í´ë¦­í•˜ì—¬ ì €ì¥í•˜ì„¸ìš”. (ëª¨ë°”ì¼: ê¸¸ê²Œ ëˆ„ë¥´ê¸°)</div>
  </div>

  <script>
    Vue.createApp({
      data() {
        return {
          profile: {
            nickname: "",
            race: "ì¸ê°„",
            server: "ë¥˜íŠ¸",
            playtime: "",
            fixedParty: "",
            comment: "",
            comment2: "",
            dungeons: {
            "í•˜ì‹œë”¤": { enabled: false, difficulty: "íŒ¨í„´/ë¶€ê±°ë¯¿", preference: "ì„ í˜¸", skillLevel: "ë¯¸ìˆ™", comment: "" },
            "ê¸°ë¥´ê°€ì‰¬": { enabled: false, difficulty: "ë³´í†µ", preference: "ì„ í˜¸", skillLevel: "ë¯¸ìˆ™", comment: "" },
            "í¬ë¡¬ ë°”ìŠ¤": { enabled: false, difficulty: "30", preference: "ì„ í˜¸", skillLevel: "ë¯¸ìˆ™", comment: "" },
            "ê¸€ë Œ ë² ë¥´ë‚˜": { enabled: false, difficulty: "ì‰¬ì›€", preference: "ì„ í˜¸", skillLevel: "ë¯¸ìˆ™", comment: "" },
            "ë¸Œë¦¬ ë ˆí": { enabled: false, difficulty: "1ê´€", preference: "ì„ í˜¸", skillLevel: "ë¯¸ìˆ™", comment: "" },
            "ê¸°íƒ€": { enabled: false, difficulty: "ë˜ì „ëª…", comment: "" },
            },
            specs: {
            "ì—˜ë ˆë©˜íƒˆë‚˜ì´íŠ¸": { icon: "ğŸ—¡ï¸", enabled: false, weapon: "ë¬´ê¸° ì—†ìŒ", erg: "ì—ë¥´ê·¸ ì—†ìŒ", attack: "0", piercing: "0" },
            "ì„¸ì¸íŠ¸ë°”ë“œ": { icon: "ğŸ¶", enabled: false, weapon: "ì „ì¥", erg: "ë¹„ë°”ì²´", attack: "í–‰ì§„ê³¡", piercing: "" },
            "ì•Œì¼€ë¯¹ìŠ¤íŒ…ì–´": { icon: "ğŸ¹", enabled: false, weapon: "ë¬´ê¸° ì—†ìŒ", erg: "ì—ë¥´ê·¸ ì—†ìŒ", attack: "0", piercing: "0" },
            "ë‹¤í¬ë©”ì´ì§€": { icon: "ğŸ”®", enabled: false, weapon: "ë¬´ê¸° ì—†ìŒ", erg: "ì—ë¥´ê·¸ ì—†ìŒ", attack: "0", piercing: "0" },
            "ì„¸ì´í¬ë¦¬ë“œê°€ë“œ": { icon: "ğŸ›¡ï¸", enabled: false, weapon: "ë¬´ê¸° ì—†ìŒ", erg: "ì—ë¥´ê·¸ ì—†ìŒ", attack: "0", piercing: "0" },
            "ë¸”ë˜ìŠ¤íŠ¸ëœì„œ": { icon: "ğŸ”±", enabled: false, weapon: "ë¬´ê¸° ì—†ìŒ", erg: "ì—ë¥´ê·¸ ì—†ìŒ", attack: "0", piercing: "0" }
            },
            backgroundColor: "#555555",
          },
          uploadedImage: null,
          uploadedBgImage: null,
          dataUrl: null
        };
      },
      methods: {
        downloadImg(e) {
            // ìº”ë²„ìŠ¤ ë°ì´í„°ë¥¼ DataURLë¡œ ë³€í™˜
            const dataURL = this.dataUrl;
            
            // ì„ì‹œ ì•µì»¤ íƒœê·¸ ìƒì„±
            const a = document.createElement('a');
            a.href = dataURL;
            a.download = 'canvas_image.png'; // ë‹¤ìš´ë¡œë“œí•  íŒŒì¼ ì´ë¦„ ì„¤ì •
            a.target = '_blank'; // ìƒˆ ì°½ì—ì„œ ì—´ë¦¬ë„ë¡ ì„¤ì •
            document.body.appendChild(a); // DOMì— ì¶”ê°€
            a.click(); // í´ë¦­ ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±°
            document.body.removeChild(a); // ì„ì‹œ ì•µì»¤ íƒœê·¸ ì œê±°
        },
        handleImageUpload(event) {
          const file = event.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = (e) => {
              this.uploadedImage = e.target.result;
            };
            reader.readAsDataURL(file);
          }
        },
        handleBgImageUpload(event) {
          const file = event.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = (e) => {
              this.uploadedBgImage = e.target.result;
            };
            reader.readAsDataURL(file);
          }
        },

        hexToRGBA(hex, alpha) {
        let r = parseInt(hex.slice(1, 3), 16);
        let g = parseInt(hex.slice(3, 5), 16);
        let b = parseInt(hex.slice(5, 7), 16);
        return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        },
        drawRoundedRect(ctx, x, y, width, height, radius) {
        ctx.beginPath();
        ctx.moveTo(x + radius, y);
        ctx.lineTo(x + width - radius, y);
        ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
        ctx.lineTo(x + width, y + height - radius);
        ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
        ctx.lineTo(x + radius, y + height);
        ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
        ctx.lineTo(x, y + radius);
        ctx.quadraticCurveTo(x, y, x + radius, y);
        ctx.closePath();
        },
        generateImage(e) {
            const canvas = this.$refs.canvas;
            const ctx = canvas.getContext("2d");

            if (!this.uploadedImage) {
                alert("ì´ë¯¸ì§€ë¥¼ ë¨¼ì € ì—…ë¡œë“œí•˜ì„¸ìš”.");
                return;
            }

            const bgImg = new Image();
            bgImg.src = this.uploadedBgImage;

            const img = new Image();
            img.src = this.uploadedImage;
            img.onload = () => {
                // ìº”ë²„ìŠ¤ í¬ê¸° ì„¤ì • (16:9 ë¹„ìœ¨)
                const canvasWidth = 1600;
                const canvasHeight = 900;
                canvas.width = canvasWidth;
                canvas.height = canvasHeight;

                // 1ï¸âƒ£ ë°°ê²½ ì´ë¯¸ì§€ ì„¤ì • (ë¸”ëŸ¬ + 16:9 ë¹„ìœ¨ë¡œ ì˜ë¼ì„œ ì±„ìš°ê¸°)
                ctx.filter = "blur(10px)";

                if(this.uploadedBgImage == null) {
                    const backgroundColor = this.profile.backgroundColor || "#ffffff"; // ì…ë ¥ëœ ìƒ‰ìƒ ë˜ëŠ” ê¸°ë³¸ê°’ìœ¼ë¡œ í°ìƒ‰
                    ctx.fillStyle = backgroundColor; // ë°°ê²½ ìƒ‰ ì„¤ì •
                    ctx.fillRect(0, 0, canvasWidth, canvasHeight); // ë°°ê²½ ìƒ‰ìœ¼ë¡œ ì±„ìš°ê¸°
                } else {
                    const bgWidth = bgImg.width; // ì›ë³¸ ê°€ë¡œ
                    const bgHeight = bgImg.width * (9 / 16); // 16:9 ë¹„ìœ¨ì— ë§ê²Œ í™•ëŒ€
                    const cropY = (bgImg.height - bgHeight) / 2; // ì¤‘ì•™ í¬ë¡­

                    ctx.drawImage(bgImg, 0, cropY, bgWidth, bgHeight, 0, 0, canvasWidth, canvasHeight);
                }

                
                ctx.filter = "none"; // ë¸”ëŸ¬ í•´ì œ

                // í”„ë ˆì„ (ë¼ìš´ë“œ ì²˜ë¦¬ëœ ë°•ìŠ¤)
                ctx.fillStyle = "rgba(0, 0, 0, 0.5)";
                ctx.fillRect(0, 0, canvasWidth, canvasHeight); // ë°°ê²½ ìƒ‰ìœ¼ë¡œ ì±„ìš°ê¸°

                // í”„ë ˆì„ (ë¼ìš´ë“œ ì²˜ë¦¬ëœ ë°•ìŠ¤)
                ctx.fillStyle = this.hexToRGBA(this.profile.backgroundColor, 0.5);
                ctx.fillRect(0, 0, canvasWidth, canvasHeight); // ë°°ê²½ ìƒ‰ìœ¼ë¡œ ì±„ìš°ê¸°


                // 2ï¸âƒ£ í”„ë¡œí•„ ì´ë¯¸ì§€ë¥¼ ì™¼ìª½ ìƒë‹¨ì— ê³ ì •ëœ í¬ê¸°ë¡œ ê·¸ë¦¬ê¸° (350x500 í¬ê¸°)
                if (this.uploadedImage) {
                    const profileImg = new Image();
                    profileImg.src = this.uploadedImage;
                    profileImg.onload = () => {
                    const profileWidth = 350; // í”„ë¡œí•„ ì´ë¯¸ì§€ì˜ ê°€ë¡œ í¬ê¸°
                    const profileHeight = 500; // í”„ë¡œí•„ ì´ë¯¸ì§€ì˜ ì„¸ë¡œ í¬ê¸°

                    // ì´ë¯¸ì§€ ë¹„ìœ¨ ê³„ì‚°
                    const imageAspectRatio = profileImg.width / profileImg.height;
                    const targetAspectRatio = profileWidth / profileHeight;

                    let cropX = 0, cropY = 0, cropWidth = profileImg.width, cropHeight = profileImg.height;

                    if (imageAspectRatio > targetAspectRatio) {
                        // ì´ë¯¸ì§€ê°€ ê°€ë¡œê°€ ë” ê¸´ ê²½ìš° (ì„¸ë¡œ í¬ê¸°ì— ë§ì¶° ì¶•ì†Œ)
                        cropWidth = profileImg.height * targetAspectRatio; // ë¹„ìœ¨ì— ë§ì¶° ê°€ë¡œ í¬ê¸° ì¡°ì •
                        cropX = (profileImg.width - cropWidth) / 2; // ê°€ë¡œ ì¤‘ì•™ í¬ë¡­
                    } else {
                        // ì´ë¯¸ì§€ê°€ ì„¸ë¡œê°€ ë” ê¸´ ê²½ìš° (ê°€ë¡œ í¬ê¸°ì— ë§ì¶° ì¶•ì†Œ)
                        cropHeight = profileImg.width / targetAspectRatio; // ë¹„ìœ¨ì— ë§ì¶° ì„¸ë¡œ í¬ê¸° ì¡°ì •
                        cropY = (profileImg.height - cropHeight) / 2; // ì„¸ë¡œ ì¤‘ì•™ í¬ë¡­
                    }

                    // ì¡°ì •ëœ ì´ë¯¸ì§€ í¬ê¸°ì™€ í¬ë¡­ëœ ë¶€ë¶„ì„ ì‚¬ìš©í•˜ì—¬ ê·¸ë¦¬ê¸°
                    ctx.drawImage(profileImg, cropX, cropY, cropWidth, cropHeight, 50, 50, profileWidth, profileHeight); // ì™¼ìª½ ìƒë‹¨ì— ê³ ì •
                    };

                }
                // 4ï¸âƒ£ ê¸°ë³¸ ì •ë³´ (í”„ë¡œí•„ ì´ë¯¸ì§€ ì•„ë˜ì— ë°°ì¹˜)
                ctx.fillStyle = "#fff";
                ctx.font = "24px 'NanumSquareRound'";
                let y = 70 + 500 + 30; // í”„ë¡œí•„ ì‚¬ì§„ ë°”ë¡œ ì•„ë˜ì— ê¸°ë³¸ ì •ë³´ ë°°ì¹˜

                if(this.profile.nickname) {
                    ctx.fillText(`ë‹‰ë„¤ì„ â–¶ ${this.profile.nickname}`, 50, y);
                    y += 50;
                }
                if(this.profile.server) {
                    ctx.fillText(`ì„œë²„ã€€ â–¶ ${this.profile.server}`, 50, y);
                    y += 50;
                }
                if(this.profile.race) {
                    ctx.fillText(`ì¢…ì¡±ã€€ â–¶ ${this.profile.race}`, 50, y);
                    y += 50;
                }
                if(this.profile.playtime) {
                    ctx.fillText(`ì‹œê°„ëŒ€ â–¶ ${this.profile.playtime}`, 50, y);
                    y += 50;
                }

                // ë˜ì „ ì„ í˜¸ë„, ìŠ¤í™, ë²„í”„ ë“±ì„ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ë°°ì¹˜
                let startX = 450; // ì˜¤ë¥¸ìª½ìœ¼ë¡œ ë°°ì¹˜í•  X ì¢Œí‘œ
                let startY = 70;

                const textStyle = {
                    lineHeight: 50, // ì¤„ ê°„ê²©
                };

                // 3.1 ë˜ì „ ë°ì´í„° ê·¸ë¦¬ê¸°
                if(Object.values(this.profile.dungeons).map((row => row.enabled == true)).length > 0) {
                    ctx.fillStyle = "#fff";
                    ctx.font='700 24px NanumSquareRound';
                    ctx.fillText("âš”ï¸ ë˜ì „", startX, startY);
                    ctx.font='300 24px NanumSquareRound';
                    ctx.fillStyle = "#efefef";
                    startY += textStyle.lineHeight; // ë˜ì „ ì œëª© ì•„ë˜ë¡œ ì´ë™
                    
                    let index = 0;
                    let lineY = startY;
                    for (const dungeon in this.profile.dungeons) {
                        if (this.profile.dungeons[dungeon].enabled) {
                            if(index % 2 == 0) {
                                if(dungeon == "ê¸°íƒ€") {
                                    ctx.fillText(`${this.profile.dungeons[dungeon].difficulty}`, startX, lineY);
                                } else {
                                    ctx.fillText(`${dungeon} â†’ ${this.profile.dungeons[dungeon].difficulty} | ${this.profile.dungeons[dungeon].skillLevel}`, startX, lineY);
                                }
                                lineY += textStyle.lineHeight;
                            } else {
                                if(dungeon == "ê¸°íƒ€") {
                                    ctx.fillText(`${this.profile.dungeons[dungeon].difficulty}`, startX + 500, startY);
                                } else {
                                    ctx.fillText(`${dungeon} â†’ ${this.profile.dungeons[dungeon].difficulty} | ${this.profile.dungeons[dungeon].skillLevel}`, startX + 500, startY);
                                }
                                startY += textStyle.lineHeight;
                            }
                            if(this.profile.dungeons[dungeon].comment) {
                                if(index % 2 == 0) {
                                    ctx.fillText(`â”–ğŸ’¬${this.profile.dungeons[dungeon].comment}`, startX, lineY);
                                    lineY += textStyle.lineHeight;
                                } else {
                                    ctx.fillText(`â”–ğŸ’¬${this.profile.dungeons[dungeon].comment}`, startX + 500, startY);
                                    startY += textStyle.lineHeight;
                                }
                            }
                            index ++;
                        }
                    }
                    startY += textStyle.lineHeight * 2
                }


                // ì„  ìŠ¤íƒ€ì¼ ì„¤ì •
                ctx.strokeStyle = "#fff"; // ì„  ìƒ‰ìƒ
                ctx.lineWidth = 1; // ì„  ë‘ê»˜

                // ì„  ê·¸ë¦¬ê¸°
                ctx.beginPath();
                ctx.moveTo(startX, startY - textStyle.lineHeight / 3 * 2); // ì„ ì˜ ì‹œì‘ì  (x, y)
                ctx.lineTo(1500, startY - textStyle.lineHeight / 3 * 2); // ì„ ì˜ ëì  (x, y)
                ctx.stroke(); // ì„ ì„ ì‹¤ì œë¡œ ê·¸ë¦¬ê¸°
                    
                // 3.2 ìŠ¤í™ ë°ì´í„° ê·¸ë¦¬ê¸°
                if(Object.values(this.profile.specs).map((row => row.enabled == true)).length > 0) {
                    ctx.fillStyle = "#fff";
                    ctx.font='700 24px NanumSquareRound';
                    ctx.fillText("âš”ï¸ ì•„ë¥´ì¹´ë‚˜", startX, startY);
                    ctx.font='300 24px NanumSquareRound';
                    ctx.fillStyle = "#efefef";
                    startY += textStyle.lineHeight; // ìŠ¤í™ ì œëª© ì•„ë˜ë¡œ ì´ë™

                    for (const spec in this.profile.specs) {
                        if (this.profile.specs[spec].enabled) {
                            if(spec == "ì„¸ì¸íŠ¸ë°”ë“œ") {
                                ctx.fillText(`${spec} ${this.profile.specs[spec].icon} ì „ì¥ ${this.profile.specs[spec].weapon} | ë¹„ë°” ${this.profile.specs[spec].erg} | í–‰ì§„ ${this.profile.specs[spec].attack}`, startX, startY);
                            } else if(spec == "ì„¸ì´í¬ë¦¬ë“œê°€ë“œ") {
                                ctx.fillText(`${spec} ${this.profile.specs[spec].icon} ${this.profile.specs[spec].weapon} | ${this.profile.specs[spec].erg} | ë…¸ë„í•‘ ë³´í˜¸ ${this.profile.specs[spec].attack} | í”¼ì–´ì‹± ${this.profile.specs[spec].piercing}`, startX, startY);
                            } else {
                                ctx.fillText(`${spec} ${this.profile.specs[spec].icon} ${this.profile.specs[spec].weapon} | ${this.profile.specs[spec].erg} | ë…¸ë„í•‘ ${this.profile.specs[spec].attack} | í”¼ì–´ì‹± ${this.profile.specs[spec].piercing}`, startX, startY);
                            }
                            startY += textStyle.lineHeight;
                            if(this.profile.specs[spec].comment) {
                                ctx.fillText(`â”–ğŸ’¬${this.profile.specs[spec].comment}`, startX, startY);
                                startY += textStyle.lineHeight;
                            }
                        }
                    }
                }
                
                if(this.profile.comment) {
                    this.profile.comment.split('\n').forEach((line, index)=> {
                        ctx.fillText(`${(index == 0 ? 'ğŸ’¬ ':'ã€€ ')} ${line}`, 50, y);
                        y += 50;
                    })
                }
                
            };
            this.dataUrl = canvas.toDataURL('image/png');
            e.preventDefault();
        }
      }
    }).mount("#app");
  </script>
</body>
</html>
