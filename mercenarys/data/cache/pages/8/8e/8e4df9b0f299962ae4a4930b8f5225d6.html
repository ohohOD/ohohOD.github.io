<!-- // Cache_Text 0.6 1613231907
1613231907 
-->
<script type="text/javascript" src="/mercenarys/local/toctoggle.js"></script><div id="aline-1"><img src='/mercenarys/imgs/smile/alert.png' style='border:0' class='smiley' alt='/!\' title='/!\' /> since <a href='/mercenarys/wiki.php/MoniWiki'>MoniWiki</a><tt class='sister'><a id='rsister1'></a><a href='#sister1'>&#x203a;1</a></tt> 1.1.2<span class='line-anchor' id='line-1'></span><br />
</div>
<br />
<div id="aline-3">모니위키의 <a class='nonexistent' rel='nofollow' href='/mercenarys/wiki.php/SecurityPlugin'>SecurityPlugin</a>의 한가지<span class='line-anchor' id='line-3'></span><br />
</div>
<br />
<div id="aline-5">
<div class='wikiToc' id='toc1'><div class='toctitle'>
<h2 style='display:inline'><span class="i18n" title="Contents">Contents</span></h2>
</div><a name='toc' ></a><dl><dd><dl>
<dt><a id='toc-1' href='#s-1'><span class='num'>1<span class="dot">.</span></span> 설정 </a></dt>
<dt><a id='toc-2' href='#s-2'><span class='num'>2<span class="dot">.</span></span> 미리 정의된 그룹 @group </a></dt>
<dt><a id='toc-3' href='#s-3'><span class='num'>3<span class="dot">.</span></span> 사용자 정의 그룹 @group 그리고 @group의 priority </a></dt>
<dt><a id='toc-4' href='#s-4'><span class='num'>4<span class="dot">.</span></span> ACL 타입 </a></dt>
<dd><dl>
<dt><a id='toc-4.1' href='#s-4.1'><span class='num'>4.1<span class="dot">.</span></span> 간단한 적용의 일부 </a></dt>
<dt><a id='toc-4.2' href='#s-4.2'><span class='num'>4.2<span class="dot">.</span></span> 완전한 적용의 예 </a></dt>
</dl></dd>
<dt><a id='toc-5' href='#s-5'><span class='num'>5<span class="dot">.</span></span> ACL이 성립되는 과정 </a></dt>
<dd><dl>
<dt><a id='toc-5.1' href='#s-5.1'><span class='num'>5.1<span class="dot">.</span></span> 마지막 ACL 항목이 적용된다 </a></dt>
<dt><a id='toc-5.2' href='#s-5.2'><span class='num'>5.2<span class="dot">.</span></span> explicit하게 지정해야 한다 </a></dt>
<dt><a id='toc-5.3' href='#s-5.3'><span class='num'>5.3<span class="dot">.</span></span> 예 </a></dt>
</dl></dd>
<dt><a id='toc-6' href='#s-6'><span class='num'>6<span class="dot">.</span></span> priority가 다른 경우 ACL의 성립 과정 </a></dt>
<dd><dl>
<dt><a id='toc-6.1' href='#s-6.1'><span class='num'>6.1<span class="dot">.</span></span> 예제 1 </a></dt>
<dt><a id='toc-6.2' href='#s-6.2'><span class='num'>6.2<span class="dot">.</span></span> 예제 2 </a></dt>
<dt><a id='toc-6.3' href='#s-6.3'><span class='num'>6.3<span class="dot">.</span></span> 예제 3 </a></dt>
<dt><a id='toc-6.4' href='#s-6.4'><span class='num'>6.4<span class="dot">.</span></span> 연습 </a></dt>
</dl></dd>
</dl></dd></dl>
</div>
<script type="text/javascript">
/*<![CDATA[*/
 if (window.showTocToggle) { showTocToggle('toc1', '<img src="/mercenarys/imgs/plugin/arrdown.png" width="10px" border="0" alt="[+]" title="[+]" />','<img src="/mercenarys/imgs/plugin/arrup.png" width="10px" border="0" alt="[-]" title="[-]" />'); } 
/*]]>*/
</script><span class='line-anchor' id='line-5'></span><br />
</div>
<div class="section"><a id='sect-1'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=1'><span>edit</span></a></span><span class='sep'>]</span></div>
<h2 id="line-6"><a id='s-1'></a><span class='tocnumber'><a href='#toc'>1<span class='dot'>.</span></a> </span>설정 <a class='perma' href='#s-1'>¶</a></h2><div id="sc-1">
<div id="aline-7"><code>config.php</code>에 다음을 넣으면 ACL <a class='nonexistent' rel='nofollow' href='/mercenarys/wiki.php/SecurityPlugin'>SecurityPlugin</a>이 활성화됩니다.<span class='line-anchor' id='line-7'></span><br />
<pre class='wiki'>
$security_class="acl";
$acl_type="default";
</pre><span class='line-anchor' id='line-11'></span>
</div>
</div>
</div>
<div class="section"><a id='sect-2'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=2'><span>edit</span></a></span><span class='sep'>]</span></div>
<h2 id="line-12"><a id='s-2'></a><span class='tocnumber'><a href='#toc'>2<span class='dot'>.</span></a> </span>미리 정의된 그룹 @group <a class='perma' href='#s-2'>¶</a></h2><div id="sc-2">
<div id="aline-13"><ul><li>@ALL: 모든 사용자 (priority: 1)<span class='line-anchor' id='line-13'></span><br />
</li>
<li>@User: 등록 사용자 (priority: 2)<span class='line-anchor' id='line-14'></span><br />
</li>
</ul>
</div>
</div>
</div>
<div class="section"><a id='sect-3'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=3'><span>edit</span></a></span><span class='sep'>]</span></div>
<h2 id="line-15"><a id='s-3'></a><span class='tocnumber'><a href='#toc'>3<span class='dot'>.</span></a> </span>사용자 정의 그룹 @group 그리고 @group의 priority <a class='perma' href='#s-3'>¶</a></h2><div id="sc-3">
<pre class='wiki'>
##@그룹이름 사용자리스트 [priority]
@Guest  Anonymous                   # priority를 지정하지 않으면 기본값 2
@Kiwirian foobar,kiwi,hello123   20 # @Kiwirain 그룹의 priority를 잡는다.
</pre><div id="aline-20"><span class='line-anchor' id='line-20'></span>
<div id="aline-21"><img src='/mercenarys/imgs/smile/alert.png' style='border:0' class='smiley' alt='/!\' title='/!\' /> 여기서 Anonymous 사용자는 @Guest로 지정되어 있으며, @Guest는 미리 정의된 그룹이 아닙니다.<span class='line-anchor' id='line-21'></span><br />
</div>
<div class='separator'><hr /></div><span class='line-anchor' id='line-22'></span>
<div id="aline-23"><img src='/mercenarys/imgs/smile/attention.png' style='border:0' class='smiley' alt='&lt;!>' title='&lt;!>' /> 모니위키 1.1.5부터는 network/ip 주소를 지원합니다.<span class='line-anchor' id='line-23'></span><br />
<pre class='wiki'>
# 부분 IP, CIDR 등등도 모두 지원.
@Block 123.123.0.0/255.255.0.0, 123.12, 123.125.0/16 
</pre><span class='line-anchor' id='line-27'></span>
</div>
<br />
<div id="aline-29">위의 예에서 @Block 그룹을 정의하고 있으며 이에 해당되는 IP대역, 부분IP 등등을 지정하고 있습니다.<span class='line-anchor' id='line-29'></span><br />
</div>
<br />
<div id="aline-31">아래와 같이 그룹에 대한 효력을 발생시킬 수 있습니다.<span class='line-anchor' id='line-31'></span><br />
<pre class='wiki'>
*       @Block            deny    * // 모든 페이지(*)를 @Block 사용자그룹에 대해 모든 액션(*)을 거부(deny)
</pre><span class='line-anchor' id='line-34'></span>
</div>
<br />
<div id="aline-36"><img src='/mercenarys/imgs/smile/alert.png' style='border:0' class='smiley' alt='/!\' title='/!\' /> IP, CDIR, 부분IP 등등은 그룹 지정에서만 사용 가능합니다.<span class='line-anchor' id='line-36'></span><br />
</div>
</div>
</div>
</div>
<div class="section"><a id='sect-4'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=4'><span>edit</span></a></span><span class='sep'>]</span></div>
<h2 id="line-37"><a id='s-4'></a><span class='tocnumber'><a href='#toc'>4<span class='dot'>.</span></a> </span>ACL 타입 <a class='perma' href='#s-4'>¶</a></h2><div id="sc-4">
<div id="aline-38"><ul><li><code>allow</code> : 허용<span class='line-anchor' id='line-38'></span><br />
</li>
<li><code>deny</code> : 제한<span class='line-anchor' id='line-39'></span><br />
</li>
<li><code>protect</code>: 비밀번호 제한이 가능한 몇몇 POST액션에 대해 (모든 액션이 관리비번으로 제한가능하지는 않습니다)<span class='line-anchor' id='line-40'></span><br />
<ul><li>일부 POST액션은 관리자 비밀번호로 제한을 걸어둘 수 있는 액션은 protect 가능한 액션입니다. protect 액션은 <em>제한된 allow</em>이며, 일부 POST액션만 지원합니다. 예) do_post_savepage()는 post 액션이며, 일반 do_goto()같은 액션과는 달리 관리자 비밀번호로 액션을 제한을 할 수 있습니다.<span class='line-anchor' id='line-41'></span><br />
<br />
</li>
</ul></li>
</ul>
지정 방법은 <code class='wiki'>*</code>는 모든 액션을 가리키며, 페이지 이름은 regex가 가능합니다.<span class='line-anchor' id='line-43'></span><br />
<pre class='wiki'>
# 페이지이름 @그룹/특정사용자 allow/deny 액션리스트
FoobarPage @ALL allow *
FoobarPage babo deny edit,diff,info
HelpOn.*   @ALL deny edit,savepage
</pre><span class='line-anchor' id='line-49'></span>
</div>
</div>
</div>
<div class="section"><a id='sect-5'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=5'><span>edit</span></a></span><span class='sep'>]</span></div>
<h3 id="line-50"><a id='s-4.1'></a><span class='tocnumber'><a href='#toc'>4.1<span class='dot'>.</span></a> </span>간단한 적용의 일부 <a class='perma' href='#s-4.1'>¶</a></h3><div id="sc-5">
<pre class='wiki'>
@Guest  Anonymous  // @Guest 사용자 그룹 정의
*       @ALL            deny    * // 모든 페이지(*)를 모든 사용자(@ALL)에서 모든 액션(*)을 거부(deny)
*       @ALL            allow   ticket // 모든 페이지를 모든 사용자에게 ticket 액션을 허락(allow)
*       @ALL            allow   read,userform,rss_rc,aclinfo,fortune,deletepage,fixmoin,ticket // 여러 줄로 나눠쓰기 가능
*       @User           allow   *
// 모든 페이지(*)를 일반 가입 사용자에게(@User) 허락(*)
WikiSandBox     @Guest  allow   edit,info,diff
// WikiSandBox 페이지를 @Guest 그룹에 edit,info,diff 액션을 허용(allow)
WikiSandBox     Foobar deny edit
// 사용자 Foobar는 WikiSandbox 편집 못하게 함
</pre><div id="aline-62"><span class='line-anchor' id='line-62'></span>
<br />
<div id="aline-64"></div>
</div>
</div>
</div>
<div class="section"><a id='sect-6'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=6'><span>edit</span></a></span><span class='sep'>]</span></div>
<h3 id="line-64"><a id='s-4.2'></a><span class='tocnumber'><a href='#toc'>4.2<span class='dot'>.</span></a> </span>완전한 적용의 예 <a class='perma' href='#s-4.2'>¶</a></h3><div id="sc-6">
<div id="aline-65"><img src='/mercenarys/imgs/smile/alert.png' style='border:0' class='smiley' alt='/!\' title='/!\' /> <em>//</em>로 시작되는 줄은 설명줄입니다.<span class='line-anchor' id='line-65'></span><br />
<pre class='wiki'>
# acl.default.php
# &lt;?php exit()?> // 파일은 php이지만 형식은 php가 아닌 일반 텍스트다.
# Please don't modify the lines above
#
# A sample Access Control Lists file for Moniwiki
#
@Guest  Anonymous  // @Guest 사용자 그룹 정의
*       @ALL            deny    *
// 모든 페이지(*)를 모든 사용자(@ALL)에서 모든 액션(*)을 거부(deny)
*       @ALL            allow   ticket
// 모든 페이지(*)를 모든 사용자(@ALL)에게 ticket 액션을 허락(allow) ticket은 가입 폼에 나오는 로봇가입방지 captcha
*       @User           allow   *
// 모든 페이지(*)를 일반 가입 사용자에게(@User) 허락(*)
# some pages are allowed to edit
WikiSandBox     @Guest  allow   edit,info,diff
// WikiSandBox 페이지를 @Guest 그룹에 edit,info,diff 액션을 허용(allow)
# some POST actions support protected mode using admin password
*       @ALL            protect deletefile,deletepage,rename,rcspurge,rcs,chmod,backup,restore
// 모든 페이지(*)에 대해 모든 사용자의(@ALL) detetefile,deltetepage 등등의 protect 가능한 액션을 protect
# some actions allowed to @ALL
*       @ALL            allow   read,userform,rss_rc,aclinfo,fortune,deletepage,fixmoin,ticket
# some pages have restrict permission
MoniWiki        @ALL    deny    edit,uploadfile,diff
// MoniWiki 페이지를 @ALL 모든 사용자에게 edit,upload,diff등의 일부 액션을 거부
</pre><span class='line-anchor' id='line-91'></span>
</div>
<br />
<div id="aline-93"></div>
</div>
</div>
<div class="section"><a id='sect-7'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=7'><span>edit</span></a></span><span class='sep'>]</span></div>
<h2 id="line-93"><a id='s-5'></a><span class='tocnumber'><a href='#toc'>5<span class='dot'>.</span></a> </span>ACL이 성립되는 과정 <a class='perma' href='#s-5'>¶</a></h2><div id="sc-7">
<div id="aline-94"></div>
</div>
</div>
<div class="section"><a id='sect-8'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=8'><span>edit</span></a></span><span class='sep'>]</span></div>
<h3 id="line-94"><a id='s-5.1'></a><span class='tocnumber'><a href='#toc'>5.1<span class='dot'>.</span></a> </span>마지막 ACL 항목이 적용된다 <a class='perma' href='#s-5.1'>¶</a></h3><div id="sc-8">
<div id="aline-95">explicit하게 지정할 경우 최종 ACL 항목이 적용된다.<span class='line-anchor' id='line-95'></span><br />
<ul><li><code class='wiki'>allow read</code> + <code class='wiki'>deny read</code> = <code class='wiki'>deny read</code><span class='line-anchor' id='line-96'></span><br />
</li>
<li><code class='wiki'>deny read</code> + <code class='wiki'>allow read</code> = <code class='wiki'>allow read</code><span class='line-anchor' id='line-97'></span><br />
</li>
</ul>
</div>
<div class='separator'><hr /></div><span class='line-anchor' id='line-98'></span>
<div id="aline-99">wildcard를 쓴 경우도 역시 최종 ACL 항목이 적용된다.<span class='line-anchor' id='line-99'></span><br />
<ul><li><code class='wiki'>allow *</code> + <code class='wiki'>deny *</code> = <code class='wiki'>deny *</code> 모든 액션을 거부<span class='line-anchor' id='line-100'></span><br />
</li>
<li><code class='wiki'>deny *</code> + <code class='wiki'>allow *</code> = <code class='wiki'>allow *</code> 모든 액션을 승인<span class='line-anchor' id='line-101'></span><br />
</li>
</ul>
</div>
</div>
</div>
<div class="section"><a id='sect-9'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=9'><span>edit</span></a></span><span class='sep'>]</span></div>
<h3 id="line-102"><a id='s-5.2'></a><span class='tocnumber'><a href='#toc'>5.2<span class='dot'>.</span></a> </span>explicit하게 지정해야 한다 <a class='perma' href='#s-5.2'>¶</a></h3><div id="sc-9">
<div id="aline-103">wildcard를 쓴 것 보다 explicit하게 지정된 것이 먼저 적용된다. (순서에 상관 없다)<span class='line-anchor' id='line-103'></span><br />
<ul><li><code class='wiki'>deny *</code> + <code class='wiki'>allow edit,info</code> = edit와 info 액션만 가능: <strong>explicit하게 지정된</strong> 액션만 허락<span class='line-anchor' id='line-104'></span><br />
</li>
<li><code class='wiki'>allow *</code> + <code class='wiki'>deny info,diff</code> = info/diff 이외의 액션이 모두 허용: <strong>explicit하게 지정된</strong> 액션만 거부<span class='line-anchor' id='line-105'></span><br />
</li>
<li><code class='wiki'>deny info,diff</code> + <code class='wiki'>allow *</code> = 위의 경우와 같다. explicit하게 지정된 액션인 info, diff만 거부<span class='line-anchor' id='line-106'></span><br />
<br />
</li>
</ul>
<img src='/mercenarys/imgs/smile/alert.png' style='border:0' class='smiley' alt='/!\' title='/!\' /> <code class='wiki'>deny *</code> + <code class='wiki'>allow read</code>는 아파치의 <code class='wiki'>Order allow,deny</code>와 같다. 즉, explicit하게 지정된 allow에 대해 먼저 검사하여 액션이 read일때만 허락하고 나머지 액션은 deny.<span class='line-anchor' id='line-108'></span><br />
</div>
<br />
<div id="aline-110"><code class='wiki'>deny edit</code> + <code class='wiki'>allow *</code>은 그 반대로 <code class='wiki'>Order deny,allow</code>가 된다.<span class='line-anchor' id='line-110'></span><br />
</div>
</div>
</div>
<div class="section"><a id='sect-10'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=10'><span>edit</span></a></span><span class='sep'>]</span></div>
<h3 id="line-111"><a id='s-5.3'></a><span class='tocnumber'><a href='#toc'>5.3<span class='dot'>.</span></a> </span>예 <a class='perma' href='#s-5.3'>¶</a></h3><div id="sc-10">
<div id="aline-112">모든 페이지에 대해서 읽기만 가능하게, <a class='nonexistent' rel='nofollow' href='/mercenarys/wiki.php/ProtectedPage'>ProtectedPage</a>에 대해서는 읽기도 거부<span class='line-anchor' id='line-112'></span><br />
<pre class='wiki'>
* @ALL deny *
* @ALL allow read
ProtectedPage @ALL deny read
</pre><span class='line-anchor' id='line-117'></span>
<a class='nonexistent' rel='nofollow' href='/mercenarys/wiki.php/ProtectedPage'>ProtectedPage</a>는 <code class='wiki'>deny *</code> + <code class='wiki'>allow read</code> + <code class='wiki'>deny read</code> = <code class='wiki'>deny *</code>이 된다.<span class='line-anchor' id='line-118'></span><br />
</div>
<div class='separator'><hr /></div><span class='line-anchor' id='line-119'></span>
<div id="aline-120"><img src='/mercenarys/imgs/smile/alert.png' style='border:0' class='smiley' alt='/!\' title='/!\' /> 주의: 모든 경우, explicit하게 지정될 경우에 효력이 발생한다.<span class='line-anchor' id='line-120'></span><br />
</div>
<br />
<pre class='wiki'>
* @ALL deny *
* @ALL allow read
ProtectedPage @ALL deny *
</pre><div id="aline-126"><span class='line-anchor' id='line-126'></span>
<div id="aline-127"><a class='nonexistent' rel='nofollow' href='/mercenarys/wiki.php/ProtectedPage'>ProtectedPage</a>는 <code class='wiki'>deny *</code> + <code class='wiki'>allow read</code> + <code class='wiki'>deny *</code>이 된다: explicit하게 허락된 read가 허용된다.<span class='line-anchor' id='line-127'></span><br />
마지막 줄 <code class='wiki'>ProtectedPage @ALL deny *</code>는 무시되게 되는 것이다.<span class='line-anchor' id='line-128'></span><br />
</div>
</div>
</div>
</div>
<div class="section"><a id='sect-11'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=11'><span>edit</span></a></span><span class='sep'>]</span></div>
<h2 id="line-129"><a id='s-6'></a><span class='tocnumber'><a href='#toc'>6<span class='dot'>.</span></a> </span>priority가 다른 경우 ACL의 성립 과정 <a class='perma' href='#s-6'>¶</a></h2><div id="sc-11">
<div id="aline-130">앞절의 설명은 priority가 같은 경우에 대한 일반적인 설명이었다. 그룹의 priority를 두었을 때는 어떻게 적용될까?<span class='line-anchor' id='line-130'></span><br />
</div>
</div>
</div>
<div class="section"><a id='sect-12'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=12'><span>edit</span></a></span><span class='sep'>]</span></div>
<h3 id="line-131"><a id='s-6.1'></a><span class='tocnumber'><a href='#toc'>6.1<span class='dot'>.</span></a> </span>예제 1 <a class='perma' href='#s-6.1'>¶</a></h3><div id="sc-12">
<pre class='wiki'>
@ALL deny *
@User allow *
</pre><div id="aline-135"><span class='line-anchor' id='line-135'></span>
<div id="aline-136">이 경우 @User의 priority가 높으므로 <code class='wiki'>allow *</code>이 적용된다.<span class='line-anchor' id='line-136'></span><br />
</div>
</div>
</div>
</div>
<div class="section"><a id='sect-13'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=13'><span>edit</span></a></span><span class='sep'>]</span></div>
<h3 id="line-137"><a id='s-6.2'></a><span class='tocnumber'><a href='#toc'>6.2<span class='dot'>.</span></a> </span>예제 2 <a class='perma' href='#s-6.2'>¶</a></h3><div id="sc-13">
<pre class='wiki'>
@ALL deny *
@User allow read
</pre><div id="aline-141"><span class='line-anchor' id='line-141'></span>
<br />
<div id="aline-143">@User에서 read가 허용. 나머지는 <code class='wiki'>@ALL deny *</code>에 의해 거부된다.<span class='line-anchor' id='line-143'></span><br />
</div>
</div>
</div>
</div>
<div class="section"><a id='sect-14'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=14'><span>edit</span></a></span><span class='sep'>]</span></div>
<h3 id="line-144"><a id='s-6.3'></a><span class='tocnumber'><a href='#toc'>6.3<span class='dot'>.</span></a> </span>예제 3 <a class='perma' href='#s-6.3'>¶</a></h3><div id="sc-14">
<pre class='wiki'>
*       @ALL            deny    *
*       @ALL            allow   read,ticket,info,diff,titleindex,bookmark,pagelist
ProtectedPage @All      deny    read,ticket,info,diff,titleindex,bookmark,pagelist
</pre><div id="aline-149"><span class='line-anchor' id='line-149'></span>
<div id="aline-150"><ul><li>모든 사용자(@ALL)에게 allow를 제외한 모든 액션 거부.<span class='line-anchor' id='line-150'></span><br />
</li>
<li><a class='nonexistent' rel='nofollow' href='/mercenarys/wiki.php/ProtectedPage'>ProtectedPage</a>는 edit,savepage를 제외하고 모두 불허<span class='line-anchor' id='line-151'></span><br />
<ul><li>이 경우, allow를 explicit하게 한 모든 액션에 대해 explicit하게 deny를 걸어주어야 된다. <code class='wiki'>deny *</code> 라고만 하면 안된다.<span class='line-anchor' id='line-152'></span><br />
</li>
</ul></li>
</ul>
<span class='line-anchor' id='line-153'></span><br />
<pre class='wiki'>
*       @ALL            deny    *
*       @ALL            allow   show,ticket,titleindex,bookmark,pagelist
*       @User           allow   edit,savepage
ProtectedPage @User     deny    * # 이것만으로는 의도대로 작동 안한다.
# 다음을 explicit하게 명시해야 의도대로 작동한다.
ProtectedPage @User     deny    edit,savepage
</pre><span class='line-anchor' id='line-160'></span>
<ul><li>일반 등록 사용자(@User)는 edit,savepage 허락.<span class='line-anchor' id='line-161'></span><br />
</li>
<li><a class='nonexistent' rel='nofollow' href='/mercenarys/wiki.php/ProtectedPage'>ProtectedPage</a>는 모두 불허<span class='line-anchor' id='line-162'></span><br />
<ul><li>이 경우 등록 사용자에 대해 <code class='wiki'>@User deny *</code> + <code class='wiki'>@User allow edit,savepage</code>이므로 edit,savepage만 허용된다.<span class='line-anchor' id='line-163'></span><br />
</li>
<li><code class='wiki'>allow edit,savepage</code>라고 explicit하게 정의된 것을 다시 취소시켜야 의도대로 작동하는 것이다. 따라서 <code class='wiki'>ProtectedPage @User     deny    edit,savepage</code>라고 써 주어야 한다.<span class='line-anchor' id='line-164'></span><br />
</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div class="section"><a id='sect-15'></a><div class='sectionEdit' style='float:right;'><span class='sep'>[</span><span><a href='/mercenarys/wiki.php/MoniWikiACL?action=edit&amp;section=15'><span>edit</span></a></span><span class='sep'>]</span></div>
<h3 id="line-165"><a id='s-6.4'></a><span class='tocnumber'><a href='#toc'>6.4<span class='dot'>.</span></a> </span>연습 <a class='perma' href='#s-6.4'>¶</a></h3><div id="sc-15">
<div id="aline-166">1) 그룹 priority가 같은 항목끼리 합쳐지고, 2) 그룹 priority가 높은 항목이 우선적으로 적용된다.<span class='line-anchor' id='line-166'></span><br />
<pre class='wiki'>
####### @ALL 그룹의 priority는 1이다.
@Guest     Anonymous             # @ALL을 제외한 모든 그룹의 priority는 그 값이 지정되지 않으면 2 이다.
@Group1    peter,john      20    # priority = 20
@Group2    simon,soo             # default group priorty = 2
* @ALL     allow *               # group priority = 1
* @ALL     deny  backup,restore
* @Guest   deny  *               # group priority = 2
* @Group1  deny  *               # User defined @Group1 group
* @Group1  allow read,info,diff
* @Group2  deny  info,diff
</pre><span class='line-anchor' id='line-178'></span>
<ul><li>peter와 john: <code class='wiki'>allow read,info,diff</code> + <code class='wiki'>deny *</code> = read,info,diff만 허용<span class='line-anchor' id='line-179'></span><br />
</li>
<li>Anonymous (@Guest): <code class='wiki'>deny *</code>: 모두 거부 (@Guest그룹의 priority가 높으므로 @ALL에 대해 허용된 것과 무관하게 거부된다)<span class='line-anchor' id='line-180'></span><br />
</li>
<li>다른 모든 사용자(@ALL): <code class='wiki'>deny backup,resotre</code> + <code class='wiki'>allow *</code> (<strong>Order Deny,Allow</strong>)<span class='line-anchor' id='line-181'></span><br />
</li>
<li>@Group1 : <code class='wiki'>allow read,info,diff</code> + <code class='wiki'>deny *</code> (<strong>Order Allow,Deny</strong>) <span class='line-anchor' id='line-182'></span><br />
</li>
<li>@Group2 : <code class='wiki'>deny info,diff</code> + <code class='wiki'>@ALL deny backup,restore</code> + <code class='wiki'>allow *</code>: priority가 같은 항목이 합쳐진다.<span class='line-anchor' id='line-183'></span><br />
<br />
</li>
</ul>
<img src='/mercenarys/imgs/smile/alert.png' style='border:0' class='smiley' alt='/!\' title='/!\' /> 각 ACL 항목의 같은 priority를 가지는 모든 항목이 합해져서 적용됩니다.<span class='line-anchor' id='line-185'></span><br />
</div>
<br />
<div id="aline-187">config.php에 <code class='wiki'>$acl_debug=1</code> 옵션을 넣으면, 어떤 식으로 적용될지를 보여줍니다.<span class='line-anchor' id='line-187'></span><br />
</div>
<div class='separator'><hr /></div><span class='line-anchor' id='line-188'></span>
<div class='separator'><hr /></div><span class='line-anchor' id='line-189'></span>
<div id="aline-190">See <a class='nonexistent' rel='nofollow' href='/mercenarys/wiki.php/TwinPages'>TwinPages</a>:<a class="interwiki" href='http://moniwiki.kldp.net/wiki.php/MoniWikiACL' ><img class="interwiki" alt="MoniWiki:" src='/mercenarys/imgs//interwiki/moniwiki-16.png' style='border:0' height='16' width='16' title='MoniWiki:' /></a><a href='http://moniwiki.kldp.net/wiki.php/MoniWikiACL'  title='MoniWiki:MoniWikiACL'>MoniWikiACL</a><span class='line-anchor' id='line-190'></span><br />
<a class='nonexistent' rel='nofollow' href='/mercenarys/wiki.php/SecurityPlugin'>SecurityPlugin</a><span class='line-anchor' id='line-191'></span><br />
</div>
</div>
</div>
<div id='wikiSister'>
<div class='separator'><tt class='foot'>----</tt></div>
Sister Sites Index<br />
<ul><li><tt class='foot'><a id='sister1'></a><a href='#rsister1'>1&#x203a;</a></tt> <a class="interwiki" href='http://moniwiki.kldp.net/wiki.php/MoniWiki' ><img class="interwiki" alt="MoniWiki:" src='/mercenarys/imgs//interwiki/moniwiki-16.png' style='border:0' height='16' width='16' title='MoniWiki:' /></a><a href='http://moniwiki.kldp.net/wiki.php/MoniWiki'  title='MoniWiki:MoniWiki'>MoniWiki</a> </li></ul></div>
