import{u as O}from"./logStore-CxLFgmzo.js";import{B as T,D as E,a as A,S as k,P as N,C as _,b as M}from"./BGMPlayer-C_VIR8D1.js";import{_ as I,c as g,a as i,d as h,g as C,f as p,n as B,r as S,t as b,h as P,w,T as x,o as l,l as R}from"./index-BSuxFDRp.js";const V={name:"EmbedPlayerView",components:{DialogBox:M,CharacterDisplay:_,PlaybackControls:N,SceneSelectorModal:k,DiceRoll:A,DXCombo:E,BGMPlayer:T},setup(){return{logStore:O()}},data(){return{isLoading:!0,loadingMessage:"Î°úÍ∑∏Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...",loadError:null,autoPlayTimer:null,typingSpeed:50,theaterMode:!1,autoPlaySpeed:1,bgmSettings:{url:"",type:"youtube",volume:.5,autoPlay:!1},showDiceOverlay:!1,currentDiceRolls:[],diceCharacterName:"",diceCharacterColor:"#ffffff",diceOverlayTimer:null,showComboOverlay:!1,currentDXCombos:[],comboCharacterName:"",comboCharacterColor:"#ffffff",comboOverlayTimer:null,showSceneDescription:!1,sceneDescriptionData:null,sceneDescriptionTimer:null,showSceneSelector:!1,sfxAudio:null,currentBackground:null,previousBgmUrl:null,isMobile:!1}},computed:{logTitle(){var e;return((e=this.logStore.vnData)==null?void 0:e.title)||"VN Log Player"},currentScene(){var r,n;const e=((r=this.logStore.vnData)==null?void 0:r.scenes)||[],t=((n=this.logStore.playback)==null?void 0:n.currentSceneIndex)||0;return e[t]||null},currentStep(){return this.logStore.currentStep},hasNextStep(){return this.logStore.hasNextStep},hasPreviousStep(){return this.logStore.hasPreviousStep},autoPlayEnabled(){var e;return((e=this.logStore.playback)==null?void 0:e.autoPlayEnabled)||!1},currentStepNumber(){var o,s,a,y;let e=0;const t=((o=this.logStore.vnData)==null?void 0:o.scenes)||[],r=((s=this.logStore.playback)==null?void 0:s.currentSceneIndex)||0,n=((a=this.logStore.playback)==null?void 0:a.currentStepIndex)||0;for(let c=0;c<r;c++)e+=((y=t[c])==null?void 0:y.steps.length)||0;return e+=n+1,e},totalSteps(){var t;return(((t=this.logStore.vnData)==null?void 0:t.scenes)||[]).reduce((r,n)=>{var o;return r+(((o=n==null?void 0:n.steps)==null?void 0:o.length)||0)},0)},currentSceneName(){const e=this.logStore.currentScene;return(e==null?void 0:e.name)||""},hasActiveOverlay(){return this.showDiceOverlay||this.showComboOverlay||this.showSceneDescription},scenes(){var e;return((e=this.logStore.vnData)==null?void 0:e.scenes)||[]}},methods:{async loadExternalJSON(e,t=0){const r=[null,s=>`https://corsproxy.io/?${encodeURIComponent(s)}`,s=>`https://api.allorigins.win/raw?url=${encodeURIComponent(s)}`,s=>`https://cors-anywhere.herokuapp.com/${s}`],n=r[t],o=t===0;this.isLoading=!0,this.loadingMessage=o?"JSON ÌååÏùºÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë...":`CORS ÌîÑÎ°ùÏãúÎ•º ÌÜµÌï¥ Ïû¨ÏãúÎèÑ Ï§ë... (${t}/${r.length-1})`,this.loadError=null;try{let s=o?e:n(e);console.log(`[EmbedPlayerView] ÏãúÎèÑ ${t+1}/${r.length}:`,s);const a=new AbortController,y=setTimeout(()=>a.abort(),1e4),c=await fetch(s,{mode:"cors",credentials:"omit",headers:{Accept:"application/json, text/plain, */*"},signal:a.signal});if(clearTimeout(y),!c.ok)throw new Error(`HTTP ${c.status}: ${c.statusText}`);const D=c.headers.get("content-type");console.log("[EmbedPlayerView] Content-Type:",D);const v=await c.text();if(!v||v.trim()==="")throw new Error("Îπà ÌååÏùºÏûÖÎãàÎã§.");console.log("[EmbedPlayerView] JSON Î°úÎìú ÏôÑÎ£å (Í∏∏Ïù¥:",v.length,"bytes), ÌååÏã± ÏãúÏûë");const m=JSON.parse(v);let u,f=null;if(m.vnData&&m.version?(u=m.vnData,f=m.theme,console.log("[EmbedPlayerView] ÌÖåÎßà ÏÑ§Ï†ï Î∞úÍ≤¨:",f)):(u=m,console.log("[EmbedPlayerView] Íµ¨ ÌòïÏãù JSON (ÌÖåÎßà ÏóÜÏùå)")),!u||!u.scenes||u.scenes.length===0)throw new Error("Ïú†Ìö®Ìïú VN Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§. JSON ÌååÏùºÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî.");this.logStore.rawLog=JSON.stringify(u),this.logStore.vnData=u,this.logStore.playback.currentSceneIndex=0,this.logStore.playback.currentStepIndex=0,f&&this.applyThemeSettings(f),console.log("[EmbedPlayerView] ÌååÏã± ÏôÑÎ£å:",{title:u.title,sceneCount:u.scenes.length,totalSteps:this.totalSteps}),this.isLoading=!1,this.loadingMessage="",this.$nextTick(()=>{this.applyStepEffects(),this.showOverlaysIfPresent()})}catch(s){console.error(`[EmbedPlayerView] ÏãúÎèÑ ${t+1} Ïã§Ìå®:`,s);const a=s.name==="TypeError"||s.name==="AbortError"||s.message.includes("Failed to fetch")||s.message.includes("CORS")||s.message.includes("408")||s.message.includes("502")||s.message.includes("503")||s.message.includes("504"),y=t<3;if(a&&y)return console.warn(`[EmbedPlayerView] Îã§Ïùå ÌîÑÎ°ùÏãúÎ°ú Ïû¨ÏãúÎèÑ... (${t+1} -> ${t+2})`),await this.loadExternalJSON(e,t+1);s instanceof SyntaxError?(this.loadError="JSON ÌååÏã± Ïò§Î•ò",this.loadingMessage=`‚ùå JSON ÌòïÏãù Ïò§Î•ò

ÌååÏùºÏù¥ Ïò¨Î∞îÎ•∏ JSON ÌòïÏãùÏù¥ ÏïÑÎãôÎãàÎã§.

ÏÉÅÏÑ∏: ${s.message}`):t>=3?(this.loadError="Î™®Îì† Ï†ëÍ∑º Î∞©Î≤ï Ïã§Ìå®",this.loadingMessage=`‚ùå ÌååÏùºÏùÑ Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§

ÏßÅÏ†ë Ï†ëÍ∑º Î∞è Î™®Îì† CORS ÌîÑÎ°ùÏãú ÏãúÎèÑÍ∞Ä Ïã§Ìå®ÌñàÏäµÎãàÎã§.

Ìï¥Í≤∞ Î∞©Î≤ï:
1. GitHub Gist ÏÇ¨Ïö© (Ï∂îÏ≤ú)
2. GitHub Pages ÏÇ¨Ïö©
3. Pastebin, JSFiddle ÏÇ¨Ïö©

ÌòÑÏû¨ URLÏù¥ Îã§Ïö¥Î°úÎìú ÎßÅÌÅ¨Ïù∏ Í≤ΩÏö∞,
Í≥µÍ∞úÏ†ÅÏúºÎ°ú Ï†ëÍ∑º Í∞ÄÎä•Ìïú ÏßÅÏ†ë ÎßÅÌÅ¨Î°ú Î≥ÄÍ≤ΩÌï¥Ï£ºÏÑ∏Ïöî.`):(this.loadError=s.message,this.loadingMessage=`‚ùå Î°úÎìú Ïã§Ìå®

${s.message}`),this.isLoading=!1}},detectDevice(){const e=navigator.userAgent.toLowerCase(),t=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e),r="ontouchstart"in window||navigator.maxTouchPoints>0,o=window.innerWidth<=767;this.isMobile=t&&o||r&&o,this.isMobile&&(this.typingSpeed=30)},getCharacterName(e){return e.type==="system"?e.character.name||"ÏãúÏä§ÌÖú":e.type==="narrator"?"":e.character.name},handleAdvance(){this.hasNextStep?this.nextStep():this.autoPlayEnabled&&this.logStore.toggleAutoPlay()},handleTypingComplete(){},onSceneChange(){this.showDiceOverlay=!1,this.showComboOverlay=!1,this.stopSceneDescriptionAutoAdvance(),this.stopDiceOverlayAutoClose(),this.stopComboOverlayAutoClose(),this.displaySceneDescriptionIfPresent()},displaySceneDescriptionIfPresent(){if(!this.currentScene)return;const e=this.currentScene.steps[0];e&&e.type==="scene-description"&&(this.sceneDescriptionData={number:e.sceneNumber,title:e.sceneTitle,pcs:e.scenePCs,description:e.sceneDescription,fullText:e.text},this.showSceneDescription=!0,this.autoPlayEnabled&&this.startSceneDescriptionAutoAdvance())},closeSceneDescription(){this.showSceneDescription=!1;const e=this.sceneDescriptionTimer!==null;this.stopSceneDescriptionAutoAdvance(),!e&&this.autoPlayEnabled&&this.hasNextStep&&setTimeout(()=>{this.nextStep()},500)},startSceneDescriptionAutoAdvance(){this.stopSceneDescriptionAutoAdvance(),this.sceneDescriptionTimer=setTimeout(()=>{this.closeSceneDescription(),this.autoPlayEnabled&&(this.hasNextStep?this.nextStep():this.logStore.toggleAutoPlay())},3e3/this.autoPlaySpeed)},stopSceneDescriptionAutoAdvance(){this.sceneDescriptionTimer&&(clearTimeout(this.sceneDescriptionTimer),this.sceneDescriptionTimer=null)},nextStep(){const e=this.logStore.playback.currentSceneIndex;this.logStore.nextStep();const t=this.logStore.playback.currentSceneIndex;e!==t&&this.onSceneChange(),this.applyStepEffects(),this.showOverlaysIfPresent()},previousStep(){const e=this.logStore.playback.currentSceneIndex;this.logStore.previousStep();const t=this.logStore.playback.currentSceneIndex;e!==t&&this.onSceneChange(),this.applyStepEffects(),this.showOverlaysIfPresent()},showOverlaysIfPresent(){if(this.currentStep&&this.currentStep.type==="scene-description"){this.sceneDescriptionData={number:this.currentStep.sceneNumber,title:this.currentStep.sceneTitle,pcs:this.currentStep.scenePCs,description:this.currentStep.sceneDescription,fullText:this.currentStep.text},this.showSceneDescription=!0,this.autoPlayEnabled&&this.startSceneDescriptionAutoAdvance();return}const e=this.currentStep&&this.currentStep.diceRolls&&this.currentStep.diceRolls.length>0,t=this.currentStep&&this.currentStep.ougis&&this.currentStep.ougis.length>0,r=this.currentStep&&this.currentStep.shinobigamis&&this.currentStep.shinobigamis.length>0,n=this.currentStep&&this.currentStep.dxCombos&&this.currentStep.dxCombos.length>0;if(e||t||r){const o=[...this.currentStep.ougis||[],...this.currentStep.shinobigamis||[],...this.currentStep.diceRolls||[]];this.currentDiceRolls=o,this.diceCharacterName=this.getCharacterName(this.currentStep),this.diceCharacterColor=this.currentStep.character.color,this.showDiceOverlay=!0,this.autoPlayEnabled&&this.startDiceOverlayAutoClose();return}n&&(this.currentDXCombos=this.currentStep.dxCombos,this.comboCharacterName=this.getCharacterName(this.currentStep),this.comboCharacterColor=this.currentStep.character.color,this.showComboOverlay=!0,this.autoPlayEnabled&&this.startComboOverlayAutoClose())},closeDiceOverlay(){this.showDiceOverlay=!1;const e=this.diceOverlayTimer!==null;this.stopDiceOverlayAutoClose(),!e&&this.autoPlayEnabled&&this.hasNextStep&&setTimeout(()=>{this.nextStep()},500)},startDiceOverlayAutoClose(){this.stopDiceOverlayAutoClose(),this.diceOverlayTimer=setTimeout(()=>{this.closeDiceOverlay(),this.autoPlayEnabled&&this.hasNextStep&&this.nextStep()},3e3/this.autoPlaySpeed)},stopDiceOverlayAutoClose(){this.diceOverlayTimer&&(clearTimeout(this.diceOverlayTimer),this.diceOverlayTimer=null)},closeComboOverlay(){this.showComboOverlay=!1;const e=this.comboOverlayTimer!==null;this.stopComboOverlayAutoClose(),!e&&this.autoPlayEnabled&&this.hasNextStep&&setTimeout(()=>{this.nextStep()},500)},startComboOverlayAutoClose(){this.stopComboOverlayAutoClose(),this.comboOverlayTimer=setTimeout(()=>{this.closeComboOverlay(),this.autoPlayEnabled&&this.hasNextStep&&this.nextStep()},3e3/this.autoPlaySpeed)},stopComboOverlayAutoClose(){this.comboOverlayTimer&&(clearTimeout(this.comboOverlayTimer),this.comboOverlayTimer=null)},toggleAutoPlay(){const e=this.autoPlayEnabled;this.logStore.toggleAutoPlay(),!e&&this.autoPlayEnabled&&this.hasActiveOverlay},toggleTheaterMode(){this.theaterMode=!this.theaterMode,this.theaterMode&&!this.autoPlayEnabled&&(this.logStore.toggleAutoPlay(),!this.hasActiveOverlay&&this.hasNextStep&&this.nextStep())},handleTheaterModeClick(e){if(this.theaterMode){if(e.target.closest("button")||e.target.closest(".dialog-box"))return;this.theaterMode=!1}},changeAutoPlaySpeed(e){this.autoPlaySpeed=e},openSceneSelector(){this.showSceneSelector=!0},closeSceneSelector(){this.showSceneSelector=!1},handleGoToStep(e,t){const r=this.logStore.playback.currentSceneIndex;this.logStore.goToStep(e,t),r!==e&&this.onSceneChange(),this.closeSceneSelector(),this.showOverlaysIfPresent()},applyStepEffects(){if(!this.currentStep)return;const e=this.currentStep.effects;e!=null&&e.sfx&&this.playSFX(e.sfx);const t=(e==null?void 0:e.bgm)||null;if(t!==this.previousBgmUrl&&(t&&this.changeBGM(t),this.previousBgmUrl=t),e!=null&&e.background){const r=e.backgroundOpacity??.3;this.changeBackground(e.background,r)}},async playSFX(e){if(!(!e||!e.trim()))try{let t=e.trim();if(t.includes("youtube.com")||t.includes("youtu.be")){console.warn("[EmbedPlayerView] YouTube Ìö®Í≥ºÏùåÏùÄ ÏßÄÏõêÌïòÏßÄ ÏïäÏäµÎãàÎã§.");return}if(t.includes("drive.google.com")||t.includes("docs.google.com")){let n=null;const o=t.match(/\/file\/d\/([^\/\?]+)/);o&&(n=o[1]);const s=t.match(/[?&]id=([^&]+)/);s&&(n=s[1]),n&&(t=`https://docs.google.com/uc?export=download&id=${n}`)}const r=new Audio(t);r.volume=.7,r.loop=!1,r.addEventListener("ended",()=>{r.src="",this.sfxAudio===r&&(this.sfxAudio=null)}),await r.play(),this.sfxAudio=r}catch(t){console.error("[EmbedPlayerView] Ìö®Í≥ºÏùå Ïû¨ÏÉù Ïã§Ìå®:",t)}},changeBGM(e){const t=e.includes("youtube.com")||e.includes("youtu.be");this.bgmSettings={url:e,type:t?"youtube":"audio",volume:this.bgmSettings.volume||.5,autoPlay:!0}},changeBackground(e,t=.3){this.currentBackground=e;const r=`linear-gradient(rgba(0, 0, 0, ${1-t}), rgba(0, 0, 0, ${1-t}))`;document.documentElement.style.setProperty("--bg-image",`${r}, url(${e})`),document.documentElement.style.setProperty("--bg-image-size","cover")},applyThemeSettings(e){if(!e)return;console.log("[EmbedPlayerView] ÌÖåÎßà Ï†ÅÏö© ÏãúÏûë:",e);const t=document.documentElement;if(e.primaryColor&&t.style.setProperty("--primary-color",e.primaryColor),e.textColor&&t.style.setProperty("--text-color",e.textColor),e.bgColor&&t.style.setProperty("--bg-color",e.bgColor),e.bgSecondary&&t.style.setProperty("--bg-secondary",e.bgSecondary),e.borderColor&&t.style.setProperty("--border-color",e.borderColor),e.fontFamily&&(t.style.setProperty("--font-pretendard",e.fontFamily),document.body.style.fontFamily=e.fontFamily),e.bgImageUrl){const r=e.bgImageOpacity??.3,n=`linear-gradient(rgba(0, 0, 0, ${1-r}), rgba(0, 0, 0, ${1-r}))`;t.style.setProperty("--bg-image",`${n}, url(${e.bgImageUrl})`),t.style.setProperty("--bg-image-size",e.bgImageSize||"cover")}e.bgmUrl&&(this.bgmSettings={url:e.bgmUrl,type:e.bgmType||"youtube",volume:e.bgmVolume||.5,autoPlay:e.bgmAutoPlay||!1}),console.log("[EmbedPlayerView] ÌÖåÎßà Ï†ÅÏö© ÏôÑÎ£å")},handleKeyPress(e){if(!(e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"))switch(e.key){case" ":case"Enter":e.preventDefault(),this.handleAdvance();break;case"ArrowLeft":e.preventDefault(),this.hasPreviousStep&&this.previousStep();break;case"ArrowRight":e.preventDefault(),this.hasNextStep&&this.nextStep();break}}},async mounted(){this.detectDevice(),window.addEventListener("resize",this.detectDevice),window.addEventListener("keydown",this.handleKeyPress);const e=new URLSearchParams(window.location.search),t=e.get("json"),r=e.get("autoplay")==="true";if(!t){this.loadingMessage="Ïò§Î•ò: JSON URLÏù¥ Ï†úÍ≥µÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.",this.loadError="json ÏøºÎ¶¨ ÌååÎùºÎØ∏ÌÑ∞Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§.",console.error("[EmbedPlayerView] json ÏøºÎ¶¨ ÌååÎùºÎØ∏ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.");return}await this.loadExternalJSON(t),r&&!this.loadError&&this.logStore.toggleAutoPlay()},beforeUnmount(){this.stopSceneDescriptionAutoAdvance(),this.stopDiceOverlayAutoClose(),this.stopComboOverlayAutoClose(),window.removeEventListener("keydown",this.handleKeyPress),window.removeEventListener("resize",this.detectDevice),this.sfxAudio&&(this.sfxAudio.pause(),this.sfxAudio=null),this.currentBackground&&(document.documentElement.style.removeProperty("--bg-image"),document.documentElement.style.removeProperty("--bg-image-size"));const e=document.documentElement;e.style.removeProperty("--primary-color"),e.style.removeProperty("--text-color"),e.style.removeProperty("--bg-color"),e.style.removeProperty("--bg-secondary"),e.style.removeProperty("--border-color")}},U={class:"player-container"},L={class:"embed-logo"},J={class:"embed-title"},j={class:"header-buttons"},z=["title"],G={class:"player-stage"},X={key:1,class:"dialog-wrapper"},F={key:1,class:"dialog-placeholder"},W={class:"dice-overlay-hint"},H={class:"combo-overlay-header"},K={class:"combo-character-info"},Y={class:"dice-overlay-hint"},q={class:"scene-description-content"},Q={class:"scene-description-header"},Z={class:"scene-number"},$={class:"scene-title"},ee={key:0,class:"scene-pcs"},te={class:"scene-pcs-value"},se={key:1,class:"scene-description-text"};function oe(e,t,r,n,o,s){const a=S("EmojiToIcon"),y=S("CharacterDisplay"),c=S("DialogBox"),D=S("DiceRoll"),v=S("DXCombo"),m=S("PlaybackControls"),u=S("SceneSelectorModal"),f=S("BGMPlayer");return l(),g("div",{class:"embed-player-view",onClick:t[6]||(t[6]=(...d)=>s.handleTheaterModeClick&&s.handleTheaterModeClick(...d))},[i("div",U,[i("div",{class:B(["player-header",{"theater-mode":o.theaterMode}])},[i("div",L,[h(a,{emoji:"üé¨",size:20}),i("span",J,b(s.logTitle),1)]),i("div",j,[i("button",{onClick:t[0]||(t[0]=P((...d)=>s.toggleTheaterMode&&s.toggleTheaterMode(...d),["stop"])),class:"header-button",title:o.theaterMode?"Í∞êÏÉÅ Î™®Îìú Ï¢ÖÎ£å":"Í∞êÏÉÅ Î™®Îìú"},[h(a,{emoji:o.theaterMode?"üé¨":"üé•",size:20},null,8,["emoji"])],8,z)])],2),i("div",G,[s.currentStep&&!s.currentStep.isSceneDescription&&n.logStore.vnData.characters?(l(),C(y,{key:0,"current-step":s.currentStep,characters:n.logStore.vnData.characters,layout:"single"},null,8,["current-step","characters"])):p("",!0),!s.currentStep||s.currentStep.type!=="scene-description"?(l(),g("div",X,[s.currentStep&&s.currentStep.character?(l(),C(c,{key:0,"step-type":s.currentStep.type||"dialogue","character-name":s.getCharacterName(s.currentStep),"character-color":s.currentStep.character.color,text:s.currentStep.text,"status-changes":s.currentStep.statusChanges||[],illustrations:s.currentStep.illustrations||[],"typing-speed":o.typingSpeed,"auto-play-speed":o.autoPlaySpeed,"auto-advance":s.autoPlayEnabled,"has-overlay":s.hasActiveOverlay,onAdvance:s.handleAdvance,onTypingComplete:s.handleTypingComplete},null,8,["step-type","character-name","character-color","text","status-changes","illustrations","typing-speed","auto-play-speed","auto-advance","has-overlay","onAdvance","onTypingComplete"])):(l(),g("div",F,[i("p",null,b(o.loadingMessage),1)]))])):p("",!0)]),h(x,{name:"dice-overlay"},{default:w(()=>[o.showDiceOverlay&&o.currentDiceRolls.length>0?(l(),g("div",{key:0,class:"dice-overlay",onClick:t[2]||(t[2]=(...d)=>s.closeDiceOverlay&&s.closeDiceOverlay(...d))},[i("div",{class:"dice-overlay-content",onClick:t[1]||(t[1]=P(()=>{},["stop"]))},[h(D,{"dice-rolls":o.currentDiceRolls,"character-name":o.diceCharacterName,"character-color":o.diceCharacterColor,animated:!0,"play-sound-effect":!1},null,8,["dice-rolls","character-name","character-color"]),i("div",W,[h(a,{emoji:"üëÜ",size:14}),t[7]||(t[7]=i("span",null,"ÌÅ¥Î¶≠ÌïòÏó¨ Îã´Í∏∞",-1))])])])):p("",!0)]),_:1}),h(x,{name:"dice-overlay"},{default:w(()=>[o.showComboOverlay&&o.currentDXCombos.length>0?(l(),g("div",{key:0,class:"dice-overlay",onClick:t[4]||(t[4]=(...d)=>s.closeComboOverlay&&s.closeComboOverlay(...d))},[i("div",{class:"dice-overlay-content",onClick:t[3]||(t[3]=P(()=>{},["stop"]))},[i("div",H,[i("div",K,[i("div",{class:"combo-character-name",style:R({color:o.comboCharacterColor})},b(o.comboCharacterName),5)])]),h(v,{dxCombos:o.currentDXCombos},null,8,["dxCombos"]),i("div",Y,[h(a,{emoji:"üëÜ",size:14}),t[8]||(t[8]=i("span",null,"ÌÅ¥Î¶≠ÌïòÏó¨ Îã´Í∏∞",-1))])])])):p("",!0)]),_:1}),h(x,{name:"scene-description"},{default:w(()=>[o.showSceneDescription&&o.sceneDescriptionData?(l(),g("div",{key:0,class:"scene-description-overlay",onClick:t[5]||(t[5]=(...d)=>s.closeSceneDescription&&s.closeSceneDescription(...d))},[i("div",q,[i("div",Q,[i("span",Z,"Ïî¨ "+b(o.sceneDescriptionData.number),1),i("span",$,b(o.sceneDescriptionData.title),1)]),o.sceneDescriptionData.pcs?(l(),g("div",ee,[t[9]||(t[9]=i("span",{class:"scene-pcs-label"},"PC:",-1)),i("span",te,b(o.sceneDescriptionData.pcs),1)])):p("",!0),o.sceneDescriptionData.description?(l(),g("div",se,b(o.sceneDescriptionData.description),1)):p("",!0),t[10]||(t[10]=i("div",{class:"scene-description-hint"},"ÌÅ¥Î¶≠ÌïòÏó¨ Îã´Í∏∞",-1))])])):p("",!0)]),_:1}),o.theaterMode?p("",!0):(l(),C(m,{key:0,"current-step-number":s.currentStepNumber,"total-steps":s.totalSteps,"current-scene-name":s.currentSceneName,"has-previous-step":s.hasPreviousStep,"has-next-step":s.hasNextStep,"auto-play-enabled":s.autoPlayEnabled,"auto-play-speed":o.autoPlaySpeed,"show-progress-bar":!0,"show-scene-selector":!0,onPrevious:s.previousStep,onNext:s.handleAdvance,onToggleAutoplay:s.toggleAutoPlay,onChangeSpeed:s.changeAutoPlaySpeed,onOpenSceneSelector:s.openSceneSelector},null,8,["current-step-number","total-steps","current-scene-name","has-previous-step","has-next-step","auto-play-enabled","auto-play-speed","onPrevious","onNext","onToggleAutoplay","onChangeSpeed","onOpenSceneSelector"]))]),h(u,{"is-visible":o.showSceneSelector,scenes:s.scenes,"current-scene-index":n.logStore.playback.currentSceneIndex,"current-step-index":n.logStore.playback.currentStepIndex,onClose:s.closeSceneSelector,onGoToStep:s.handleGoToStep},null,8,["is-visible","scenes","current-scene-index","current-step-index","onClose","onGoToStep"]),o.theaterMode?p("",!0):(l(),C(f,{key:0,"bgm-url":o.bgmSettings.url,"bgm-type":o.bgmSettings.type,volume:o.bgmSettings.volume,"auto-play":o.bgmSettings.autoPlay},null,8,["bgm-url","bgm-type","volume","auto-play"]))])}const ae=I(V,[["render",oe]]);export{ae as default};
