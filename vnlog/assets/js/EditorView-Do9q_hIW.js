import{u as P}from"./logStore-C6fIXgGH.js";import{_ as D,c as p,a as s,d,e as f,r as x,f as g,i as m,v as b,t as y,o as c,p as T,F as k,m as U,j as z,n as w,k as j,l as I,g as _,h as E}from"./index-S8job35A.js";import R from"./EmbedPlayerView-BmYjsZU2.js";import{P as F,C as O,b as N}from"./BGMPlayer-AlhnL7Gw.js";const L={name:"StepEffectsEditor",props:{totalSteps:{type:Number,required:!0},selectedStep:{type:Number,default:null},currentEffects:{type:Object,default:null}},data(){return{startStep:1,endStep:1,effects:{sfx:"",bgm:"",background:"",backgroundOpacity:.3},isLoadingFile:!1}},computed:{canApply(){return this.startStep>=1&&this.endStep>=this.startStep&&this.endStep<=this.totalSteps},hasAnyEffect(){return this.effects.sfx||this.effects.bgm||this.effects.background}},methods:{formatPreviewUrl(t){return t?t.startsWith("data:")?`[ë¡œì»¬ ${t.split(";")[0].split(":")[1].split("/")[0]==="audio"?"ì˜¤ë””ì˜¤":"ì´ë¯¸ì§€"} íŒŒì¼]`:t:""},formatPreviewUrl(t){return t?t.startsWith("data:")?`[ë¡œì»¬ ${t.split(";")[0].split(":")[1].split("/")[0]==="audio"?"ì˜¤ë””ì˜¤":"ì´ë¯¸ì§€"} íŒŒì¼]`:t:""},async handleSfxFileSelect(t){const e=t.target.files[0];if(e){if(e.size>5*1024*1024){alert("íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤."),t.target.value="";return}this.isLoadingFile=!0;try{const i=await this.fileToBase64(e);this.effects.sfx=i,console.log("[StepEffectsEditor] íš¨ê³¼ìŒ íŒŒì¼ ë¡œë“œ ì™„ë£Œ:",{fileName:e.name,fileSize:e.size,base64Length:i.length})}catch(i){console.error("[StepEffectsEditor] íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨:",i),alert("íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{this.isLoadingFile=!1,t.target.value=""}}},fileToBase64(t){return new Promise((e,i)=>{const h=new FileReader;h.onload=()=>e(h.result),h.onerror=i,h.readAsDataURL(t)})},clearSfx(){this.effects.sfx=""},async handleBgmFileSelect(t){const e=t.target.files[0];if(e){if(e.size>10*1024*1024){alert("BGM íŒŒì¼ í¬ê¸°ëŠ” 10MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤."),t.target.value="";return}this.isLoadingFile=!0;try{const i=await this.fileToBase64(e);this.effects.bgm=i,console.log("[StepEffectsEditor] BGM íŒŒì¼ ë¡œë“œ ì™„ë£Œ:",{fileName:e.name,fileSize:e.size,base64Length:i.length})}catch(i){console.error("[StepEffectsEditor] íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨:",i),alert("íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{this.isLoadingFile=!1,t.target.value=""}}},clearBgm(){this.effects.bgm=""},async handleBgFileSelect(t){const e=t.target.files[0];if(e){if(e.size>2*1024*1024){alert("ì´ë¯¸ì§€ íŒŒì¼ í¬ê¸°ëŠ” 2MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤."),t.target.value="";return}this.isLoadingFile=!0;try{const i=await this.fileToBase64(e);this.effects.background=i,console.log("[StepEffectsEditor] ë°°ê²½ ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ:",{fileName:e.name,fileSize:e.size,base64Length:i.length})}catch(i){console.error("[StepEffectsEditor] íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨:",i),alert("íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{this.isLoadingFile=!1,t.target.value=""}}},clearBackground(){this.effects.background=""},convertToDirectURL(t){if(!t||!t.trim())return t;const e=t.trim();if(e.startsWith("data:"))return e;const i=e.match(/drive\.google\.com\/file\/d\/([^\/\?]+)/);return i?`https://docs.google.com/uc?export=download&id=${i[1]}`:e.includes("dropbox.com")?e.replace(/[?&]dl=0/,"?dl=1"):e.includes("1drv.ms")||e.includes("onedrive.live.com")?e.replace("/embed?","/download?"):e},applyEffects(){this.canApply&&(this.$emit("apply",{startStep:this.startStep,endStep:this.endStep,effects:{sfx:this.convertToDirectURL(this.effects.sfx)||null,bgm:this.convertToDirectURL(this.effects.bgm)||null,background:this.convertToDirectURL(this.effects.background)||null,backgroundOpacity:this.effects.backgroundOpacity}}),this.resetForm())},removeEffects(){this.canApply&&(this.$emit("remove",{startStep:this.startStep,endStep:this.endStep}),this.resetForm())},resetForm(){this.effects={sfx:"",bgm:"",background:"",backgroundOpacity:.3}},loadStepEffects(){this.selectedStep!==null&&(this.startStep=this.selectedStep,this.endStep=this.selectedStep),this.currentEffects&&(this.effects={sfx:this.currentEffects.sfx||"",bgm:this.currentEffects.bgm||"",background:this.currentEffects.background||"",backgroundOpacity:this.currentEffects.backgroundOpacity??.3})}},watch:{selectedStep:{immediate:!0,handler(){this.loadStepEffects()}},currentEffects:{immediate:!0,handler(){this.loadStepEffects()}}}},A={class:"step-effects-editor"},M={class:"editor-header"},H={class:"editor-body"},J={class:"section"},G={class:"step-range"},W={class:"input-group"},X=["max"],q={class:"input-group"},K=["min","max"],Y={class:"section"},Q={class:"file-input-group"},Z={class:"hint-text"},$={class:"section"},ee={class:"file-input-group"},te={class:"hint-text"},se={class:"section"},le={class:"file-input-group"},oe={class:"hint-text"},ae={key:0,class:"opacity-control"},ie={key:0,class:"section preview-section"},re={class:"preview-list"},ne={key:0,class:"preview-item"},de={key:1,class:"preview-item"},ue={key:2,class:"preview-item"},ce={key:3,class:"preview-item"},pe={class:"actions"},he=["disabled"],me=["disabled"];function fe(t,e,i,h,l,a){const r=x("EmojiToIcon");return c(),p("div",A,[s("div",M,[s("h3",null,[d(r,{emoji:"âœ¨",size:20}),e[17]||(e[17]=f(" ìŠ¤í… íš¨ê³¼ íŽ¸ì§‘ê¸° ",-1))])]),s("div",H,[s("div",J,[e[20]||(e[20]=s("h4",null,"ëŒ€ìƒ ìŠ¤í… ì„ íƒ",-1)),s("div",G,[s("div",W,[e[18]||(e[18]=s("label",null,"ì‹œìž‘ ìŠ¤í…",-1)),m(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.startStep=o),type:"number",min:1,max:i.totalSteps,placeholder:"1"},null,8,X),[[b,l.startStep,void 0,{number:!0}]])]),s("div",q,[e[19]||(e[19]=s("label",null,"ì¢…ë£Œ ìŠ¤í…",-1)),m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.endStep=o),type:"number",min:l.startStep,max:i.totalSteps,placeholder:"1"},null,8,K),[[b,l.endStep,void 0,{number:!0}]])])]),e[21]||(e[21]=s("p",{class:"hint-text"}," ë‹¨ì¼ ìŠ¤í…: ì‹œìž‘ê³¼ ì¢…ë£Œë¥¼ ê°™ì€ ë²ˆí˜¸ë¡œ ì„¤ì • | ë²”ìœ„: ë‹¤ë¥¸ ë²ˆí˜¸ë¡œ ì„¤ì • ",-1))]),s("div",Y,[s("h4",null,[d(r,{emoji:"ðŸ”Š",size:16}),e[22]||(e[22]=f(" íš¨ê³¼ìŒ (SFX) ",-1))]),s("div",Q,[m(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.effects.sfx=o),type:"text",placeholder:"íš¨ê³¼ìŒ URL ìž…ë ¥ ë˜ëŠ” íŒŒì¼ ì„ íƒ ë²„íŠ¼ í´ë¦­",class:"url-input"},null,512),[[b,l.effects.sfx]]),s("input",{ref:"sfxFileInput",type:"file",accept:"audio/*",onChange:e[3]||(e[3]=(...o)=>a.handleSfxFileSelect&&a.handleSfxFileSelect(...o)),style:{display:"none"}},null,544),s("button",{onClick:e[4]||(e[4]=o=>t.$refs.sfxFileInput.click()),class:"file-select-button"},[d(r,{emoji:"ðŸ“",size:14}),e[23]||(e[23]=f(" íŒŒì¼ ì„ íƒ ",-1))]),l.effects.sfx?(c(),p("button",{key:0,onClick:e[5]||(e[5]=(...o)=>a.clearSfx&&a.clearSfx(...o)),class:"clear-button"},[d(r,{emoji:"âœ–ï¸",size:14})])):g("",!0)]),s("p",Z,[d(r,{emoji:"ðŸ’¡",size:12}),e[24]||(e[24]=f(" ë¡œì»¬ íŒŒì¼ì€ base64ë¡œ ì¸ì½”ë”©ë˜ì–´ ì €ìž¥ë©ë‹ˆë‹¤ (ì™¸ë¶€ í˜¸ìŠ¤íŒ… ë¶ˆí•„ìš”) ",-1))])]),s("div",$,[s("h4",null,[d(r,{emoji:"ðŸŽµ",size:16}),e[25]||(e[25]=f(" ë°°ê²½ìŒì•… (BGM) ",-1))]),s("div",ee,[m(s("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>l.effects.bgm=o),type:"text",placeholder:"BGM URL (YouTube) ìž…ë ¥ ë˜ëŠ” íŒŒì¼ ì„ íƒ ë²„íŠ¼ í´ë¦­",class:"url-input"},null,512),[[b,l.effects.bgm]]),s("input",{ref:"bgmFileInput",type:"file",accept:"audio/*",onChange:e[7]||(e[7]=(...o)=>a.handleBgmFileSelect&&a.handleBgmFileSelect(...o)),style:{display:"none"}},null,544),s("button",{onClick:e[8]||(e[8]=o=>t.$refs.bgmFileInput.click()),class:"file-select-button"},[d(r,{emoji:"ðŸ“",size:14}),e[26]||(e[26]=f(" íŒŒì¼ ì„ íƒ ",-1))]),l.effects.bgm?(c(),p("button",{key:0,onClick:e[9]||(e[9]=(...o)=>a.clearBgm&&a.clearBgm(...o)),class:"clear-button"},[d(r,{emoji:"âœ–ï¸",size:14})])):g("",!0)]),s("p",te,[d(r,{emoji:"ðŸ’¡",size:12}),e[27]||(e[27]=f(" ë¡œì»¬ íŒŒì¼ì€ base64ë¡œ ì¸ì½”ë”© | YouTube URL ì§€ì› ",-1))])]),s("div",se,[s("h4",null,[d(r,{emoji:"ðŸ–¼ï¸",size:16}),e[28]||(e[28]=f(" ë°°ê²½ ì´ë¯¸ì§€ ",-1))]),s("div",le,[m(s("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>l.effects.background=o),type:"text",placeholder:"ë°°ê²½ ì´ë¯¸ì§€ URL ìž…ë ¥ ë˜ëŠ” íŒŒì¼ ì„ íƒ ë²„íŠ¼ í´ë¦­",class:"url-input"},null,512),[[b,l.effects.background]]),s("input",{ref:"bgFileInput",type:"file",accept:"image/*",onChange:e[11]||(e[11]=(...o)=>a.handleBgFileSelect&&a.handleBgFileSelect(...o)),style:{display:"none"}},null,544),s("button",{onClick:e[12]||(e[12]=o=>t.$refs.bgFileInput.click()),class:"file-select-button"},[d(r,{emoji:"ðŸ“",size:14}),e[29]||(e[29]=f(" íŒŒì¼ ì„ íƒ ",-1))]),l.effects.background?(c(),p("button",{key:0,onClick:e[13]||(e[13]=(...o)=>a.clearBackground&&a.clearBackground(...o)),class:"clear-button"},[d(r,{emoji:"âœ–ï¸",size:14})])):g("",!0)]),s("p",oe,[d(r,{emoji:"ðŸ’¡",size:12}),e[30]||(e[30]=f(" ë¡œì»¬ ì´ë¯¸ì§€ëŠ” base64ë¡œ ì¸ì½”ë”©ë˜ì–´ ì €ìž¥ë©ë‹ˆë‹¤ ",-1))]),l.effects.background?(c(),p("div",ae,[s("label",null,[d(r,{emoji:"ðŸ’§",size:14}),f(" ë°°ê²½ íˆ¬ëª…ë„ ("+y(Math.round(l.effects.backgroundOpacity*100))+"%) ",1)]),m(s("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>l.effects.backgroundOpacity=o),type:"range",min:"0",max:"1",step:"0.05",class:"opacity-slider"},null,512),[[b,l.effects.backgroundOpacity,void 0,{number:!0}]])])):g("",!0)]),a.hasAnyEffect?(c(),p("div",ie,[s("h4",null,[d(r,{emoji:"ðŸ‘ï¸",size:16}),e[31]||(e[31]=f(" ì„¤ì • ë¯¸ë¦¬ë³´ê¸° ",-1))]),s("div",re,[l.effects.sfx?(c(),p("div",ne,[e[32]||(e[32]=s("strong",null,"íš¨ê³¼ìŒ:",-1)),s("span",null,y(a.formatPreviewUrl(l.effects.sfx)),1)])):g("",!0),l.effects.bgm?(c(),p("div",de,[e[33]||(e[33]=s("strong",null,"BGM:",-1)),s("span",null,y(a.formatPreviewUrl(l.effects.bgm)),1)])):g("",!0),l.effects.background?(c(),p("div",ue,[e[34]||(e[34]=s("strong",null,"ë°°ê²½:",-1)),s("span",null,y(a.formatPreviewUrl(l.effects.background)),1)])):g("",!0),l.effects.background?(c(),p("div",ce,[e[35]||(e[35]=s("strong",null,"íˆ¬ëª…ë„:",-1)),s("span",null,y(Math.round(l.effects.backgroundOpacity*100))+"%",1)])):g("",!0)])])):g("",!0),s("div",pe,[s("button",{onClick:e[15]||(e[15]=(...o)=>a.applyEffects&&a.applyEffects(...o)),class:"apply-button",disabled:!a.canApply},[d(r,{emoji:"âœ…",size:16}),e[36]||(e[36]=f(" íš¨ê³¼ ì ìš© ",-1))],8,he),s("button",{onClick:e[16]||(e[16]=(...o)=>a.removeEffects&&a.removeEffects(...o)),class:"remove-button",disabled:!a.canApply},[d(r,{emoji:"ðŸ—‘ï¸",size:16}),e[37]||(e[37]=f(" íš¨ê³¼ ì œê±° ",-1))],8,me)])])])}const ge=D(L,[["render",fe],["__scopeId","data-v-f4f03fe6"]]),ve={name:"StepInfoEditor",props:{stepData:{type:Object,default:null}},data(){return{localData:null,showRawJSON:!1,illustFileInputs:[],isLoadingFile:!1}},computed:{hasDice(){var t,e;return((e=(t=this.localData)==null?void 0:t.diceRolls)==null?void 0:e.length)>0},hasStatusChange(){var t,e;return((e=(t=this.localData)==null?void 0:t.statusChanges)==null?void 0:e.length)>0},hasDXCombo(){var t,e;return((e=(t=this.localData)==null?void 0:t.dxCombos)==null?void 0:e.length)>0},hasIllustration(){var t,e;return((e=(t=this.localData)==null?void 0:t.illustrations)==null?void 0:e.length)>0},hasOugi(){var t,e;return((e=(t=this.localData)==null?void 0:t.ougis)==null?void 0:e.length)>0},hasShinobigami(){var t,e;return((e=(t=this.localData)==null?void 0:t.shinobigamis)==null?void 0:e.length)>0}},watch:{"localData.statusChanges":{handler(t){t&&t.forEach(e=>{e.oldValue!==null&&e.newValue!==null&&(e.delta=e.newValue-e.oldValue)})},deep:!0},"localData.diceRolls":{handler(t){t&&t.forEach(e=>{e.type==="choice"&&e.optionsText&&(e.options=e.optionsText.split(",").map(i=>i.trim()))})},deep:!0}},methods:{initializeLocalData(){var t,e,i;if(!this.stepData){this.localData=null;return}this.localData={id:this.stepData.id,sceneNumber:this.stepData.sceneNumber,type:this.stepData.type||"dialogue",character:{name:((t=this.stepData.character)==null?void 0:t.name)||"",color:((e=this.stepData.character)==null?void 0:e.color)||"#ffffff",avatarUrl:((i=this.stepData.character)==null?void 0:i.avatarUrl)||""},text:this.stepData.text||"",rawText:this.stepData.rawText||"",isSceneDescription:this.stepData.isSceneDescription||!1,sceneTitle:this.stepData.sceneTitle||"",scenePCs:this.stepData.scenePCs||"",sceneDescription:this.stepData.sceneDescription||"",illustrations:JSON.parse(JSON.stringify(this.stepData.illustrations||[])),diceRolls:this.initializeDiceRolls(this.stepData.diceRolls||[]),statusChanges:JSON.parse(JSON.stringify(this.stepData.statusChanges||[])),dxCombos:JSON.parse(JSON.stringify(this.stepData.dxCombos||[])),ougis:this.initializeOugis(this.stepData.ougis||[]),shinobigamis:JSON.parse(JSON.stringify(this.stepData.shinobigamis||[])),effects:JSON.parse(JSON.stringify(this.stepData.effects||{sfx:null,bgm:null,background:null,backgroundOpacity:.3}))}},initializeDiceRolls(t){return t.map(e=>{const i={...e};return e.type==="choice"&&e.options&&Array.isArray(e.options)&&(i.optionsText=e.options.join(", ")),i})},initializeOugis(t){return t.map(e=>{const i={...e};return e.skills&&Array.isArray(e.skills)&&(i.skills=e.skills.join(", ")),i})},addIllustration(){this.localData.illustrations||(this.localData.illustrations=[]),this.localData.illustrations.push({url:"",alt:"img"})},removeIllustration(t){this.localData.illustrations.splice(t,1)},handleImageError(t){t.target.style.display="none"},async handleIllustFileSelect(t,e){var l;const i=(l=t.target.files)==null?void 0:l[0];if(!i)return;const h=2*1024*1024;if(i.size>h){alert("ì´ë¯¸ì§€ íŒŒì¼ í¬ê¸°ëŠ” 2MB ì´í•˜ë¡œ ì œí•œë©ë‹ˆë‹¤."),t.target.value="";return}this.isLoadingFile=!0;try{const a=await this.fileToBase64(i);this.localData.illustrations[e].url=a}catch(a){console.error("[handleIllustFileSelect] íŒŒì¼ ë³€í™˜ ì‹¤íŒ¨:",a),alert("íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{this.isLoadingFile=!1,t.target.value=""}},clearIllustration(t){this.localData.illustrations[t].url="",this.illustFileInputs[t]&&(this.illustFileInputs[t].value="")},async handleAvatarFileSelect(t){var h;const e=(h=t.target.files)==null?void 0:h[0];if(!e)return;const i=2*1024*1024;if(e.size>i){alert("ì•„ë°”íƒ€ ì´ë¯¸ì§€ íŒŒì¼ í¬ê¸°ëŠ” 2MB ì´í•˜ë¡œ ì œí•œë©ë‹ˆë‹¤."),t.target.value="";return}this.isLoadingFile=!0;try{const l=await this.fileToBase64(e);this.localData.character.avatarUrl=l}catch(l){console.error("[handleAvatarFileSelect] íŒŒì¼ ë³€í™˜ ì‹¤íŒ¨:",l),alert("íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{this.isLoadingFile=!1,t.target.value=""}},clearAvatar(){this.localData.character.avatarUrl="",this.$refs.avatarFileInput&&(this.$refs.avatarFileInput.value="")},fileToBase64(t){return new Promise((e,i)=>{const h=new FileReader;h.onload=()=>e(h.result),h.onerror=i,h.readAsDataURL(t)})},addDiceRoll(){this.localData.diceRolls||(this.localData.diceRolls=[]),this.localData.diceRolls.push({type:"normal",formula:"",result:0,fullFormula:"",diceRolls:"",command:"",checkName:"",judgement:"",options:[],optionsText:""})},removeDiceRoll(t){this.localData.diceRolls.splice(t,1)},addStatusChange(){this.localData.statusChanges||(this.localData.statusChanges=[]),this.localData.statusChanges.push({characterName:"",statusName:"",oldValue:null,newValue:null,delta:0})},toggleStatusMode(t,e){e.target.checked?(t.oldValue=0,t.newValue=0,t.delta=0):(t.oldValue=null,t.newValue=null)},computeDelta(t){return t.oldValue!==null&&t.newValue!==null?t.newValue-t.oldValue:t.delta||0},removeStatusChange(t){this.localData.statusChanges.splice(t,1)},addDXCombo(){this.localData.dxCombos||(this.localData.dxCombos=[]),this.localData.dxCombos.push({type:"dx-combo",isSingleEffect:!1,comboName:"",description:"",effects:[],timing:"",difficulty:"",target:"",range:"",erosion:"",erosionCost:null,diceRoll:null})},removeDXCombo(t){this.localData.dxCombos.splice(t,1)},addOugi(){this.localData.ougis||(this.localData.ougis=[]),this.localData.ougis.push({type:"ougi",ougiName:"",skills:"",presentation:"",ougiEffect:"",ninpouInfo:"",ougiType:""})},removeOugi(t){this.localData.ougis.splice(t,1)},addShinobigami(){this.localData.shinobigamis||(this.localData.shinobigamis=[]),this.localData.shinobigamis.push({type:"shinobigami",command:"",checkName:"",formula:"",diceRolls:"",diceExpression:"",result:0,judgement:"",additionalInfo:null})},removeShinobigami(t){this.localData.shinobigamis.splice(t,1)},addShinobiAdditionalInfo(t){t.additionalInfo={type:"",range:"",cost:"",skill:"",description:""}},deleteStep(){!this.stepData||!confirm(`ìŠ¤í… #${this.stepData.id}ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
ì´ ìž‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)||this.$emit("delete",this.stepData.id)},duplicateStep(){this.stepData&&this.$emit("duplicate",this.stepData.id)},saveChanges(){if(!this.localData)return;const t={...this.localData,hasDice:this.hasDice,hasStatusChange:this.hasStatusChange,hasDXCombo:this.hasDXCombo,hasIllustration:this.hasIllustration,hasOugi:this.hasOugi,hasShinobigami:this.hasShinobigami};t.ougis&&(t.ougis=t.ougis.map(e=>({...e,skills:typeof e.skills=="string"?e.skills.split(/[,ã€]/).map(i=>i.trim()).filter(i=>i):e.skills}))),this.$emit("save",{id:this.stepData.id,updates:t})}},watch:{stepData:{immediate:!0,handler(){this.initializeLocalData(),this.showRawJSON=!1}}}},be={class:"step-info-editor"},ye={class:"editor-header"},Ce={class:"editor-body"},Ve={key:0,class:"no-selection"},Se={key:1,class:"info-form"},ke={class:"field-group"},xe=["value"],we={key:0,class:"field-group"},Ue={key:1,class:"field-group"},Be={key:2,class:"field-group"},De={class:"color-picker-wrapper"},Ie={key:3,class:"field-group"},Te={class:"file-input-group"},_e=["placeholder","readonly"],ze=["disabled"],je=["src"],Pe={key:4,class:"field-group"},Ee={key:5,class:"field-group"},Re=["value"],Fe={key:6,class:"field-group"},Oe={class:"type-selection"},Ne={class:"radio-label"},Le={class:"radio-label"},Ae={class:"radio-label"},Me={class:"radio-label"},He={key:7,class:"scene-desc-section"},Je={class:"field-group"},Ge={class:"field-label"},We={class:"field-row"},Xe={key:8,class:"field-group section-header"},qe={class:"field-label"},Ke={key:9,class:"items-list"},Ye={class:"item-content"},Qe={class:"file-input-group"},Ze=["onUpdate:modelValue","placeholder","readonly"],$e=["onChange"],et=["onClick","disabled"],tt=["onClick"],st=["src"],lt=["onClick"],ot={key:10,class:"field-group section-header"},at={class:"field-label"},it={key:11,class:"items-list"},rt={class:"item-content"},nt={class:"field-row"},dt=["onUpdate:modelValue"],ut=["onUpdate:modelValue"],ct={key:0,class:"field-row"},pt=["onUpdate:modelValue"],ht={key:1,class:"dx3-fields"},mt={class:"field-row"},ft=["onUpdate:modelValue"],gt={class:"field-row"},vt=["onUpdate:modelValue"],bt={class:"field-row"},yt=["onUpdate:modelValue"],Ct={key:2,class:"judgement-fields"},Vt={class:"field-row"},St=["onUpdate:modelValue"],kt=["onUpdate:modelValue"],xt={class:"field-row"},wt=["onUpdate:modelValue"],Ut=["onUpdate:modelValue"],Bt={key:3,class:"choice-fields"},Dt={class:"field-row"},It=["onUpdate:modelValue"],Tt={class:"field-row"},_t=["onUpdate:modelValue"],zt=["onClick"],jt={key:12,class:"field-group section-header"},Pt={class:"field-label"},Et={key:13,class:"items-list"},Rt={class:"item-content"},Ft={class:"field-row"},Ot=["onUpdate:modelValue"],Nt=["onUpdate:modelValue"],Lt={class:"field-row"},At={class:"checkbox-label"},Mt=["checked","onChange"],Ht={key:0,class:"field-row"},Jt=["onUpdate:modelValue"],Gt=["onUpdate:modelValue"],Wt={key:1,class:"field-row"},Xt=["onUpdate:modelValue"],qt=["onClick"],Kt={key:14,class:"field-group section-header"},Yt={class:"field-label"},Qt={key:15,class:"items-list"},Zt={class:"item-content"},$t=["onUpdate:modelValue"],es=["onUpdate:modelValue"],ts=["onUpdate:modelValue"],ss=["onUpdate:modelValue"],ls=["onUpdate:modelValue"],os=["onUpdate:modelValue"],as=["onClick"],is={key:16,class:"field-group section-header"},rs={class:"field-label"},ns={key:17,class:"items-list"},ds={class:"item-content"},us={class:"field-row"},cs=["onUpdate:modelValue"],ps=["onUpdate:modelValue"],hs={class:"field-row"},ms=["onUpdate:modelValue"],fs=["onUpdate:modelValue"],gs={class:"field-row"},vs=["onUpdate:modelValue"],bs=["onUpdate:modelValue"],ys={key:0,class:"shinobi-additional-info"},Cs={class:"field-row"},Vs=["onUpdate:modelValue"],Ss=["onUpdate:modelValue"],ks=["onUpdate:modelValue"],xs=["onUpdate:modelValue"],ws=["onUpdate:modelValue"],Us=["onClick"],Bs=["onClick"],Ds={key:18,class:"field-group section-header"},Is={class:"field-label"},Ts={key:19,class:"items-list"},_s={class:"item-content"},zs={class:"field-row"},js=["onUpdate:modelValue"],Ps={class:"checkbox-label"},Es=["onUpdate:modelValue"],Rs=["onUpdate:modelValue"],Fs={class:"field-row"},Os=["onUpdate:modelValue"],Ns=["onUpdate:modelValue"],Ls={class:"field-row"},As=["onUpdate:modelValue"],Ms=["onUpdate:modelValue"],Hs=["onUpdate:modelValue"],Js={class:"field-row"},Gs=["onUpdate:modelValue"],Ws=["onUpdate:modelValue"],Xs=["onClick"],qs={key:20,class:"field-group"},Ks={class:"field-label"},Ys={key:21,class:"json-viewer"},Qs={key:22,class:"actions"},Zs={class:"action-group left"};function $s(t,e,i,h,l,a){const r=x("EmojiToIcon");return c(),p("div",be,[s("div",ye,[s("h3",null,[d(r,{emoji:"ðŸ“",size:20}),e[29]||(e[29]=f(" ìŠ¤í… ì •ë³´ íŽ¸ì§‘ê¸° ",-1))])]),s("div",Ce,[i.stepData?(c(),p("div",Se,[s("div",ke,[e[31]||(e[31]=s("label",{class:"field-label"},"ìŠ¤í… ID (ì½ê¸° ì „ìš©)",-1)),s("input",{type:"text",value:i.stepData.id,disabled:"",class:"field-input disabled"},null,8,xe)]),l.localData?(c(),p("div",we,[e[32]||(e[32]=s("label",{class:"field-label"},"ì”¬ ë²ˆí˜¸",-1)),m(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.localData.sceneNumber=o),type:"number",class:"field-input",placeholder:"ì”¬ ë²ˆí˜¸"},null,512),[[b,l.localData.sceneNumber,void 0,{number:!0}]])])):g("",!0),l.localData?(c(),p("div",Ue,[e[33]||(e[33]=s("label",{class:"field-label"},"ìºë¦­í„° ì´ë¦„",-1)),m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.localData.character.name=o),type:"text",class:"field-input",placeholder:"ìºë¦­í„° ì´ë¦„"},null,512),[[b,l.localData.character.name]])])):g("",!0),l.localData?(c(),p("div",Be,[e[34]||(e[34]=s("label",{class:"field-label"},"ìºë¦­í„° ìƒ‰ìƒ",-1)),s("div",De,[m(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.localData.character.color=o),type:"color",class:"color-picker"},null,512),[[b,l.localData.character.color]]),m(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.localData.character.color=o),type:"text",class:"color-input",placeholder:"#ffffff"},null,512),[[b,l.localData.character.color]])])])):g("",!0),l.localData?(c(),p("div",Ie,[e[35]||(e[35]=s("label",{class:"field-label"},"ì•„ë°”íƒ€ URL",-1)),s("div",Te,[m(s("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.localData.character.avatarUrl=o),type:"text",class:"field-input",placeholder:l.localData.character.avatarUrl&&l.localData.character.avatarUrl.startsWith("data:image")?"[ë¡œì»¬ ì•„ë°”íƒ€ íŒŒì¼]":"https://example.com/avatar.png ë˜ëŠ” íŒŒì¼ ì„ íƒ",readonly:l.localData.character.avatarUrl&&l.localData.character.avatarUrl.startsWith("data:image")},null,8,_e),[[b,l.localData.character.avatarUrl]]),s("input",{type:"file",ref:"avatarFileInput",accept:"image/*",style:{display:"none"},onChange:e[5]||(e[5]=(...o)=>a.handleAvatarFileSelect&&a.handleAvatarFileSelect(...o))},null,544),s("button",{onClick:e[6]||(e[6]=o=>{var v;return(v=t.$refs.avatarFileInput)==null?void 0:v.click()}),class:"file-select-button",disabled:l.isLoadingFile},[d(r,{emoji:"ðŸ“",size:14}),f(" "+y(l.isLoadingFile?"ë¡œë”©...":"íŒŒì¼"),1)],8,ze),l.localData.character.avatarUrl?(c(),p("button",{key:0,onClick:e[7]||(e[7]=(...o)=>a.clearAvatar&&a.clearAvatar(...o)),class:"clear-button",title:"ì´ˆê¸°í™”"},[d(r,{emoji:"âœ–ï¸",size:12})])):g("",!0)]),e[36]||(e[36]=s("p",{class:"hint-text"},"ì•„ë°”íƒ€ ì´ë¯¸ì§€ ê¶Œìž¥ í¬ê¸°: 2MB ì´í•˜",-1)),l.localData.character.avatarUrl?(c(),p("img",{key:0,src:l.localData.character.avatarUrl,class:"preview-img avatar-preview",onError:e[8]||(e[8]=(...o)=>a.handleImageError&&a.handleImageError(...o))},null,40,je)):g("",!0)])):g("",!0),l.localData?(c(),p("div",Pe,[e[37]||(e[37]=s("label",{class:"field-label"},"ëŒ€ì‚¬ í…ìŠ¤íŠ¸",-1)),m(s("textarea",{"onUpdate:modelValue":e[9]||(e[9]=o=>l.localData.text=o),class:"field-textarea",rows:"4",placeholder:"ìºë¦­í„°ì˜ ëŒ€ì‚¬ë¥¼ ìž…ë ¥í•˜ì„¸ìš”"},null,512),[[b,l.localData.text]])])):g("",!0),i.stepData?(c(),p("div",Ee,[e[38]||(e[38]=s("label",{class:"field-label"},"ì›ë³¸ í…ìŠ¤íŠ¸ (ì½ê¸° ì „ìš©)",-1)),s("textarea",{value:i.stepData.rawText,disabled:"",class:"field-textarea disabled",rows:"3"},null,8,Re)])):g("",!0),l.localData?(c(),p("div",Fe,[e[43]||(e[43]=s("label",{class:"field-label"},"ìŠ¤í… íƒ€ìž… (í•˜ë‚˜ë§Œ ì„ íƒ ê°€ëŠ¥)",-1)),s("div",Oe,[s("label",Ne,[m(s("input",{type:"radio",value:"dialogue","onUpdate:modelValue":e[10]||(e[10]=o=>l.localData.type=o)},null,512),[[T,l.localData.type]]),e[39]||(e[39]=s("span",null,"ì¼ë°˜ ëŒ€í™”",-1))]),s("label",Le,[m(s("input",{type:"radio",value:"system","onUpdate:modelValue":e[11]||(e[11]=o=>l.localData.type=o)},null,512),[[T,l.localData.type]]),e[40]||(e[40]=s("span",null,"ì‹œìŠ¤í…œ ë©”ì‹œì§€",-1))]),s("label",Ae,[m(s("input",{type:"radio",value:"narrator","onUpdate:modelValue":e[12]||(e[12]=o=>l.localData.type=o)},null,512),[[T,l.localData.type]]),e[41]||(e[41]=s("span",null,"ë‚˜ë ˆì´í„°",-1))]),s("label",Me,[m(s("input",{type:"radio",value:"scene-description","onUpdate:modelValue":e[13]||(e[13]=o=>l.localData.type=o)},null,512),[[T,l.localData.type]]),e[42]||(e[42]=s("span",null,"ì”¬ ì„¤ëª…",-1))])])])):g("",!0),l.localData&&l.localData.type==="scene-description"?(c(),p("div",He,[s("div",Je,[s("label",Ge,[d(r,{emoji:"ðŸŽ¬",size:14}),e[44]||(e[44]=f(" ì”¬ ì •ë³´ ",-1))])]),s("div",We,[m(s("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>l.localData.sceneNumber=o),type:"text",class:"field-input small",placeholder:"ì”¬ ë²ˆí˜¸"},null,512),[[b,l.localData.sceneNumber]]),m(s("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>l.localData.sceneTitle=o),type:"text",class:"field-input",placeholder:"ì”¬ ì œëª©"},null,512),[[b,l.localData.sceneTitle]])]),m(s("input",{"onUpdate:modelValue":e[16]||(e[16]=o=>l.localData.scenePCs=o),type:"text",class:"field-input",placeholder:"ì°¸ê°€ PC (ì˜ˆ: í™ê¸¸ë™, ê¹€ì² ìˆ˜)"},null,512),[[b,l.localData.scenePCs]]),m(s("textarea",{"onUpdate:modelValue":e[17]||(e[17]=o=>l.localData.sceneDescription=o),class:"field-textarea",rows:"3",placeholder:"ì”¬ ìƒì„¸ ì„¤ëª…"},null,512),[[b,l.localData.sceneDescription]])])):g("",!0),l.localData?(c(),p("div",Xe,[s("label",qe,[d(r,{emoji:"ðŸ–¼ï¸",size:14}),f(" ì¼ëŸ¬ìŠ¤íŠ¸ ("+y(l.localData.illustrations.length)+"ê°œ) ",1)]),s("button",{onClick:e[18]||(e[18]=(...o)=>a.addIllustration&&a.addIllustration(...o)),class:"add-button"},[d(r,{emoji:"âž•",size:12}),e[45]||(e[45]=f(" ì¶”ê°€ ",-1))])])):g("",!0),l.localData.illustrations.length>0?(c(),p("div",Ke,[(c(!0),p(k,null,U(l.localData.illustrations,(o,v)=>(c(),p("div",{key:v,class:"item-card"},[s("div",Ye,[s("div",Qe,[m(s("input",{"onUpdate:modelValue":n=>o.url=n,type:"text",class:"field-input",placeholder:o.url&&o.url.startsWith("data:image")?"[ë¡œì»¬ ì´ë¯¸ì§€ íŒŒì¼]":"ì´ë¯¸ì§€ URL ë˜ëŠ” íŒŒì¼ ì„ íƒ",readonly:o.url&&o.url.startsWith("data:image")},null,8,Ze),[[b,o.url]]),s("input",{type:"file",ref_for:!0,ref:n=>{n&&(l.illustFileInputs[v]=n)},accept:"image/*",style:{display:"none"},onChange:n=>a.handleIllustFileSelect(n,v)},null,40,$e),s("button",{onClick:()=>{var n;return(n=l.illustFileInputs[v])==null?void 0:n.click()},class:"file-select-button",disabled:l.isLoadingFile},[d(r,{emoji:"ðŸ“",size:14}),f(" "+y(l.isLoadingFile?"ë¡œë”©...":"íŒŒì¼"),1)],8,et),o.url?(c(),p("button",{key:0,onClick:()=>a.clearIllustration(v),class:"clear-button",title:"ì´ˆê¸°í™”"},[d(r,{emoji:"âœ–ï¸",size:12})],8,tt)):g("",!0)]),e[46]||(e[46]=s("p",{class:"hint-text"},"ì´ë¯¸ì§€ íŒŒì¼ ê¶Œìž¥ í¬ê¸°: 2MB ì´í•˜",-1)),o.url?(c(),p("img",{key:0,src:o.url,class:"preview-img",onError:e[19]||(e[19]=(...n)=>a.handleImageError&&a.handleImageError(...n))},null,40,st)):g("",!0)]),s("button",{onClick:n=>a.removeIllustration(v),class:"remove-button"},[d(r,{emoji:"ðŸ—‘ï¸",size:14})],8,lt)]))),128))])):g("",!0),l.localData?(c(),p("div",ot,[s("label",at,[d(r,{emoji:"ðŸŽ²",size:14}),f(" ë‹¤ì´ìŠ¤ ë¡¤ ("+y(l.localData.diceRolls.length)+"ê°œ) ",1)]),s("button",{onClick:e[20]||(e[20]=(...o)=>a.addDiceRoll&&a.addDiceRoll(...o)),class:"add-button"},[d(r,{emoji:"âž•",size:12}),e[47]||(e[47]=f(" ì¶”ê°€ ",-1))])])):g("",!0),l.localData.diceRolls.length>0?(c(),p("div",it,[(c(!0),p(k,null,U(l.localData.diceRolls,(o,v)=>(c(),p("div",{key:v,class:"item-card dice-card"},[s("div",rt,[s("div",nt,[m(s("select",{"onUpdate:modelValue":n=>o.type=n,class:"field-input small"},[...e[48]||(e[48]=[s("option",{value:"normal"},"ì¼ë°˜",-1),s("option",{value:"dx3"},"DX3",-1),s("option",{value:"judgement"},"íŒì •",-1),s("option",{value:"choice"},"ì„ íƒ",-1)])],8,dt),[[z,o.type]]),m(s("input",{"onUpdate:modelValue":n=>o.formula=n,type:"text",class:"field-input",placeholder:"ê³µì‹ (ì˜ˆ: 1D100, 8dx+16)"},null,8,ut),[[b,o.formula]])]),o.type==="normal"?(c(),p("div",ct,[e[49]||(e[49]=s("span",{class:"field-label-inline"},"ê²°ê³¼:",-1)),m(s("input",{"onUpdate:modelValue":n=>o.result=n,type:"number",class:"field-input small",placeholder:"ê²°ê³¼"},null,8,pt),[[b,o.result,void 0,{number:!0}]])])):g("",!0),o.type==="dx3"?(c(),p("div",ht,[s("div",mt,[m(s("input",{"onUpdate:modelValue":n=>o.fullFormula=n,type:"text",class:"field-input",placeholder:"ì „ì²´ ê³µì‹ (ì˜ˆ: 8DX10+16)"},null,8,ft),[[b,o.fullFormula]])]),s("div",gt,[m(s("input",{"onUpdate:modelValue":n=>o.diceRolls=n,type:"text",class:"field-input",placeholder:"ë‹¤ì´ìŠ¤ ë¡¤ (ì˜ˆ: 10[5,6,7,8,9,10]+5[5]+16)"},null,8,vt),[[b,o.diceRolls]])]),s("div",bt,[e[50]||(e[50]=s("span",{class:"field-label-inline"},"ìµœì¢… ê²°ê³¼:",-1)),m(s("input",{"onUpdate:modelValue":n=>o.result=n,type:"number",class:"field-input small",placeholder:"ê²°ê³¼"},null,8,yt),[[b,o.result,void 0,{number:!0}]])])])):g("",!0),o.type==="judgement"?(c(),p("div",Ct,[s("div",Vt,[m(s("input",{"onUpdate:modelValue":n=>o.command=n,type:"text",class:"field-input small",placeholder:"ì»¤ë§¨ë“œ (cc<=70)"},null,8,St),[[b,o.command]]),m(s("input",{"onUpdate:modelValue":n=>o.checkName=n,type:"text",class:"field-input",placeholder:"íŒì •ëª…"},null,8,kt),[[b,o.checkName]])]),s("div",xt,[m(s("input",{"onUpdate:modelValue":n=>o.result=n,type:"number",class:"field-input small",placeholder:"ê²°ê³¼"},null,8,wt),[[b,o.result,void 0,{number:!0}]]),m(s("input",{"onUpdate:modelValue":n=>o.judgement=n,type:"text",class:"field-input",placeholder:"íŒì • (ë³´í†µ ì„±ê³µ, ì‹¤íŒ¨ ë“±)"},null,8,Ut),[[b,o.judgement]])])])):g("",!0),o.type==="choice"?(c(),p("div",Bt,[s("div",Dt,[m(s("textarea",{"onUpdate:modelValue":n=>o.optionsText=n,class:"field-textarea small",rows:"2",placeholder:"ì„ íƒì§€ (ì‰¼í‘œë¡œ êµ¬ë¶„)"},null,8,It),[[b,o.optionsText]])]),s("div",Tt,[e[51]||(e[51]=s("span",{class:"field-label-inline"},"ì„ íƒë¨:",-1)),m(s("input",{"onUpdate:modelValue":n=>o.result=n,type:"text",class:"field-input",placeholder:"ì„ íƒëœ ì˜µì…˜"},null,8,_t),[[b,o.result]])])])):g("",!0)]),s("button",{onClick:n=>a.removeDiceRoll(v),class:"remove-button"},[d(r,{emoji:"ðŸ—‘ï¸",size:14})],8,zt)]))),128))])):g("",!0),l.localData?(c(),p("div",jt,[s("label",Pt,[d(r,{emoji:"ðŸ“Š",size:14}),f(" ìŠ¤í…Œì´í„°ìŠ¤ ë³€í™” ("+y(l.localData.statusChanges.length)+"ê°œ) ",1)]),s("button",{onClick:e[21]||(e[21]=(...o)=>a.addStatusChange&&a.addStatusChange(...o)),class:"add-button"},[d(r,{emoji:"âž•",size:12}),e[52]||(e[52]=f(" ì¶”ê°€ ",-1))])])):g("",!0),l.localData.statusChanges.length>0?(c(),p("div",Et,[(c(!0),p(k,null,U(l.localData.statusChanges,(o,v)=>(c(),p("div",{key:v,class:"item-card"},[s("div",Rt,[s("div",Ft,[m(s("input",{"onUpdate:modelValue":n=>o.characterName=n,type:"text",class:"field-input",placeholder:"ìºë¦­í„°ëª…"},null,8,Ot),[[b,o.characterName]]),m(s("input",{"onUpdate:modelValue":n=>o.statusName=n,type:"text",class:"field-input",placeholder:"ìƒíƒœëª… (HP, ì¹¨ì‹ë¥  ë“±)"},null,8,Nt),[[b,o.statusName]])]),s("div",Lt,[s("label",At,[s("input",{type:"checkbox",checked:o.oldValue!==null&&o.newValue!==null,onChange:n=>a.toggleStatusMode(o,n)},null,40,Mt),e[53]||(e[53]=s("span",null,"ì´ì „ê°’/ìƒˆê°’ ëª¨ë“œ",-1))])]),o.oldValue!==null&&o.newValue!==null?(c(),p("div",Ht,[m(s("input",{"onUpdate:modelValue":n=>o.oldValue=n,type:"number",class:"field-input small",placeholder:"ì´ì „ê°’"},null,8,Jt),[[b,o.oldValue,void 0,{number:!0}]]),e[54]||(e[54]=s("span",{class:"arrow"},"â†’",-1)),m(s("input",{"onUpdate:modelValue":n=>o.newValue=n,type:"number",class:"field-input small",placeholder:"ìƒˆê°’"},null,8,Gt),[[b,o.newValue,void 0,{number:!0}]]),s("span",{class:w(["delta",{positive:a.computeDelta(o)>0,negative:a.computeDelta(o)<0}])},y(a.computeDelta(o)>0?"+":"")+y(a.computeDelta(o)),3)])):(c(),p("div",Wt,[e[55]||(e[55]=s("span",{class:"field-label-inline"},"ë³€í™”ëŸ‰:",-1)),m(s("input",{"onUpdate:modelValue":n=>o.delta=n,type:"number",class:"field-input small",placeholder:"Â±ë³€í™”ëŸ‰"},null,8,Xt),[[b,o.delta,void 0,{number:!0}]]),s("span",{class:w(["delta",{positive:o.delta>0,negative:o.delta<0}])},y(o.delta>0?"+":"")+y(o.delta),3)]))]),s("button",{onClick:n=>a.removeStatusChange(v),class:"remove-button"},[d(r,{emoji:"ðŸ—‘ï¸",size:14})],8,qt)]))),128))])):g("",!0),l.localData?(c(),p("div",Kt,[s("label",Yt,[d(r,{emoji:"ðŸŒŸ",size:14}),f(" ì‹œë…¸ë¹„ê°€ë¯¸ ì˜¤ì˜ ("+y((l.localData.ougis||[]).length)+"ê°œ) ",1)]),s("button",{onClick:e[22]||(e[22]=(...o)=>a.addOugi&&a.addOugi(...o)),class:"add-button"},[d(r,{emoji:"âž•",size:12}),e[56]||(e[56]=f(" ì¶”ê°€ ",-1))])])):g("",!0),(l.localData.ougis||[]).length>0?(c(),p("div",Qt,[(c(!0),p(k,null,U(l.localData.ougis,(o,v)=>(c(),p("div",{key:v,class:"item-card ougi-card"},[s("div",Zt,[m(s("input",{"onUpdate:modelValue":n=>o.ougiName=n,type:"text",class:"field-input",placeholder:"ì˜¤ì˜ëª… (ì˜ˆ: ì „ìŸì˜ ì§•ì¡°)"},null,8,$t),[[b,o.ougiName]]),m(s("input",{"onUpdate:modelValue":n=>o.skills=n,type:"text",class:"field-input",placeholder:"ì§€ì • íŠ¹ê¸° (ì‰¼í‘œ êµ¬ë¶„, ì˜ˆ: ë„ê²€ìˆ , ì¸ë§¥)"},null,8,es),[[b,o.skills]]),m(s("textarea",{"onUpdate:modelValue":n=>o.presentation=n,class:"field-textarea small",rows:"2",placeholder:"ì—°ì¶œ (ì˜¤ì˜ ì‚¬ìš© ì‹œ ë¬˜ì‚¬)"},null,8,ts),[[b,o.presentation]]),m(s("textarea",{"onUpdate:modelValue":n=>o.ougiEffect=n,class:"field-textarea small",rows:"2",placeholder:"ì˜¤ì˜ íš¨ê³¼ (ì „íˆ¬ì—ì„œì˜ íš¨ê³¼ ë“±, ì„ íƒì‚¬í•­)"},null,8,ss),[[b,o.ougiEffect]]),m(s("input",{"onUpdate:modelValue":n=>o.ninpouInfo=n,type:"text",class:"field-input",placeholder:"ì¸ë²• ì •ë³´ (ì˜ˆ: ë§ºìŒ/í¬ë‚˜í° ë¶„ë…¸)"},null,8,ls),[[b,o.ninpouInfo]]),m(s("input",{"onUpdate:modelValue":n=>o.ougiType=n,type:"text",class:"field-input",placeholder:"ì˜¤ì˜ ì¢…ë¥˜ (ì˜ˆ: ì „ìŸì˜ ì‹ , ì ˆëŒ€ ë°©ì–´)"},null,8,os),[[b,o.ougiType]])]),s("button",{onClick:n=>a.removeOugi(v),class:"remove-button"},[d(r,{emoji:"ðŸ—‘ï¸",size:14})],8,as)]))),128))])):g("",!0),l.localData?(c(),p("div",is,[s("label",rs,[d(r,{emoji:"âš”ï¸",size:14}),f(" ì‹œë…¸ë¹„ê°€ë¯¸ ì¸ë²• ("+y((l.localData.shinobigamis||[]).length)+"ê°œ) ",1)]),s("button",{onClick:e[23]||(e[23]=(...o)=>a.addShinobigami&&a.addShinobigami(...o)),class:"add-button"},[d(r,{emoji:"âž•",size:12}),e[57]||(e[57]=f(" ì¶”ê°€ ",-1))])])):g("",!0),(l.localData.shinobigamis||[]).length>0?(c(),p("div",ns,[(c(!0),p(k,null,U(l.localData.shinobigamis,(o,v)=>(c(),p("div",{key:v,class:"item-card shinobi-card"},[s("div",ds,[s("div",us,[m(s("input",{"onUpdate:modelValue":n=>o.command=n,type:"text",class:"field-input small",placeholder:"ëª…ë ¹ì–´ (ì˜ˆ: SG@12#2>=5)"},null,8,cs),[[b,o.command]]),m(s("input",{"onUpdate:modelValue":n=>o.checkName=n,type:"text",class:"field-input",placeholder:"íŒì •ëª… (ì˜ˆ: ë„ê²€ìˆ , ê´´ë ¥)"},null,8,ps),[[b,o.checkName]])]),s("div",hs,[m(s("input",{"onUpdate:modelValue":n=>o.diceRolls=n,type:"text",class:"field-input small",placeholder:"ì£¼ì‚¬ìœ„ (ì˜ˆ: 1,2)"},null,8,ms),[[b,o.diceRolls]]),m(s("input",{"onUpdate:modelValue":n=>o.diceExpression=n,type:"text",class:"field-input",placeholder:"ë‹¤ì´ìŠ¤ í‘œí˜„ (ì˜ˆ: 3[1,2])"},null,8,fs),[[b,o.diceExpression]])]),s("div",gs,[m(s("input",{"onUpdate:modelValue":n=>o.result=n,type:"number",class:"field-input small",placeholder:"ê²°ê³¼"},null,8,vs),[[b,o.result,void 0,{number:!0}]]),m(s("input",{"onUpdate:modelValue":n=>o.judgement=n,type:"text",class:"field-input small",placeholder:"íŒì • (æˆåŠŸ/å¤±æ•—)"},null,8,bs),[[b,o.judgement]])]),o.additionalInfo?(c(),p("div",ys,[s("div",Cs,[m(s("input",{"onUpdate:modelValue":n=>o.additionalInfo.type=n,type:"text",class:"field-input small",placeholder:"íƒ€ìž…"},null,8,Vs),[[b,o.additionalInfo.type]]),m(s("input",{"onUpdate:modelValue":n=>o.additionalInfo.range=n,type:"text",class:"field-input small",placeholder:"ì‚¬ê±°ë¦¬"},null,8,Ss),[[b,o.additionalInfo.range]]),m(s("input",{"onUpdate:modelValue":n=>o.additionalInfo.cost=n,type:"text",class:"field-input small",placeholder:"ì½”ìŠ¤íŠ¸"},null,8,ks),[[b,o.additionalInfo.cost]])]),m(s("input",{"onUpdate:modelValue":n=>o.additionalInfo.skill=n,type:"text",class:"field-input",placeholder:"íŠ¹ê¸°"},null,8,xs),[[b,o.additionalInfo.skill]]),m(s("textarea",{"onUpdate:modelValue":n=>o.additionalInfo.description=n,class:"field-textarea small",rows:"2",placeholder:"ì„¤ëª…"},null,8,ws),[[b,o.additionalInfo.description]])])):(c(),p("button",{key:1,onClick:n=>a.addShinobiAdditionalInfo(o),class:"add-info-button"},[d(r,{emoji:"âž•",size:10}),e[58]||(e[58]=f(" ì¶”ê°€ ì •ë³´ ìž…ë ¥ ",-1))],8,Us))]),s("button",{onClick:n=>a.removeShinobigami(v),class:"remove-button"},[d(r,{emoji:"ðŸ—‘ï¸",size:14})],8,Bs)]))),128))])):g("",!0),l.localData?(c(),p("div",Ds,[s("label",Is,[d(r,{emoji:"âš”ï¸",size:14}),f(" DX ì½¤ë³´/ì´íŽ™íŠ¸ ("+y(l.localData.dxCombos.length)+"ê°œ) ",1)]),s("button",{onClick:e[24]||(e[24]=(...o)=>a.addDXCombo&&a.addDXCombo(...o)),class:"add-button"},[d(r,{emoji:"âž•",size:12}),e[59]||(e[59]=f(" ì¶”ê°€ ",-1))])])):g("",!0),l.localData.dxCombos.length>0?(c(),p("div",Ts,[(c(!0),p(k,null,U(l.localData.dxCombos,(o,v)=>(c(),p("div",{key:v,class:"item-card combo-card"},[s("div",_s,[s("div",zs,[m(s("select",{"onUpdate:modelValue":n=>o.type=n,class:"field-input small"},[...e[60]||(e[60]=[s("option",{value:"dx-combo"},"ì½¤ë³´",-1),s("option",{value:"dx-effect"},"ë‹¨ì¼ ì´íŽ™íŠ¸",-1)])],8,js),[[z,o.type]]),s("label",Ps,[m(s("input",{type:"checkbox","onUpdate:modelValue":n=>o.isSingleEffect=n},null,8,Es),[[j,o.isSingleEffect]]),e[61]||(e[61]=s("span",null,"ë‹¨ì¼ ì´íŽ™íŠ¸",-1))])]),m(s("input",{"onUpdate:modelValue":n=>o.comboName=n,type:"text",class:"field-input",placeholder:"ì½¤ë³´/ì´íŽ™íŠ¸ëª…"},null,8,Rs),[[b,o.comboName]]),s("div",Fs,[m(s("input",{"onUpdate:modelValue":n=>o.timing=n,type:"text",class:"field-input",placeholder:"íƒ€ì´ë° (ë©”ì´ì €, ë§ˆì´ë„ˆ ë“±)"},null,8,Os),[[b,o.timing]]),m(s("input",{"onUpdate:modelValue":n=>o.difficulty=n,type:"text",class:"field-input",placeholder:"ë‚œì´ë„ (ìžë™, ëŒ€í•­ ë“±)"},null,8,Ns),[[b,o.difficulty]])]),s("div",Ls,[m(s("input",{"onUpdate:modelValue":n=>o.target=n,type:"text",class:"field-input",placeholder:"ëŒ€ìƒ"},null,8,As),[[b,o.target]]),m(s("input",{"onUpdate:modelValue":n=>o.range=n,type:"text",class:"field-input",placeholder:"ì‚¬ê±°ë¦¬"},null,8,Ms),[[b,o.range]])]),m(s("textarea",{"onUpdate:modelValue":n=>o.description=n,class:"field-textarea small",rows:"2",placeholder:"ì„¤ëª…/ê¸°ëŠ¥"},null,8,Hs),[[b,o.description]]),s("div",Js,[m(s("input",{"onUpdate:modelValue":n=>o.erosion=n,type:"text",class:"field-input small",placeholder:"ì¹¨ì‹ì¹˜"},null,8,Gs),[[b,o.erosion]]),m(s("input",{"onUpdate:modelValue":n=>o.erosionCost=n,type:"number",class:"field-input small",placeholder:"ì¹¨ì‹ ì½”ìŠ¤íŠ¸"},null,8,Ws),[[b,o.erosionCost,void 0,{number:!0}]])])]),s("button",{onClick:n=>a.removeDXCombo(v),class:"remove-button"},[d(r,{emoji:"ðŸ—‘ï¸",size:14})],8,Xs)]))),128))])):g("",!0),i.stepData?(c(),p("div",qs,[s("label",Ks,[d(r,{emoji:"ðŸ”",size:14}),e[62]||(e[62]=f(" JSON ì›ë³¸ ë°ì´í„° ",-1))]),s("button",{onClick:e[25]||(e[25]=o=>l.showRawJSON=!l.showRawJSON),class:"toggle-json-button"},y(l.showRawJSON?"ìˆ¨ê¸°ê¸°":"ë³´ê¸°"),1)])):g("",!0),l.showRawJSON?(c(),p("div",Ys,[s("pre",null,y(JSON.stringify(i.stepData,null,2)),1)])):g("",!0),l.localData?(c(),p("div",Qs,[s("div",Zs,[s("button",{onClick:e[26]||(e[26]=(...o)=>a.deleteStep&&a.deleteStep(...o)),class:"delete-button"},[d(r,{emoji:"ðŸ—‘ï¸",size:16}),e[63]||(e[63]=f(" ìŠ¤í… ì‚­ì œ ",-1))]),s("button",{onClick:e[27]||(e[27]=(...o)=>a.duplicateStep&&a.duplicateStep(...o)),class:"duplicate-button"},[d(r,{emoji:"ðŸ“‹",size:16}),e[64]||(e[64]=f(" ìŠ¤í… ë³µì‚¬ ",-1))])]),s("button",{onClick:e[28]||(e[28]=(...o)=>a.saveChanges&&a.saveChanges(...o)),class:"save-button"},[d(r,{emoji:"ðŸ’¾",size:16}),e[65]||(e[65]=f(" ë³€ê²½ì‚¬í•­ ì €ìž¥ ",-1))])])):g("",!0)])):(c(),p("div",Ve,[d(r,{emoji:"ðŸ‘†",size:48}),e[30]||(e[30]=s("p",null,"ì™¼ìª½ì—ì„œ ìŠ¤í…ì„ ì„ íƒí•˜ì„¸ìš”",-1))]))])])}const el=D(ve,[["render",$s],["__scopeId","data-v-a8f9f26d"]]),tl={name:"CharacterBulkEditor",props:{allSteps:{type:Array,required:!0}},data(){return{selectedCharacter:null,newCharacterName:"",newCharacterColor:"",isApplying:!1,progressCurrent:0,progressTotal:0}},computed:{characterGroups(){const t={};return this.allSteps.forEach(e=>{var l,a;const i=((l=e.character)==null?void 0:l.name)||"",h=((a=e.character)==null?void 0:a.color)||"#ffffff";t[i]||(t[i]={name:i,color:h,count:0}),t[i].count++}),Object.values(t).sort((e,i)=>i.count-e.count)},selectedGroup(){return this.selectedCharacter?this.characterGroups.find(t=>t.name===this.selectedCharacter):null},hasChanges(){if(!this.selectedCharacter)return!1;const t=this.newCharacterName&&this.newCharacterName!==this.selectedCharacter,e=this.newCharacterColor&&this.newCharacterColor!==this.selectedGroup.color;return t||e},progressPercentage(){return this.progressTotal===0?0:Math.round(this.progressCurrent/this.progressTotal*100)}},methods:{selectCharacter(t){this.selectedCharacter=t,this.newCharacterName=t,this.newCharacterColor=this.selectedGroup.color},resetForm(){this.selectedGroup&&(this.newCharacterName=this.selectedCharacter,this.newCharacterColor=this.selectedGroup.color)},async applyChanges(){if(!this.hasChanges||this.isApplying)return;const t=this.selectedCharacter,e=this.newCharacterName||t,i=this.newCharacterColor;this.isApplying=!0,this.progressCurrent=0,this.progressTotal=this.selectedGroup.count;try{this.$emit("bulk-update",{oldName:t,newName:e,newColor:i,onProgress:(h,l)=>{this.progressCurrent=h,this.progressTotal=l},onComplete:async h=>{await new Promise(l=>setTimeout(l,300)),this.isApplying=!1,this.progressCurrent=0,this.progressTotal=0,await new Promise(l=>setTimeout(l,150)),alert(h.message),this.selectedCharacter=null,this.newCharacterName="",this.newCharacterColor=""}})}catch(h){console.error("ì¼ê´„ ë³€ê²½ ì‹¤íŒ¨:",h),this.isApplying=!1,this.progressCurrent=0,this.progressTotal=0,await new Promise(l=>setTimeout(l,150)),alert("ìºë¦­í„° ì¼ê´„ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}}}},sl={class:"character-bulk-editor"},ll={key:0,class:"loading-overlay"},ol={class:"loading-content"},al={class:"progress-section"},il={class:"progress-bar"},rl={class:"progress-text"},nl={class:"editor-header"},dl={class:"editor-body"},ul={class:"info-message"},cl={class:"character-list"},pl={class:"list-header"},hl={class:"list-body"},ml=["onClick"],fl={class:"character-info"},gl={class:"character-name"},vl={class:"character-count"},bl={key:0,class:"edit-form"},yl={class:"form-header"},Cl={class:"affected-count"},Vl={class:"field-group"},Sl=["placeholder"],kl={class:"field-group"},xl={class:"color-picker-wrapper"},wl=["placeholder"],Ul={class:"preview-section"},Bl={class:"preview-comparison"},Dl={class:"preview-item before"},Il={class:"preview-box"},Tl={class:"preview-arrow"},_l={class:"preview-item after"},zl={class:"preview-box"},jl={class:"actions"},Pl=["disabled"],El=["disabled"],Rl={key:1,class:"no-selection"};function Fl(t,e,i,h,l,a){const r=x("EmojiToIcon");return c(),p("div",sl,[l.isApplying?(c(),p("div",ll,[s("div",ol,[e[5]||(e[5]=s("div",{class:"spinner"},null,-1)),e[6]||(e[6]=s("p",{class:"loading-text"},"ìºë¦­í„° ì •ë³´ë¥¼ ì¼ê´„ ë³€ê²½í•˜ëŠ” ì¤‘...",-1)),s("div",al,[s("div",il,[s("div",{class:"progress-fill",style:I({width:a.progressPercentage+"%"})},null,4)]),s("p",rl,y(l.progressCurrent)+" / "+y(l.progressTotal)+" ìŠ¤í… ("+y(a.progressPercentage)+"%)",1)]),e[7]||(e[7]=s("p",{class:"loading-subtext"},"ìž ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”",-1))])])):g("",!0),s("div",nl,[s("h3",null,[d(r,{emoji:"ðŸ‘¥",size:20}),e[8]||(e[8]=f(" ìºë¦­í„° ì¼ê´„ íŽ¸ì§‘ ",-1))])]),s("div",dl,[s("div",ul,[d(r,{emoji:"ðŸ’¡",size:18}),e[9]||(e[9]=s("p",null,"ê°™ì€ ì´ë¦„ì˜ ìºë¦­í„°ë¥¼ ëª¨ë‘ ì„ íƒí•˜ì—¬ ì´ë¦„ê³¼ ìƒ‰ìƒì„ ì¼ê´„ ë³€ê²½í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.",-1))]),s("div",cl,[s("div",pl,[s("h4",null,"ìºë¦­í„° ëª©ë¡ ("+y(a.characterGroups.length)+"ëª…)",1)]),s("div",hl,[(c(!0),p(k,null,U(a.characterGroups,o=>(c(),p("div",{key:o.name,class:w(["character-item",{selected:l.selectedCharacter===o.name}]),onClick:v=>a.selectCharacter(o.name)},[s("div",{class:"character-color-preview",style:I({backgroundColor:o.color})},null,4),s("div",fl,[s("div",gl,y(o.name||"(ì´ë¦„ ì—†ìŒ)"),1),s("div",vl,y(o.count)+"ê°œ ìŠ¤í…",1)])],10,ml))),128))])]),l.selectedCharacter?(c(),p("div",bl,[s("div",yl,[s("h4",null,[d(r,{emoji:"âœï¸",size:16}),f(' "'+y(l.selectedCharacter)+'" íŽ¸ì§‘ ',1)]),s("span",Cl,y(a.selectedGroup.count)+"ê°œ ìŠ¤í…ì— ì ìš©ë©ë‹ˆë‹¤",1)]),s("div",Vl,[e[10]||(e[10]=s("label",{class:"field-label"},"ìƒˆ ìºë¦­í„° ì´ë¦„",-1)),m(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.newCharacterName=o),type:"text",class:"field-input",placeholder:l.selectedCharacter},null,8,Sl),[[b,l.newCharacterName]])]),s("div",kl,[e[11]||(e[11]=s("label",{class:"field-label"},"ìƒˆ ìºë¦­í„° ìƒ‰ìƒ",-1)),s("div",xl,[m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.newCharacterColor=o),type:"color",class:"color-picker"},null,512),[[b,l.newCharacterColor]]),m(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.newCharacterColor=o),type:"text",class:"color-input",placeholder:a.selectedGroup.color},null,8,wl),[[b,l.newCharacterColor]])])]),s("div",Ul,[e[14]||(e[14]=s("h5",null,"ë³€ê²½ ì „/í›„ ë¯¸ë¦¬ë³´ê¸°",-1)),s("div",Bl,[s("div",Dl,[e[12]||(e[12]=s("span",{class:"preview-label"},"ë³€ê²½ ì „",-1)),s("div",Il,[s("div",{class:"preview-avatar",style:I({backgroundColor:a.selectedGroup.color})},y(l.selectedCharacter.charAt(0)),5),s("span",{class:"preview-name",style:I({color:a.selectedGroup.color})},y(l.selectedCharacter),5)])]),s("div",Tl,[d(r,{emoji:"âž¡ï¸",size:24})]),s("div",_l,[e[13]||(e[13]=s("span",{class:"preview-label"},"ë³€ê²½ í›„",-1)),s("div",zl,[s("div",{class:"preview-avatar",style:I({backgroundColor:l.newCharacterColor})},y((l.newCharacterName||l.selectedCharacter).charAt(0)),5),s("span",{class:"preview-name",style:I({color:l.newCharacterColor})},y(l.newCharacterName||l.selectedCharacter),5)])])])]),s("div",jl,[s("button",{onClick:e[3]||(e[3]=(...o)=>a.resetForm&&a.resetForm(...o)),class:"reset-button",disabled:l.isApplying},[d(r,{emoji:"ðŸ”„",size:16}),e[15]||(e[15]=f(" ì´ˆê¸°í™” ",-1))],8,Pl),s("button",{onClick:e[4]||(e[4]=(...o)=>a.applyChanges&&a.applyChanges(...o)),class:"apply-button",disabled:!a.hasChanges||l.isApplying},[l.isApplying?(c(),p(k,{key:0},[e[16]||(e[16]=s("div",{class:"button-spinner"},null,-1)),e[17]||(e[17]=f(" ì²˜ë¦¬ ì¤‘... ",-1))],64)):(c(),p(k,{key:1},[d(r,{emoji:"âœ…",size:16}),e[18]||(e[18]=f(" ì¼ê´„ ì ìš© ",-1))],64))],8,El)])])):(c(),p("div",Rl,[d(r,{emoji:"ðŸ‘†",size:48}),e[19]||(e[19]=s("p",null,"ì™¼ìª½ì—ì„œ ìºë¦­í„°ë¥¼ ì„ íƒí•˜ì„¸ìš”",-1))]))])])}const Ol=D(tl,[["render",Fl],["__scopeId","data-v-fd89d125"]]),Nl={name:"ImageBulkEditor",props:{vnData:{type:Object,required:!0}},data(){return{selectedImageUrl:null,newImageUrl:"",isApplying:!1,progressCurrent:0,progressTotal:0,activeFilter:"all",imageTypes:[{value:"all",label:"ì „ì²´",emoji:"ðŸŒ"},{value:"avatar",label:"ì•„ë°”íƒ€",emoji:"ðŸ‘¤"},{value:"background",label:"ë°°ê²½",emoji:"ðŸŽ¨"},{value:"handout",label:"í•¸ë“œì•„ì›ƒ",emoji:"ðŸ“„"},{value:"illustration",label:"ì¼ëŸ¬ìŠ¤íŠ¸",emoji:"ðŸ–¼ï¸"}],isLoadingFile:!1}},computed:{imageGroups(){const t={};return this.vnData.scenes&&this.vnData.scenes.forEach((e,i)=>{var h;(h=e.steps)==null||h.forEach((l,a)=>{var v,n;const r=(v=l.character)==null?void 0:v.avatarUrl;if(r){t[r]||(t[r]={url:r,count:0,types:new Set,locations:{avatar:[],background:[],handout:[],illustration:[]}}),t[r].count++,t[r].types.add("avatar");const u=l.character.name;t[r].locations.avatar.includes(u)||t[r].locations.avatar.push(u)}const o=(n=l.effects)==null?void 0:n.background;o&&(t[o]||(t[o]={url:o,count:0,types:new Set,locations:{avatar:[],background:[],handout:[],illustration:[]}}),t[o].count++,t[o].types.add("background"),t[o].locations.background.push(`ì”¬${i+1} ìŠ¤í…${a+1}`)),l.illustrations&&Array.isArray(l.illustrations)&&l.illustrations.forEach((u,S)=>{const V=u.url;V&&(t[V]||(t[V]={url:V,count:0,types:new Set,locations:{avatar:[],background:[],handout:[],illustration:[]}}),t[V].count++,t[V].types.add("illustration"),t[V].locations.illustration.push(`ì”¬${i+1} ìŠ¤í…${a+1}-${S+1}`))})})}),this.vnData.handouts&&this.vnData.handouts.forEach(e=>{const i=e.imageUrl;i&&(t[i]||(t[i]={url:i,count:0,types:new Set,locations:{avatar:[],background:[],handout:[],illustration:[]}}),t[i].count++,t[i].types.add("handout"),t[i].locations.handout.push(e.title||e.id))}),Object.values(t).map(e=>({...e,types:Array.from(e.types)})).sort((e,i)=>i.count-e.count)},filteredImageGroups(){return this.activeFilter==="all"?this.imageGroups:this.imageGroups.filter(t=>t.types.includes(this.activeFilter))},selectedGroup(){return this.selectedImageUrl?this.imageGroups.find(t=>t.url===this.selectedImageUrl):null},hasChanges(){return this.selectedImageUrl?this.newImageUrl&&this.newImageUrl!==this.selectedImageUrl:!1},progressPercentage(){return this.progressTotal===0?0:Math.round(this.progressCurrent/this.progressTotal*100)}},methods:{selectImage(t){this.selectedImageUrl=t,this.newImageUrl=t},resetForm(){this.selectedGroup&&(this.newImageUrl=this.selectedImageUrl)},async handleImageFileSelect(t){const e=t.target.files[0];if(e){if(e.size>2*1024*1024){alert("ì´ë¯¸ì§€ íŒŒì¼ í¬ê¸°ëŠ” 2MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤."),t.target.value="";return}this.isLoadingFile=!0;try{const i=await this.fileToBase64(e);this.newImageUrl=i,console.log("[ImageBulkEditor] ì´ë¯¸ì§€ íŒŒì¼ ë¡œë“œ ì™„ë£Œ:",{fileName:e.name,fileSize:e.size,base64Length:i.length})}catch(i){console.error("[ImageBulkEditor] íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨:",i),alert("íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{this.isLoadingFile=!1,t.target.value=""}}},fileToBase64(t){return new Promise((e,i)=>{const h=new FileReader;h.onload=()=>e(h.result),h.onerror=i,h.readAsDataURL(t)})},clearNewImage(){this.newImageUrl=this.selectedImageUrl},truncateUrl(t,e=50){return t?t.length<=e?t:t.substring(0,e-3)+"...":""},handleImageError(t){t.target.style.display="none",t.target.parentElement.classList.add("error")},async applyChanges(){if(!this.hasChanges||this.isApplying)return;const t=this.selectedImageUrl,e=this.newImageUrl;this.isApplying=!0,this.progressCurrent=0,this.progressTotal=this.selectedGroup.count;try{this.$emit("bulk-update",{oldUrl:t,newUrl:e,onProgress:(i,h)=>{this.progressCurrent=i,this.progressTotal=h},onComplete:async i=>{await new Promise(h=>setTimeout(h,300)),this.isApplying=!1,this.progressCurrent=0,this.progressTotal=0,await new Promise(h=>setTimeout(h,150)),alert(i.message),this.selectedImageUrl=null,this.newImageUrl=""}})}catch(i){console.error("ì¼ê´„ ë³€ê²½ ì‹¤íŒ¨:",i),this.isApplying=!1,this.progressCurrent=0,this.progressTotal=0,await new Promise(h=>setTimeout(h,150)),alert("ì´ë¯¸ì§€ URL ì¼ê´„ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}}}},Ll={class:"image-bulk-editor"},Al={key:0,class:"loading-overlay"},Ml={class:"loading-content"},Hl={class:"progress-section"},Jl={class:"progress-bar"},Gl={class:"progress-text"},Wl={class:"editor-header"},Xl={class:"editor-body"},ql={class:"info-message"},Kl={class:"image-list"},Yl={class:"list-header"},Ql={class:"filter-buttons"},Zl=["onClick"],$l={class:"list-body"},eo=["onClick"],to={class:"image-preview"},so=["src","alt"],lo={class:"image-info"},oo=["title"],ao={class:"image-meta"},io={class:"usage-count"},ro={class:"usage-types"},no={key:0,class:"edit-form"},uo={class:"form-header"},co={class:"affected-count"},po={class:"field-group"},ho={class:"current-url"},mo={class:"field-group"},fo={class:"file-input-group"},go=["disabled"],vo=["disabled"],bo={class:"hint-text"},yo={class:"preview-section"},Co={class:"preview-comparison"},Vo={class:"preview-item before"},So={class:"preview-box"},ko=["src"],xo={class:"preview-arrow"},wo={class:"preview-item after"},Uo={class:"preview-box"},Bo=["src"],Do={key:1,class:"preview-placeholder"},Io={class:"usage-details"},To={class:"usage-list"},_o={key:0,class:"usage-type"},zo={key:1,class:"usage-type"},jo={key:2,class:"usage-type"},Po={key:3,class:"usage-type"},Eo={class:"actions"},Ro=["disabled"],Fo=["disabled"],Oo={key:1,class:"no-selection"};function No(t,e,i,h,l,a){const r=x("EmojiToIcon");return c(),p("div",Ll,[l.isApplying?(c(),p("div",Al,[s("div",Ml,[e[9]||(e[9]=s("div",{class:"spinner"},null,-1)),e[10]||(e[10]=s("p",{class:"loading-text"},"ì´ë¯¸ì§€ URLì„ ì¼ê´„ ë³€ê²½í•˜ëŠ” ì¤‘...",-1)),s("div",Hl,[s("div",Jl,[s("div",{class:"progress-fill",style:I({width:a.progressPercentage+"%"})},null,4)]),s("p",Gl,y(l.progressCurrent)+" / "+y(l.progressTotal)+" í•­ëª© ("+y(a.progressPercentage)+"%)",1)]),e[11]||(e[11]=s("p",{class:"loading-subtext"},"ìž ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”",-1))])])):g("",!0),s("div",Wl,[s("h3",null,[d(r,{emoji:"ðŸ–¼ï¸",size:20}),e[12]||(e[12]=f(" ì´ë¯¸ì§€ URL ì¼ê´„ íŽ¸ì§‘ ",-1))])]),s("div",Xl,[s("div",ql,[d(r,{emoji:"ðŸ’¡",size:18}),e[13]||(e[13]=s("p",null,"ë™ì¼í•œ ì´ë¯¸ì§€ URLì„ ëª¨ë‘ ì„ íƒí•˜ì—¬ í•œ ë²ˆì— ë³€ê²½í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. (ì•„ë°”íƒ€, ë°°ê²½, í•¸ë“œì•„ì›ƒ ë“±)",-1))]),s("div",Kl,[s("div",Yl,[s("h4",null,"ì´ë¯¸ì§€ URL ëª©ë¡ ("+y(a.imageGroups.length)+"ê°œ)",1),s("div",Ql,[(c(!0),p(k,null,U(l.imageTypes,o=>(c(),p("button",{key:o.value,class:w(["filter-button",{active:l.activeFilter===o.value}]),onClick:v=>l.activeFilter=o.value},[d(r,{emoji:o.emoji,size:14},null,8,["emoji"]),f(" "+y(o.label),1)],10,Zl))),128))])]),s("div",$l,[(c(!0),p(k,null,U(a.filteredImageGroups,o=>(c(),p("div",{key:o.url,class:w(["image-item",{selected:l.selectedImageUrl===o.url}]),onClick:v=>a.selectImage(o.url)},[s("div",to,[s("img",{src:o.url,alt:o.url,onError:e[0]||(e[0]=(...v)=>a.handleImageError&&a.handleImageError(...v))},null,40,so)]),s("div",lo,[s("div",{class:"image-url",title:o.url},y(a.truncateUrl(o.url)),9,oo),s("div",ao,[s("span",io,y(o.count)+"íšŒ ì‚¬ìš©",1),s("span",ro,[o.types.includes("avatar")?(c(),_(r,{key:0,emoji:"ðŸ‘¤",size:12,title:"ì•„ë°”íƒ€"})):g("",!0),o.types.includes("background")?(c(),_(r,{key:1,emoji:"ðŸŽ¨",size:12,title:"ë°°ê²½"})):g("",!0),o.types.includes("handout")?(c(),_(r,{key:2,emoji:"ðŸ“„",size:12,title:"í•¸ë“œì•„ì›ƒ"})):g("",!0),o.types.includes("illustration")?(c(),_(r,{key:3,emoji:"ðŸ–¼ï¸",size:12,title:"ì¼ëŸ¬ìŠ¤íŠ¸"})):g("",!0)])])])],10,eo))),128))])]),l.selectedImageUrl?(c(),p("div",no,[s("div",uo,[s("h4",null,[d(r,{emoji:"âœï¸",size:16}),e[14]||(e[14]=f(" URL ë³€ê²½ ",-1))]),s("span",co,y(a.selectedGroup.count)+"ê°œ í•­ëª©ì— ì ìš©ë©ë‹ˆë‹¤",1)]),s("div",po,[e[15]||(e[15]=s("label",{class:"field-label"},"í˜„ìž¬ ì´ë¯¸ì§€ URL",-1)),s("div",ho,y(l.selectedImageUrl),1)]),s("div",mo,[e[18]||(e[18]=s("label",{class:"field-label"},"ìƒˆ ì´ë¯¸ì§€ URL",-1)),s("div",fo,[m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.newImageUrl=o),type:"text",class:"field-input",placeholder:"ìƒˆ ì´ë¯¸ì§€ URL ìž…ë ¥ ë˜ëŠ” íŒŒì¼ ì„ íƒ"},null,512),[[b,l.newImageUrl]]),s("input",{ref:"imageFileInput",type:"file",accept:"image/*",onChange:e[2]||(e[2]=(...o)=>a.handleImageFileSelect&&a.handleImageFileSelect(...o)),style:{display:"none"}},null,544),s("button",{onClick:e[3]||(e[3]=o=>t.$refs.imageFileInput.click()),class:"file-select-button",disabled:l.isApplying},[d(r,{emoji:"ðŸ“",size:14}),e[16]||(e[16]=f(" íŒŒì¼ ",-1))],8,go),l.newImageUrl?(c(),p("button",{key:0,onClick:e[4]||(e[4]=(...o)=>a.clearNewImage&&a.clearNewImage(...o)),class:"clear-button",disabled:l.isApplying},[d(r,{emoji:"âœ–ï¸",size:14})],8,vo)):g("",!0)]),s("p",bo,[d(r,{emoji:"ðŸ’¡",size:12}),e[17]||(e[17]=f(" ë¡œì»¬ íŒŒì¼ì€ base64ë¡œ ì¸ì½”ë”© (2MB ì´í•˜) ",-1))])]),s("div",yo,[e[22]||(e[22]=s("h5",null,"ë³€ê²½ ì „/í›„ ë¯¸ë¦¬ë³´ê¸°",-1)),s("div",Co,[s("div",Vo,[e[19]||(e[19]=s("span",{class:"preview-label"},"ë³€ê²½ ì „",-1)),s("div",So,[s("img",{src:l.selectedImageUrl,alt:"ë³€ê²½ ì „",onError:e[5]||(e[5]=(...o)=>a.handleImageError&&a.handleImageError(...o))},null,40,ko)])]),s("div",xo,[d(r,{emoji:"âž¡ï¸",size:24})]),s("div",wo,[e[21]||(e[21]=s("span",{class:"preview-label"},"ë³€ê²½ í›„",-1)),s("div",Uo,[l.newImageUrl?(c(),p("img",{key:0,src:l.newImageUrl,alt:"ë³€ê²½ í›„",onError:e[6]||(e[6]=(...o)=>a.handleImageError&&a.handleImageError(...o))},null,40,Bo)):(c(),p("div",Do,[d(r,{emoji:"ðŸ–¼ï¸",size:32}),e[20]||(e[20]=s("span",null,"URLì„ ìž…ë ¥í•˜ì„¸ìš”",-1))]))])])])]),s("div",Io,[e[23]||(e[23]=s("h5",null,"ì‚¬ìš© ìœ„ì¹˜ ìƒì„¸",-1)),s("div",To,[a.selectedGroup.types.includes("avatar")?(c(),p("div",_o,[d(r,{emoji:"ðŸ‘¤",size:16}),s("span",null,"ì•„ë°”íƒ€ ("+y(a.selectedGroup.locations.avatar.length)+"ê°œ ìºë¦­í„°)",1)])):g("",!0),a.selectedGroup.types.includes("background")?(c(),p("div",zo,[d(r,{emoji:"ðŸŽ¨",size:16}),s("span",null,"ë°°ê²½ ("+y(a.selectedGroup.locations.background.length)+"ê°œ ìŠ¤í…)",1)])):g("",!0),a.selectedGroup.types.includes("handout")?(c(),p("div",jo,[d(r,{emoji:"ðŸ“„",size:16}),s("span",null,"í•¸ë“œì•„ì›ƒ ("+y(a.selectedGroup.locations.handout.length)+"ê°œ)",1)])):g("",!0),a.selectedGroup.types.includes("illustration")?(c(),p("div",Po,[d(r,{emoji:"ðŸ–¼ï¸",size:16}),s("span",null,"ì¼ëŸ¬ìŠ¤íŠ¸ ("+y(a.selectedGroup.locations.illustration.length)+"ê°œ)",1)])):g("",!0)])]),s("div",Eo,[s("button",{onClick:e[7]||(e[7]=(...o)=>a.resetForm&&a.resetForm(...o)),class:"reset-button",disabled:l.isApplying},[d(r,{emoji:"ðŸ”„",size:16}),e[24]||(e[24]=f(" ì´ˆê¸°í™” ",-1))],8,Ro),s("button",{onClick:e[8]||(e[8]=(...o)=>a.applyChanges&&a.applyChanges(...o)),class:"apply-button",disabled:!a.hasChanges||l.isApplying},[l.isApplying?(c(),p(k,{key:0},[e[25]||(e[25]=s("div",{class:"button-spinner"},null,-1)),e[26]||(e[26]=f(" ì²˜ë¦¬ ì¤‘... ",-1))],64)):(c(),p(k,{key:1},[d(r,{emoji:"âœ…",size:16}),e[27]||(e[27]=f(" ì¼ê´„ ì ìš© ",-1))],64))],8,Fo)])])):(c(),p("div",Oo,[d(r,{emoji:"ðŸ‘†",size:48}),e[28]||(e[28]=s("p",null,"ì™¼ìª½ì—ì„œ ì´ë¯¸ì§€ URLì„ ì„ íƒí•˜ì„¸ìš”",-1))]))])])}const Lo=D(Nl,[["render",No],["__scopeId","data-v-6897d383"]]),Ao={name:"ColorPicker",props:{modelValue:{type:String,default:"#ffffff"},supportsAlpha:{type:Boolean,default:!0},placeholder:{type:String,default:"#ffffff ë˜ëŠ” rgba(255,255,255,0.8)"}},data(){return{hexValue:"#ffffff",opacityValue:1,tempTextValue:""}},computed:{displayValue(){return this.tempTextValue||this.modelValue}},watch:{modelValue:{immediate:!0,handler(t){t&&!this.tempTextValue&&this.parseColor(t)}}},methods:{parseColor(t){if(!t)return;const e=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);if(e){const i=parseInt(e[1]),h=parseInt(e[2]),l=parseInt(e[3]),a=e[4]?parseFloat(e[4]):1;this.hexValue=this.rgbToHex(i,h,l),this.opacityValue=a;return}if(t.startsWith("#")){this.hexValue=t,this.opacityValue=1;return}this.hexValue=t,this.opacityValue=1},rgbToHex(t,e,i){return"#"+[t,e,i].map(h=>{const l=h.toString(16);return l.length===1?"0"+l:l}).join("")},hexToRgb(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},buildColorString(){if(!this.supportsAlpha||this.opacityValue===1)return this.hexValue;const t=this.hexToRgb(this.hexValue);return t?`rgba(${t.r}, ${t.g}, ${t.b}, ${this.opacityValue})`:this.hexValue},handleColorChange(t){this.hexValue=t.target.value,this.tempTextValue="",this.emitValue()},handleOpacityChange(t){this.opacityValue=parseFloat(t.target.value),this.tempTextValue="",this.emitValue()},handleTextChange(t){this.tempTextValue=t.target.value},validateAndUpdate(){const t=this.tempTextValue;if(!t){this.tempTextValue="";return}this.parseColor(t),this.tempTextValue="",this.emitValue()},emitValue(){const t=this.buildColorString();this.$emit("update:modelValue",t)}}},Mo={class:"color-picker"},Ho={class:"color-inputs"},Jo=["value"],Go=["value","placeholder"],Wo={key:0,class:"opacity-slider"},Xo=["value"],qo={class:"opacity-value"};function Ko(t,e,i,h,l,a){return c(),p("div",Mo,[s("div",Ho,[s("input",{type:"color",value:l.hexValue,onInput:e[0]||(e[0]=(...r)=>a.handleColorChange&&a.handleColorChange(...r)),class:"color-swatch"},null,40,Jo),s("input",{type:"text",value:a.displayValue,onInput:e[1]||(e[1]=(...r)=>a.handleTextChange&&a.handleTextChange(...r)),onBlur:e[2]||(e[2]=(...r)=>a.validateAndUpdate&&a.validateAndUpdate(...r)),class:"color-text",placeholder:i.placeholder},null,40,Go)]),i.supportsAlpha?(c(),p("div",Wo,[e[4]||(e[4]=s("label",{class:"opacity-label"},"íˆ¬ëª…ë„",-1)),s("input",{type:"range",value:l.opacityValue,onInput:e[3]||(e[3]=(...r)=>a.handleOpacityChange&&a.handleOpacityChange(...r)),min:"0",max:"1",step:"0.01",class:"opacity-range"},null,40,Xo),s("span",qo,y(Math.round(l.opacityValue*100))+"%",1)])):g("",!0)])}const Yo=D(Ao,[["render",Ko],["__scopeId","data-v-1748c9a3"]]),Qo={name:"UnitInput",props:{modelValue:{type:String,default:"0px"},units:{type:Array,default:()=>["px","rem","em","%","vh","vw"]},min:{type:Number,default:0},max:{type:Number,default:null},step:{type:Number,default:1},placeholder:{type:String,default:"0"}},data(){return{numericValue:0,unitValue:"px"}},computed:{availableUnits(){return this.units}},watch:{modelValue:{immediate:!0,handler(t){this.parseValue(t)}}},methods:{parseValue(t){if(!t||t===""){this.numericValue=0,this.unitValue=this.units[0]||"px";return}const e=String(t).match(/^([-+]?[\d.]+)([a-z%]+)?$/i);e?(this.numericValue=parseFloat(e[1])||0,this.unitValue=e[2]||this.units[0]||"px"):(this.numericValue=0,this.unitValue=this.units[0]||"px")},handleNumberChange(t){this.numericValue=parseFloat(t.target.value)||0,this.emitValue()},handleUnitChange(t){this.unitValue=t.target.value,this.emitValue()},emitValue(){const t=`${this.numericValue}${this.unitValue}`;this.$emit("update:modelValue",t)}}},Zo={class:"unit-input"},$o=["value","min","max","step","placeholder"],ea=["value"],ta=["value"];function sa(t,e,i,h,l,a){return c(),p("div",Zo,[s("input",{type:"number",value:l.numericValue,onInput:e[0]||(e[0]=(...r)=>a.handleNumberChange&&a.handleNumberChange(...r)),min:i.min,max:i.max,step:i.step,class:"unit-number",placeholder:i.placeholder},null,40,$o),s("select",{value:l.unitValue,onChange:e[1]||(e[1]=(...r)=>a.handleUnitChange&&a.handleUnitChange(...r)),class:"unit-select"},[(c(!0),p(k,null,U(a.availableUnits,r=>(c(),p("option",{key:r,value:r},y(r),9,ta))),128))],40,ea)])}const la=D(Qo,[["render",sa],["__scopeId","data-v-abe357bb"]]),oa={name:"CustomCSSEditor",components:{ColorPicker:Yo,UnitInput:la,EmbedPlayerView:R},props:{initialCSS:{type:Object,default:()=>({})}},data(){return{currentSection:"dialog",sections:[{id:"dialog",name:"ëŒ€ì‚¬ ë°•ìŠ¤",icon:"ðŸ’¬"},{id:"character",name:"ìºë¦­í„°",icon:"ðŸ‘¤"},{id:"controls",name:"ì»¨íŠ¸ë¡¤",icon:"ðŸŽ®"},{id:"overlay",name:"ì˜¤ë²„ë ˆì´",icon:"ðŸ“±"},{id:"global",name:"ì „ì—­",icon:"ðŸŒ"},{id:"code",name:"CSS ì½”ë“œ",icon:"ðŸ“"}],cssVars:this.getDefaultCSSVars(),cssCodeText:"",userCustomCSS:""}},watch:{currentSection(){this.$nextTick(()=>{const t=this.$refs.embedPlayerPreview;t&&t.showOverlaysIfPresent&&t.showOverlaysIfPresent()})}},computed:{mockVNData(){const t={title:"CSS Preview",theme:{primaryColor:"#5b8def",backgroundColor:"#1a1a2e",textColor:"#ffffff"},characters:{Alice:{name:"Alice",color:"#9c27b0"},Bob:{name:"Bob",color:"#2196f3"}},handouts:[],scenes:[]};return this.currentSection==="dialog"?t.scenes=[{id:"scene_0",name:"Dialog Preview",description:null,steps:[{id:"step_0_0",type:"dialogue",character:{name:"Alice",color:"#9c27b0",avatarUrl:null},text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",rawText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",diceRolls:[],hasDice:!1,ougis:[],hasOugi:!1,shinobigamis:[],hasShinobigami:!1,statusChanges:[],hasStatusChange:!1,dxCombos:[],hasDXCombo:!1,effects:{sfx:null,bgm:null,background:null,backgroundOpacity:.3}}]}]:this.currentSection==="character"?t.scenes=[{id:"scene_0",name:"Character Preview",description:null,steps:[{id:"step_0_0",type:"dialogue",character:{name:"Alice",color:"#9c27b0",avatarUrl:"https://placehold.co/400"},text:"Character display preview text.",rawText:"Character display preview text.",diceRolls:[],hasDice:!1,ougis:[],hasOugi:!1,shinobigamis:[],hasShinobigami:!1,statusChanges:[],hasStatusChange:!1,dxCombos:[],hasDXCombo:!1,effects:{sfx:null,bgm:null,background:null,backgroundOpacity:.3}}]}]:this.currentSection==="controls"?t.scenes=[{id:"scene_0",name:"Sample Scene",description:null,steps:Array.from({length:10},(e,i)=>({id:`step_0_${i}`,type:"dialogue",character:{name:"Alice",color:"#9c27b0",avatarUrl:null},text:`Step ${i+1} content for testing playback controls.`,rawText:`Step ${i+1} content`,diceRolls:[],hasDice:!1,ougis:[],hasOugi:!1,shinobigamis:[],hasShinobigami:!1,statusChanges:[],hasStatusChange:!1,dxCombos:[],hasDXCombo:!1,effects:{sfx:null,bgm:null,background:null,backgroundOpacity:.3}}))}]:this.currentSection==="overlay"?t.scenes=[{id:"scene_0",name:"Overlay Preview",description:null,steps:[{id:"step_0_0",type:"dialogue",character:{name:"Alice",color:"#9c27b0",avatarUrl:null},text:"* ë‹¤ì´ìŠ¤",rawText:"2d6+3",diceRolls:[{type:"normal",formula:"2d6+3",result:11,rolls:[4,4],modifier:3,detail:"2d6+3 â†’ [4,4]+3 â†’ 11"}],hasDice:!0,ougis:[],hasOugi:!1,shinobigamis:[],hasShinobigami:!1,statusChanges:[],hasStatusChange:!1,dxCombos:[],hasDXCombo:!1,effects:{sfx:null,bgm:null,background:null,backgroundOpacity:.3}}]}]:this.currentSection==="global"&&(t.scenes=[{id:"scene_0",name:"Global Preview",description:null,steps:[{id:"step_0_0",type:"dialogue",character:{name:"Alice",color:"#9c27b0",avatarUrl:null},text:"Sample text to show global styling with font and colors.",rawText:"Sample text to show global styling.",diceRolls:[],hasDice:!1,ougis:[],hasOugi:!1,shinobigamis:[],hasShinobigami:!1,statusChanges:[],hasStatusChange:!1,dxCombos:[],hasDXCombo:!1,effects:{sfx:null,bgm:null,background:null,backgroundOpacity:.3}}]}]),t}},methods:{getDefaultCSSVars(){return{dialogBackground:"rgba(0, 0, 0, 0.85)",dialogBorderColor:"rgba(255, 255, 255, 0.2)",dialogBorderWidth:"2px",dialogTextColor:"#ffffff",dialogNameFontSize:"18px",dialogTextFontSize:"16px",dialogPadding:"20px 24px",dialogBorderRadius:"8px",dialogMinHeight:"120px",dialogLineHeight:"1.8",characterMaxHeight:"350px",characterMaxWidth:"250px",characterInactiveOpacity:"0.95",characterBorderRadius:"8px",characterBorderWidth:"2px",characterTransition:"opacity 0.2s",controlsBackground:"rgba(255, 255, 255, 0.05)",controlsBorderColor:"rgba(255, 255, 255, 0.1)",controlsButtonColor:"#ffffff",controlsButtonHoverColor:"#ffffff",controlsButtonBg:"rgba(255, 255, 255, 0.1)",controlsButtonHoverBg:"rgba(255, 255, 255, 0.2)",controlsProgressColor:"#5b8def",controlsProgressBg:"rgba(255, 255, 255, 0.1)",controlsButtonSize:"48px",controlsPrimaryButtonSize:"64px",controlsBorderRadius:"6px",overlayBackground:"rgba(0, 0, 0, 0.7)",overlayBlur:"4px",overlayContentBackground:"rgba(30, 30, 40, 0.95)",overlayTextColor:"#ffffff",overlayBorderRadius:"8px",overlayPadding:"32px",overlayMaxWidth:"600px",globalBackground:"#1a1a2e",globalTextColor:"#ffffff",globalFontFamily:"var(--font-pretendard)",globalLineHeight:"1.5",globalBackgroundImage:"none",globalBackgroundSize:"cover"}},applyPreview(){this.updateCSSCodeText(),this.injectCustomStyleTag(),this.$refs.embedPlayerPreview&&this.$refs.embedPlayerPreview.$forceUpdate()},injectCustomStyleTag(){const t=document.getElementById("vnlog-custom-css");t&&t.remove();const e=this.generateCSSVariableRules(),i=document.createElement("style");i.id="vnlog-custom-css",i.textContent=e+`

`+this.userCustomCSS,document.head.appendChild(i),console.log("[CustomCSSEditor] CSS ìŠ¤íƒ€ì¼ íƒœê·¸ ì£¼ìž… ì™„ë£Œ")},generateCSSVariableRules(){const t=["/* ========================================","   VNLog Custom CSS - Direct Override","   ======================================== */",""];return this.cssVars.dialogBackground&&(t.push("/* Dialog Box Container - Background */"),t.push(".dialog-box {"),t.push(`  background-color: ${this.cssVars.dialogBackground} !important;`),t.push("}"),t.push("")),this.cssVars.dialogBorderColor&&(t.push("/* Dialog Box Container - Border Color */"),t.push(".dialog-box {"),t.push(`  border-color: ${this.cssVars.dialogBorderColor} !important;`),t.push("}"),t.push("")),this.cssVars.dialogBorderWidth&&(t.push("/* Dialog Box Container - Border Width */"),t.push(".dialog-box {"),t.push(`  border-width: ${this.cssVars.dialogBorderWidth} !important;`),t.push("  border-style: solid !important;"),t.push("}"),t.push("")),this.cssVars.dialogBorderRadius&&(t.push("/* Dialog Box Container - Border Radius */"),t.push(".dialog-box {"),t.push(`  border-radius: ${this.cssVars.dialogBorderRadius} !important;`),t.push("}"),t.push("")),this.cssVars.dialogPadding&&(t.push("/* Dialog Box Container - Padding */"),t.push(".dialog-box {"),t.push(`  padding: ${this.cssVars.dialogPadding} !important;`),t.push("}"),t.push("")),this.cssVars.dialogMinHeight&&(t.push("/* Dialog Box Container - Min Height */"),t.push(".dialog-box {"),t.push(`  min-height: ${this.cssVars.dialogMinHeight} !important;`),t.push("}"),t.push("")),this.cssVars.dialogNameFontSize&&(t.push("/* Dialog Character Name - Font Size */"),t.push(".dialog-box .character-name {"),t.push(`  font-size: ${this.cssVars.dialogNameFontSize} !important;`),t.push("}"),t.push("")),this.cssVars.dialogTextColor&&(t.push("/* Dialog Text - Color */"),t.push(".dialog-box .dialog-text,"),t.push(".dialog-box .text-content {"),t.push(`  color: ${this.cssVars.dialogTextColor} !important;`),t.push("}"),t.push("")),this.cssVars.dialogTextFontSize&&(t.push("/* Dialog Text - Font Size */"),t.push(".dialog-box .dialog-text,"),t.push(".dialog-box .text-content {"),t.push(`  font-size: ${this.cssVars.dialogTextFontSize} !important;`),t.push("}"),t.push("")),this.cssVars.dialogLineHeight&&(t.push("/* Dialog Text - Line Height */"),t.push(".dialog-box .dialog-text,"),t.push(".dialog-box .text-content {"),t.push(`  line-height: ${this.cssVars.dialogLineHeight} !important;`),t.push("}"),t.push("")),this.cssVars.characterMaxWidth&&(t.push("/* Character Image - Max Width */"),t.push(".character-display .character-avatar img {"),t.push(`  max-width: ${this.cssVars.characterMaxWidth} !important;`),t.push("}"),t.push("")),this.cssVars.characterMaxHeight&&(t.push("/* Character Image - Max Height */"),t.push(".character-display .character-avatar img {"),t.push(`  max-height: ${this.cssVars.characterMaxHeight} !important;`),t.push("}"),t.push("")),this.cssVars.characterBorderRadius&&(t.push("/* Character Image - Border Radius */"),t.push(".character-display .character-avatar img {"),t.push(`  border-radius: ${this.cssVars.characterBorderRadius} !important;`),t.push("}"),t.push("")),this.cssVars.characterBorderWidth&&(t.push("/* Character Image - Border */"),t.push(".character-display .character-avatar img {"),t.push(`  border: ${this.cssVars.characterBorderWidth} solid rgba(255, 255, 255, 0.3) !important;`),t.push("}"),t.push("")),this.cssVars.characterTransition&&(t.push("/* Character Image - Transition */"),t.push(".character-display .character-avatar img {"),t.push(`  transition: ${this.cssVars.characterTransition} !important;`),t.push("}"),t.push("")),this.cssVars.characterInactiveOpacity&&(t.push("/* Character Inactive - Opacity */"),t.push(".character-display .character-wrapper:not(.is-speaking) .character-avatar img {"),t.push(`  opacity: ${this.cssVars.characterInactiveOpacity} !important;`),t.push("}"),t.push("")),this.cssVars.controlsBackground&&(t.push("/* Playback Controls Container - Background */"),t.push(".playback-controls {"),t.push(`  background: ${this.cssVars.controlsBackground} !important;`),t.push("}"),t.push("")),this.cssVars.controlsBorderColor&&(t.push("/* Playback Controls Container - Border Color */"),t.push(".playback-controls {"),t.push(`  border-color: ${this.cssVars.controlsBorderColor} !important;`),t.push("}"),t.push("")),this.cssVars.controlsBorderRadius&&(t.push("/* Playback Controls Container - Border Radius */"),t.push(".playback-controls {"),t.push(`  border-radius: 0 0 ${this.cssVars.controlsBorderRadius} ${this.cssVars.controlsBorderRadius} !important;`),t.push("}"),t.push("")),this.cssVars.controlsProgressBg&&(t.push("/* Progress Bar - Background */"),t.push(".playback-controls .progress-bar {"),t.push(`  background: ${this.cssVars.controlsProgressBg} !important;`),t.push("}"),t.push("")),this.cssVars.controlsProgressColor&&(t.push("/* Progress Fill - Color */"),t.push(".playback-controls .progress-fill {"),t.push(`  background: ${this.cssVars.controlsProgressColor} !important;`),t.push("}"),t.push("")),this.cssVars.controlsButtonSize&&(t.push("/* Control Button - Size */"),t.push(".playback-controls .control-button {"),t.push(`  width: ${this.cssVars.controlsButtonSize} !important;`),t.push(`  height: ${this.cssVars.controlsButtonSize} !important;`),t.push("}"),t.push("")),this.cssVars.controlsButtonBg&&(t.push("/* Control Button - Background */"),t.push(".playback-controls .control-button {"),t.push(`  background: ${this.cssVars.controlsButtonBg} !important;`),t.push("}"),t.push("")),this.cssVars.controlsButtonColor&&(t.push("/* Control Button - Color */"),t.push(".playback-controls .control-button {"),t.push(`  color: ${this.cssVars.controlsButtonColor} !important;`),t.push("}"),t.push("")),this.cssVars.controlsBorderRadius&&(t.push("/* Control Button - Border Radius */"),t.push(".playback-controls .control-button,"),t.push(".playback-controls .speed-button {"),t.push(`  border-radius: ${this.cssVars.controlsBorderRadius} !important;`),t.push("}"),t.push("")),this.cssVars.controlsButtonHoverBg&&(t.push("/* Control Button Hover - Background */"),t.push(".playback-controls .control-button:hover:not(:disabled) {"),t.push(`  background: ${this.cssVars.controlsButtonHoverBg} !important;`),t.push("}"),t.push("")),this.cssVars.controlsButtonHoverColor&&(t.push("/* Control Button Hover - Color */"),t.push(".playback-controls .control-button:hover:not(:disabled) {"),t.push(`  color: ${this.cssVars.controlsButtonHoverColor} !important;`),t.push("}"),t.push("")),this.cssVars.controlsPrimaryButtonSize&&(t.push("/* Primary Control Button - Size */"),t.push(".playback-controls .control-button.primary {"),t.push(`  width: ${this.cssVars.controlsPrimaryButtonSize} !important;`),t.push(`  height: ${this.cssVars.controlsPrimaryButtonSize} !important;`),t.push("}"),t.push("")),this.cssVars.overlayBackground&&(t.push("/* Overlay Background - Color */"),t.push(".dice-overlay,"),t.push(".scene-description-overlay {"),t.push(`  background: ${this.cssVars.overlayBackground} !important;`),t.push("}"),t.push("")),this.cssVars.overlayBlur&&(t.push("/* Overlay Background - Blur */"),t.push(".dice-overlay,"),t.push(".scene-description-overlay {"),t.push(`  backdrop-filter: blur(${this.cssVars.overlayBlur}) !important;`),t.push("}"),t.push("")),this.cssVars.overlayContentBackground&&(t.push("/* Overlay Content Box - Background */"),t.push(".dice-overlay-content,"),t.push(".scene-description-content {"),t.push(`  background: ${this.cssVars.overlayContentBackground} !important;`),t.push("}"),t.push("")),this.cssVars.overlayTextColor&&(t.push("/* Overlay Content Box - Text Color */"),t.push(".dice-overlay-content,"),t.push(".scene-description-content {"),t.push(`  color: ${this.cssVars.overlayTextColor} !important;`),t.push("}"),t.push("")),this.cssVars.overlayBorderRadius&&(t.push("/* Overlay Content Box - Border Radius */"),t.push(".dice-overlay-content,"),t.push(".scene-description-content {"),t.push(`  border-radius: ${this.cssVars.overlayBorderRadius} !important;`),t.push("}"),t.push("")),this.cssVars.overlayPadding&&(t.push("/* Overlay Content Box - Padding */"),t.push(".dice-overlay-content,"),t.push(".scene-description-content {"),t.push(`  padding: ${this.cssVars.overlayPadding} !important;`),t.push("}"),t.push("")),this.cssVars.overlayMaxWidth&&(t.push("/* Overlay Content Box - Max Width */"),t.push(".dice-overlay-content,"),t.push(".scene-description-content {"),t.push(`  max-width: ${this.cssVars.overlayMaxWidth} !important;`),t.push("}"),t.push("")),this.cssVars.globalBackground&&(t.push("/* Global Container - Background Color */"),t.push(".embed-player-view,"),t.push(".player-view {"),t.push(`  background-color: ${this.cssVars.globalBackground} !important;`),t.push("}"),t.push("")),this.cssVars.globalTextColor&&(t.push("/* Global - Text Color (All Elements) */"),t.push(".embed-player-view,"),t.push(".player-view,"),t.push(".embed-player-view *,"),t.push(".player-view * {"),t.push(`  color: ${this.cssVars.globalTextColor} !important;`),t.push("}"),t.push("")),this.cssVars.globalFontFamily&&(t.push("/* Global - Font Family (All Elements) */"),t.push(".embed-player-view,"),t.push(".player-view,"),t.push(".embed-player-view *,"),t.push(".player-view * {"),t.push(`  font-family: ${this.cssVars.globalFontFamily} !important;`),t.push("}"),t.push("")),this.cssVars.globalLineHeight&&(t.push("/* Global - Line Height (All Elements) */"),t.push(".embed-player-view,"),t.push(".player-view,"),t.push(".embed-player-view *,"),t.push(".player-view * {"),t.push(`  line-height: ${this.cssVars.globalLineHeight} !important;`),t.push("}"),t.push("")),this.cssVars.globalBackgroundImage&&this.cssVars.globalBackgroundImage!=="none"&&(t.push("/* Global Container - Background Image */"),t.push(".embed-player-view,"),t.push(".player-view {"),t.push(`  background-image: ${this.cssVars.globalBackgroundImage} !important;`),this.cssVars.globalBackgroundSize&&t.push(`  background-size: ${this.cssVars.globalBackgroundSize} !important;`),t.push("  background-position: center !important;"),t.push("  background-repeat: no-repeat !important;"),t.push("  background-attachment: fixed !important;"),t.push("}"),t.push("")),this.cssVars.controlsBackground&&(t.push("/* Player Header - Background */"),t.push(".player-view .player-header,"),t.push(".embed-player-view .player-header {"),t.push(`  background: ${this.cssVars.controlsBackground} !important;`),t.push("}"),t.push("")),this.cssVars.controlsBorderColor&&(t.push("/* Player Header - Border Color */"),t.push(".player-view .player-header,"),t.push(".embed-player-view .player-header {"),t.push(`  border-bottom-color: ${this.cssVars.controlsBorderColor} !important;`),t.push("}"),t.push("")),this.cssVars.controlsButtonBg&&(t.push("/* Header Back Button - Background */"),t.push(".player-view .player-header .back-button {"),t.push(`  background: ${this.cssVars.controlsButtonBg} !important;`),t.push("}"),t.push("")),this.cssVars.controlsButtonColor&&(t.push("/* Header Back Button - Color */"),t.push(".player-view .player-header .back-button {"),t.push(`  color: ${this.cssVars.controlsButtonColor} !important;`),t.push("}"),t.push("")),this.cssVars.controlsBorderRadius&&(t.push("/* Header Back Button - Border Radius */"),t.push(".player-view .player-header .back-button {"),t.push(`  border-radius: ${this.cssVars.controlsBorderRadius} !important;`),t.push("}"),t.push("")),this.cssVars.controlsButtonHoverBg&&(t.push("/* Header Back Button Hover - Background */"),t.push(".player-view .player-header .back-button:hover {"),t.push(`  background: ${this.cssVars.controlsButtonHoverBg} !important;`),t.push("}"),t.push("")),this.cssVars.controlsButtonBg&&(t.push("/* Header Buttons - Background */"),t.push(".player-view .player-header .header-button,"),t.push(".embed-player-view .player-header .header-button {"),t.push(`  background: ${this.cssVars.controlsButtonBg} !important;`),t.push("}"),t.push("")),this.cssVars.controlsButtonColor&&(t.push("/* Header Buttons - Color */"),t.push(".player-view .player-header .header-button,"),t.push(".embed-player-view .player-header .header-button {"),t.push(`  color: ${this.cssVars.controlsButtonColor} !important;`),t.push("}"),t.push("")),this.cssVars.controlsBorderRadius&&(t.push("/* Header Buttons - Border Radius */"),t.push(".player-view .player-header .header-button,"),t.push(".embed-player-view .player-header .header-button {"),t.push(`  border-radius: ${this.cssVars.controlsBorderRadius} !important;`),t.push("}"),t.push("")),this.cssVars.controlsButtonHoverBg&&(t.push("/* Header Buttons Hover - Background */"),t.push(".player-view .player-header .header-button:hover,"),t.push(".embed-player-view .player-header .header-button:hover {"),t.push(`  background: ${this.cssVars.controlsButtonHoverBg} !important;`),t.push("}"),t.push("")),this.cssVars.controlsButtonHoverColor&&(t.push("/* Header Buttons Hover - Color */"),t.push(".player-view .player-header .header-button:hover,"),t.push(".embed-player-view .player-header .header-button:hover {"),t.push(`  color: ${this.cssVars.controlsButtonHoverColor} !important;`),t.push("}"),t.push("")),this.cssVars.globalTextColor&&(t.push("/* Header Title - Color */"),t.push(".player-view .player-header .log-title,"),t.push(".embed-player-view .player-header .embed-title {"),t.push(`  color: ${this.cssVars.globalTextColor} !important;`),t.push("}"),t.push("")),t.join(`
`)},wrapCSSWithScope(t){const e=t.split(`
`),i=[];let h=!1,l=[],a=0;for(const r of e){const o=r.trim();if(o.startsWith("/*")){i.push(r);continue}if(o.includes("{")?(a+=(o.match(/{/g)||[]).length,!h&&a>0?(h=!0,l=[r]):l.push(r)):h||o&&!o.startsWith("/*")?l.push(r):i.push(r),o.includes("}")&&(a-=(o.match(/}/g)||[]).length,h&&a===0)){const v=l.join(`
`),n=this.applyScopeToRule(v);i.push(n),l=[],h=!1}}return i.join(`
`)},applyScopeToRule(t){const e=t.match(/^([^{]+){([\s\S]*)}/);if(!e)return t;const i=e[1].trim(),h=e[2];return i.includes(":root")?`.player-view, .embed-player-view, .mini-player-view {
${h}}`:`${i.split(",").map(r=>r.trim()).map(r=>r.startsWith(".player-view")||r.startsWith(".embed-player-view")||r.startsWith(".mini-player-view")?r:`.player-view ${r}, .embed-player-view ${r}, .mini-player-view ${r}`).join(", ")} {
${h}}`},updateCSSCodeText(){const t=this.generateCSSFile();this.cssCodeText=t+this.userCustomCSS},onCodeEdit(){},syncFromCode(){try{const t=this.cssCodeText,e="/* USER CUSTOM CSS - Add your styles below */",i=t.indexOf(e);let h=t,l="";i!==-1&&(h=t.substring(0,i+e.length),l=t.substring(i+e.length).trim()),this.parseCSSFile(h),this.userCustomCSS=l?`
`+l:"",this.applyPreview(),this.injectCustomStyleTag(),alert("CSS ì½”ë“œê°€ UIì— ë™ê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(t){alert("CSS ì½”ë“œ íŒŒì‹± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),console.error(t)}},async copyCodeToClipboard(){try{await navigator.clipboard.writeText(this.cssCodeText),alert("CSS ì½”ë“œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(t){alert("í´ë¦½ë³´ë“œ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."),console.error(t)}},resetToDefault(){confirm("CSSë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(this.cssVars=this.getDefaultCSSVars(),this.applyPreview())},exportCSS(){const t=this.cssCodeText,e=new Blob([t],{type:"text/css"}),i=URL.createObjectURL(e),h=document.createElement("a");h.href=i,h.download=`vnlog-custom-${Date.now()}.css`,h.click(),URL.revokeObjectURL(i)},generateCSSFile(){return this.generateCSSVariableRules()+`

/* ======================================== */
/* USER CUSTOM CSS - Add your styles below */
/* ======================================== */
`},importCSS(){this.$refs.fileInput.click()},handleFileImport(t){const e=t.target.files[0];if(!e)return;const i=new FileReader;i.onload=h=>{try{const l=h.target.result,a="/* USER CUSTOM CSS - Add your styles below */",r=l.indexOf(a);let o=l,v="";r!==-1&&(o=l.substring(0,r+a.length),v=l.substring(r+a.length).trim()),this.parseCSSFile(o),this.userCustomCSS=v?`
`+v:"",this.updateCSSCodeText(),this.applyPreview(),alert("CSSë¥¼ ì„±ê³µì ìœ¼ë¡œ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.")}catch(l){alert("CSS íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),console.error(l)}},i.readAsText(e),t.target.value=""},parseCSSFile(t){const e=t.split(`
`);for(const i of e){const h=i.trim();if(h.startsWith("--custom-")){const l=h.match(/--custom-([^:]+):\s*([^;]+);?/);if(l){const a=l[1].trim(),r=l[2].trim(),o=this.cssToCamelCase(a);this.cssVars.hasOwnProperty(o)&&(this.cssVars[o]=r)}}}console.log("[CustomCSSEditor] CSS íŒŒì‹± ì™„ë£Œ:",this.cssVars)},cssToCamelCase(t){return{"dialog-bg":"dialogBackground","dialog-border":"dialogBorderColor","dialog-text":"dialogTextColor","dialog-border-width":"dialogBorderWidth","dialog-name-size":"dialogNameFontSize","dialog-text-size":"dialogTextFontSize","dialog-padding":"dialogPadding","dialog-radius":"dialogBorderRadius","dialog-min-height":"dialogMinHeight","dialog-line-height":"dialogLineHeight","character-max-height":"characterMaxHeight","character-max-width":"characterMaxWidth","character-inactive-opacity":"characterInactiveOpacity","character-border-radius":"characterBorderRadius","character-border-width":"characterBorderWidth","character-transition":"characterTransition","controls-bg":"controlsBackground","controls-border":"controlsBorderColor","controls-button":"controlsButtonColor","controls-button-hover":"controlsButtonHoverColor","controls-button-bg":"controlsButtonBg","controls-button-hover-bg":"controlsButtonHoverBg","controls-progress":"controlsProgressColor","controls-progress-bg":"controlsProgressBg","controls-button-size":"controlsButtonSize","controls-primary-button-size":"controlsPrimaryButtonSize","controls-border-radius":"controlsBorderRadius","overlay-bg":"overlayBackground","overlay-blur":"overlayBlur","overlay-content-bg":"overlayContentBackground","overlay-text":"overlayTextColor","overlay-radius":"overlayBorderRadius","overlay-padding":"overlayPadding","overlay-max-width":"overlayMaxWidth","global-bg":"globalBackground","global-text":"globalTextColor","global-font":"globalFontFamily","global-line-height":"globalLineHeight"}[t]||t},applyAndSave(){this.$emit("save",{cssVars:this.cssVars,userCustomCSS:this.userCustomCSS}),alert("CSSê°€ ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤. JSON ë‚´ë³´ë‚´ê¸° ì‹œ í•¨ê»˜ í¬í•¨ë©ë‹ˆë‹¤.")}},mounted(){this.initialCSS&&(this.initialCSS.cssVars?this.cssVars={...this.getDefaultCSSVars(),...this.initialCSS.cssVars}:Object.keys(this.initialCSS).length>0&&(this.cssVars={...this.getDefaultCSSVars(),...this.initialCSS}),this.initialCSS.userCustomCSS&&(this.userCustomCSS=this.initialCSS.userCustomCSS)),this.updateCSSCodeText(),this.applyPreview()},beforeUnmount(){const t=document.getElementById("vnlog-custom-css");t&&t.remove()}},aa={class:"custom-css-editor"},ia={class:"editor-header"},ra={class:"editor-body"},na={class:"section-tabs"},da=["onClick"],ua={class:"editor-content"},ca={key:0,class:"preview-section"},pa={class:"preview-content"},ha={class:"css-edit-area"},ma={key:0,class:"css-section"},fa={class:"css-field"},ga={class:"css-field"},va={class:"css-field"},ba={class:"css-field"},ya={class:"css-field"},Ca={class:"css-field"},Va={class:"css-field"},Sa={class:"css-field"},ka={class:"css-field"},xa={class:"css-field"},wa={key:1,class:"css-section"},Ua={class:"css-field"},Ba={class:"css-field"},Da={class:"css-field"},Ia={class:"css-field"},Ta={class:"css-field"},_a={class:"css-field"},za={key:2,class:"css-section"},ja={class:"css-field"},Pa={class:"css-field"},Ea={class:"css-field"},Ra={class:"css-field"},Fa={class:"css-field"},Oa={class:"css-field"},Na={class:"css-field"},La={class:"css-field"},Aa={class:"css-field"},Ma={class:"css-field"},Ha={class:"css-field"},Ja={key:3,class:"css-section"},Ga={class:"css-field"},Wa={class:"css-field"},Xa={class:"css-field"},qa={class:"css-field"},Ka={class:"css-field"},Ya={class:"css-field"},Qa={class:"css-field"},Za={key:4,class:"css-section"},$a={class:"css-field"},ei={class:"css-field"},ti={class:"css-field"},si={class:"css-field"},li={class:"css-field"},oi={class:"css-field"},ai={key:5,class:"css-section"},ii={class:"css-code-editor"},ri={class:"code-header"},ni={class:"code-actions"},di={class:"code-hint"},ui={class:"editor-actions"};function ci(t,e,i,h,l,a){const r=x("EmojiToIcon"),o=x("EmbedPlayerView"),v=x("ColorPicker"),n=x("UnitInput");return c(),p("div",aa,[s("div",ia,[s("h3",null,[d(r,{emoji:"ðŸŽ¨",size:20}),e[55]||(e[55]=f(" CSS ì»¤ìŠ¤í„°ë§ˆì´ì§• ",-1))]),e[56]||(e[56]=s("p",{class:"editor-description"}," í”Œë ˆì´ì–´ì˜ CSSë¥¼ ì§ì ‘ íŽ¸ì§‘í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë³€ê²½ ì‚¬í•­ì€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë¯¸ë¦¬ë³´ê¸°ì— ë°˜ì˜ë©ë‹ˆë‹¤. ",-1))]),s("div",ra,[s("div",na,[(c(!0),p(k,null,U(l.sections,u=>(c(),p("button",{key:u.id,class:w(["section-tab",{active:l.currentSection===u.id}]),onClick:S=>l.currentSection=u.id},[d(r,{emoji:u.icon,size:16},null,8,["emoji"]),f(" "+y(u.name),1)],10,da))),128))]),s("div",ua,[l.currentSection!=="code"?(c(),p("div",ca,[s("h4",null,[d(r,{emoji:"ðŸ‘ï¸",size:16}),e[57]||(e[57]=f(" ë¯¸ë¦¬ë³´ê¸° ",-1))]),s("div",pa,[d(o,{ref:"embedPlayerPreview","vn-data":a.mockVNData,"custom-css":{cssVars:l.cssVars,userCustomCSS:l.userCustomCSS}},null,8,["vn-data","custom-css"])])])):g("",!0),s("div",ha,[l.currentSection==="dialog"?(c(),p("div",ma,[e[68]||(e[68]=s("h4",null,"ëŒ€ì‚¬ ë°•ìŠ¤ (DialogBox)",-1)),s("div",fa,[e[58]||(e[58]=s("label",null,"ë°°ê²½ìƒ‰",-1)),d(v,{modelValue:l.cssVars.dialogBackground,"onUpdate:modelValue":[e[0]||(e[0]=u=>l.cssVars.dialogBackground=u),a.applyPreview],"supports-alpha":!0},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ga,[e[59]||(e[59]=s("label",null,"í…Œë‘ë¦¬ ìƒ‰ìƒ",-1)),d(v,{modelValue:l.cssVars.dialogBorderColor,"onUpdate:modelValue":[e[1]||(e[1]=u=>l.cssVars.dialogBorderColor=u),a.applyPreview],"supports-alpha":!0},null,8,["modelValue","onUpdate:modelValue"])]),s("div",va,[e[60]||(e[60]=s("label",null,"í…Œë‘ë¦¬ ë‘ê»˜",-1)),d(n,{modelValue:l.cssVars.dialogBorderWidth,"onUpdate:modelValue":[e[2]||(e[2]=u=>l.cssVars.dialogBorderWidth=u),a.applyPreview],units:["px"],step:1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ba,[e[61]||(e[61]=s("label",null,"í…ìŠ¤íŠ¸ ìƒ‰ìƒ",-1)),d(v,{modelValue:l.cssVars.dialogTextColor,"onUpdate:modelValue":[e[3]||(e[3]=u=>l.cssVars.dialogTextColor=u),a.applyPreview],"supports-alpha":!1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ya,[e[62]||(e[62]=s("label",null,"ìºë¦­í„° ì´ë¦„ ê¸€ê¼´ í¬ê¸°",-1)),d(n,{modelValue:l.cssVars.dialogNameFontSize,"onUpdate:modelValue":[e[4]||(e[4]=u=>l.cssVars.dialogNameFontSize=u),a.applyPreview],units:["px","rem","em"],step:.1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Ca,[e[63]||(e[63]=s("label",null,"ëŒ€ì‚¬ ê¸€ê¼´ í¬ê¸°",-1)),d(n,{modelValue:l.cssVars.dialogTextFontSize,"onUpdate:modelValue":[e[5]||(e[5]=u=>l.cssVars.dialogTextFontSize=u),a.applyPreview],units:["px","rem","em"],step:.1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Va,[e[64]||(e[64]=s("label",null,"íŒ¨ë”©",-1)),d(n,{modelValue:l.cssVars.dialogPadding,"onUpdate:modelValue":[e[6]||(e[6]=u=>l.cssVars.dialogPadding=u),a.applyPreview],units:["px","rem","em"],step:.1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Sa,[e[65]||(e[65]=s("label",null,"ëª¨ì„œë¦¬ ë°˜ê²½",-1)),d(n,{modelValue:l.cssVars.dialogBorderRadius,"onUpdate:modelValue":[e[7]||(e[7]=u=>l.cssVars.dialogBorderRadius=u),a.applyPreview],units:["px","rem","%"],step:1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ka,[e[66]||(e[66]=s("label",null,"ìµœì†Œ ë†’ì´",-1)),d(n,{modelValue:l.cssVars.dialogMinHeight,"onUpdate:modelValue":[e[8]||(e[8]=u=>l.cssVars.dialogMinHeight=u),a.applyPreview],units:["px","rem"],step:1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",xa,[e[67]||(e[67]=s("label",null,"ì¤„ ê°„ê²©",-1)),m(s("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=u=>l.cssVars.dialogLineHeight=u),onInput:e[10]||(e[10]=(...u)=>a.applyPreview&&a.applyPreview(...u)),placeholder:"1.8"},null,544),[[b,l.cssVars.dialogLineHeight]])])])):g("",!0),l.currentSection==="character"?(c(),p("div",wa,[e[75]||(e[75]=s("h4",null,"ìºë¦­í„° í‘œì‹œ (CharacterDisplay)",-1)),s("div",Ua,[e[69]||(e[69]=s("label",null,"ìºë¦­í„° ì´ë¯¸ì§€ ìµœëŒ€ ë†’ì´",-1)),d(n,{modelValue:l.cssVars.characterMaxHeight,"onUpdate:modelValue":[e[11]||(e[11]=u=>l.cssVars.characterMaxHeight=u),a.applyPreview],units:["vh","px","%"],step:1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Ba,[e[70]||(e[70]=s("label",null,"ìºë¦­í„° ì´ë¯¸ì§€ ìµœëŒ€ ë„ˆë¹„",-1)),d(n,{modelValue:l.cssVars.characterMaxWidth,"onUpdate:modelValue":[e[12]||(e[12]=u=>l.cssVars.characterMaxWidth=u),a.applyPreview],units:["px","%","vw"],step:1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Da,[e[71]||(e[71]=s("label",null,"ìºë¦­í„° íˆ¬ëª…ë„ (ë¹„í™œì„±)",-1)),m(s("input",{type:"range","onUpdate:modelValue":e[13]||(e[13]=u=>l.cssVars.characterInactiveOpacity=u),onInput:e[14]||(e[14]=(...u)=>a.applyPreview&&a.applyPreview(...u)),min:"0",max:"1",step:"0.05"},null,544),[[b,l.cssVars.characterInactiveOpacity]]),s("span",null,y(l.cssVars.characterInactiveOpacity),1)]),s("div",Ia,[e[72]||(e[72]=s("label",null,"ëª¨ì„œë¦¬ ë°˜ê²½",-1)),d(n,{modelValue:l.cssVars.characterBorderRadius,"onUpdate:modelValue":[e[15]||(e[15]=u=>l.cssVars.characterBorderRadius=u),a.applyPreview],units:["px","rem","%"],step:1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Ta,[e[73]||(e[73]=s("label",null,"í…Œë‘ë¦¬ ë‘ê»˜",-1)),d(n,{modelValue:l.cssVars.characterBorderWidth,"onUpdate:modelValue":[e[16]||(e[16]=u=>l.cssVars.characterBorderWidth=u),a.applyPreview],units:["px"],step:1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",_a,[e[74]||(e[74]=s("label",null,"ìºë¦­í„° ì „í™˜ ì‹œê°„",-1)),d(n,{modelValue:l.cssVars.characterTransition,"onUpdate:modelValue":[e[17]||(e[17]=u=>l.cssVars.characterTransition=u),a.applyPreview],units:["s","ms"],step:.1},null,8,["modelValue","onUpdate:modelValue"])])])):g("",!0),l.currentSection==="controls"?(c(),p("div",za,[e[87]||(e[87]=s("h4",null,"ìž¬ìƒ ì»¨íŠ¸ë¡¤ (PlaybackControls)",-1)),s("div",ja,[e[76]||(e[76]=s("label",null,"ì»¨íŠ¸ë¡¤ ë°°ê²½ìƒ‰",-1)),d(v,{modelValue:l.cssVars.controlsBackground,"onUpdate:modelValue":[e[18]||(e[18]=u=>l.cssVars.controlsBackground=u),a.applyPreview],"supports-alpha":!0},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Pa,[e[77]||(e[77]=s("label",null,"ì»¨íŠ¸ë¡¤ í…Œë‘ë¦¬ ìƒ‰ìƒ",-1)),d(v,{modelValue:l.cssVars.controlsBorderColor,"onUpdate:modelValue":[e[19]||(e[19]=u=>l.cssVars.controlsBorderColor=u),a.applyPreview],"supports-alpha":!0},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Ea,[e[78]||(e[78]=s("label",null,"ë²„íŠ¼ ë°°ê²½ìƒ‰",-1)),d(v,{modelValue:l.cssVars.controlsButtonBg,"onUpdate:modelValue":[e[20]||(e[20]=u=>l.cssVars.controlsButtonBg=u),a.applyPreview],"supports-alpha":!0},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Ra,[e[79]||(e[79]=s("label",null,"ë²„íŠ¼ í˜¸ë²„ ë°°ê²½ìƒ‰",-1)),d(v,{modelValue:l.cssVars.controlsButtonHoverBg,"onUpdate:modelValue":[e[21]||(e[21]=u=>l.cssVars.controlsButtonHoverBg=u),a.applyPreview],"supports-alpha":!0},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Fa,[e[80]||(e[80]=s("label",null,"ë²„íŠ¼ ì•„ì´ì½˜ ìƒ‰ìƒ",-1)),d(v,{modelValue:l.cssVars.controlsButtonColor,"onUpdate:modelValue":[e[22]||(e[22]=u=>l.cssVars.controlsButtonColor=u),a.applyPreview],"supports-alpha":!1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Oa,[e[81]||(e[81]=s("label",null,"ë²„íŠ¼ í˜¸ë²„ ì•„ì´ì½˜ ìƒ‰ìƒ",-1)),d(v,{modelValue:l.cssVars.controlsButtonHoverColor,"onUpdate:modelValue":[e[23]||(e[23]=u=>l.cssVars.controlsButtonHoverColor=u),a.applyPreview],"supports-alpha":!1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Na,[e[82]||(e[82]=s("label",null,"ì§„í–‰ ë°” ìƒ‰ìƒ",-1)),d(v,{modelValue:l.cssVars.controlsProgressColor,"onUpdate:modelValue":[e[24]||(e[24]=u=>l.cssVars.controlsProgressColor=u),a.applyPreview],"supports-alpha":!1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",La,[e[83]||(e[83]=s("label",null,"ì§„í–‰ ë°” ë°°ê²½ìƒ‰",-1)),d(v,{modelValue:l.cssVars.controlsProgressBg,"onUpdate:modelValue":[e[25]||(e[25]=u=>l.cssVars.controlsProgressBg=u),a.applyPreview],"supports-alpha":!0},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Aa,[e[84]||(e[84]=s("label",null,"ë²„íŠ¼ í¬ê¸°",-1)),d(n,{modelValue:l.cssVars.controlsButtonSize,"onUpdate:modelValue":[e[26]||(e[26]=u=>l.cssVars.controlsButtonSize=u),a.applyPreview],units:["px","rem"],step:1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Ma,[e[85]||(e[85]=s("label",null,"ì£¼ ë²„íŠ¼ í¬ê¸°",-1)),d(n,{modelValue:l.cssVars.controlsPrimaryButtonSize,"onUpdate:modelValue":[e[27]||(e[27]=u=>l.cssVars.controlsPrimaryButtonSize=u),a.applyPreview],units:["px","rem"],step:1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Ha,[e[86]||(e[86]=s("label",null,"ë²„íŠ¼ ëª¨ì„œë¦¬ ë°˜ê²½",-1)),d(n,{modelValue:l.cssVars.controlsBorderRadius,"onUpdate:modelValue":[e[28]||(e[28]=u=>l.cssVars.controlsBorderRadius=u),a.applyPreview],units:["px","rem","%"],step:1},null,8,["modelValue","onUpdate:modelValue"])])])):g("",!0),l.currentSection==="overlay"?(c(),p("div",Ja,[e[95]||(e[95]=s("h4",null,"ì˜¤ë²„ë ˆì´ (ë‹¤ì´ìŠ¤, ì½¤ë³´, ì”¬ ì„¤ëª…)",-1)),s("div",Ga,[e[88]||(e[88]=s("label",null,"ì˜¤ë²„ë ˆì´ ë°°ê²½ìƒ‰",-1)),d(v,{modelValue:l.cssVars.overlayBackground,"onUpdate:modelValue":[e[29]||(e[29]=u=>l.cssVars.overlayBackground=u),a.applyPreview],"supports-alpha":!0},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Wa,[e[89]||(e[89]=s("label",null,"ì˜¤ë²„ë ˆì´ ë¸”ëŸ¬",-1)),d(n,{modelValue:l.cssVars.overlayBlur,"onUpdate:modelValue":[e[30]||(e[30]=u=>l.cssVars.overlayBlur=u),a.applyPreview],units:["px"],step:1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Xa,[e[90]||(e[90]=s("label",null,"ì˜¤ë²„ë ˆì´ ì½˜í…ì¸  ë°°ê²½",-1)),d(v,{modelValue:l.cssVars.overlayContentBackground,"onUpdate:modelValue":[e[31]||(e[31]=u=>l.cssVars.overlayContentBackground=u),a.applyPreview],"supports-alpha":!0},null,8,["modelValue","onUpdate:modelValue"])]),s("div",qa,[e[91]||(e[91]=s("label",null,"ì˜¤ë²„ë ˆì´ í…ìŠ¤íŠ¸ ìƒ‰ìƒ",-1)),d(v,{modelValue:l.cssVars.overlayTextColor,"onUpdate:modelValue":[e[32]||(e[32]=u=>l.cssVars.overlayTextColor=u),a.applyPreview],"supports-alpha":!1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Ka,[e[92]||(e[92]=s("label",null,"ì½˜í…ì¸  ëª¨ì„œë¦¬ ë°˜ê²½",-1)),d(n,{modelValue:l.cssVars.overlayBorderRadius,"onUpdate:modelValue":[e[33]||(e[33]=u=>l.cssVars.overlayBorderRadius=u),a.applyPreview],units:["px","rem"],step:1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Ya,[e[93]||(e[93]=s("label",null,"ì½˜í…ì¸  íŒ¨ë”©",-1)),d(n,{modelValue:l.cssVars.overlayPadding,"onUpdate:modelValue":[e[34]||(e[34]=u=>l.cssVars.overlayPadding=u),a.applyPreview],units:["px","rem"],step:1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Qa,[e[94]||(e[94]=s("label",null,"ì½˜í…ì¸  ìµœëŒ€ ë„ˆë¹„",-1)),d(n,{modelValue:l.cssVars.overlayMaxWidth,"onUpdate:modelValue":[e[35]||(e[35]=u=>l.cssVars.overlayMaxWidth=u),a.applyPreview],units:["px","%","vw"],step:10},null,8,["modelValue","onUpdate:modelValue"])])])):g("",!0),l.currentSection==="global"?(c(),p("div",Za,[e[104]||(e[104]=s("h4",null,"ì „ì—­ ìŠ¤íƒ€ì¼",-1)),s("div",$a,[e[96]||(e[96]=s("label",null,"ë©”ì¸ ë°°ê²½ìƒ‰",-1)),d(v,{modelValue:l.cssVars.globalBackground,"onUpdate:modelValue":[e[36]||(e[36]=u=>l.cssVars.globalBackground=u),a.applyPreview],"supports-alpha":!1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ei,[e[97]||(e[97]=s("label",null,"ê¸°ë³¸ í…ìŠ¤íŠ¸ ìƒ‰ìƒ",-1)),d(v,{modelValue:l.cssVars.globalTextColor,"onUpdate:modelValue":[e[37]||(e[37]=u=>l.cssVars.globalTextColor=u),a.applyPreview],"supports-alpha":!1},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ti,[e[99]||(e[99]=s("label",null,"í°íŠ¸ íŒ¨ë°€ë¦¬",-1)),m(s("select",{"onUpdate:modelValue":e[38]||(e[38]=u=>l.cssVars.globalFontFamily=u),onChange:e[39]||(e[39]=(...u)=>a.applyPreview&&a.applyPreview(...u))},[...e[98]||(e[98]=[s("option",{value:"var(--font-pretendard)"},"Pretendard (ê¸°ë³¸)",-1),s("option",{value:"var(--font-nanum-square)"},"ë‚˜ëˆ”ìŠ¤í€˜ì–´",-1),s("option",{value:"var(--font-nanum-myeongjo)"},"ë‚˜ëˆ”ëª…ì¡°",-1),s("option",{value:"var(--font-noto-serif)"},"Noto Serif KR",-1)])],544),[[z,l.cssVars.globalFontFamily]])]),s("div",si,[e[100]||(e[100]=s("label",null,"ê¸°ë³¸ ì¤„ ê°„ê²©",-1)),m(s("input",{type:"text","onUpdate:modelValue":e[40]||(e[40]=u=>l.cssVars.globalLineHeight=u),onInput:e[41]||(e[41]=(...u)=>a.applyPreview&&a.applyPreview(...u)),placeholder:"1.5"},null,544),[[b,l.cssVars.globalLineHeight]])]),s("div",li,[e[101]||(e[101]=s("label",null,"ë°°ê²½ ì´ë¯¸ì§€ URL",-1)),m(s("input",{type:"text","onUpdate:modelValue":e[42]||(e[42]=u=>l.cssVars.globalBackgroundImage=u),onInput:e[43]||(e[43]=(...u)=>a.applyPreview&&a.applyPreview(...u)),placeholder:"url(https://...)"},null,544),[[b,l.cssVars.globalBackgroundImage]])]),s("div",oi,[e[103]||(e[103]=s("label",null,"ë°°ê²½ ì´ë¯¸ì§€ í¬ê¸°",-1)),m(s("select",{"onUpdate:modelValue":e[44]||(e[44]=u=>l.cssVars.globalBackgroundSize=u),onChange:e[45]||(e[45]=(...u)=>a.applyPreview&&a.applyPreview(...u))},[...e[102]||(e[102]=[s("option",{value:"cover"},"ë®ê¸° (Cover)",-1),s("option",{value:"contain"},"ë§žì¶”ê¸° (Contain)",-1),s("option",{value:"auto"},"ìžë™ (Auto)",-1),s("option",{value:"100% 100%"},"ëŠ˜ì´ê¸° (100% 100%)",-1)])],544),[[z,l.cssVars.globalBackgroundSize]])])])):g("",!0),l.currentSection==="code"?(c(),p("div",ai,[e[109]||(e[109]=s("h4",null,"CSS ì½”ë“œ ì§ì ‘ íŽ¸ì§‘",-1)),s("div",ii,[s("div",ri,[e[107]||(e[107]=s("span",{class:"code-label"},"ìƒì„±ëœ CSS ì½”ë“œ",-1)),s("div",ni,[s("button",{onClick:e[46]||(e[46]=(...u)=>a.syncFromCode&&a.syncFromCode(...u)),class:"btn-sync",title:"ì½”ë“œì—ì„œ UIë¡œ ë™ê¸°í™”"},[d(r,{emoji:"ðŸ”„",size:14}),e[105]||(e[105]=f(" ë™ê¸°í™” ",-1))]),s("button",{onClick:e[47]||(e[47]=(...u)=>a.copyCodeToClipboard&&a.copyCodeToClipboard(...u)),class:"btn-copy-code",title:"ì½”ë“œ ë³µì‚¬"},[d(r,{emoji:"ðŸ“‹",size:14}),e[106]||(e[106]=f(" ë³µì‚¬ ",-1))])])]),m(s("textarea",{"onUpdate:modelValue":e[48]||(e[48]=u=>l.cssCodeText=u),class:"css-textarea",spellcheck:"false",onInput:e[49]||(e[49]=(...u)=>a.onCodeEdit&&a.onCodeEdit(...u))},null,544),[[b,l.cssCodeText]]),s("p",di,[d(r,{emoji:"ðŸ’¡",size:14}),e[108]||(e[108]=f(" ì´ ì½”ë“œë¥¼ ì§ì ‘ ìˆ˜ì •í•œ í›„ 'ë™ê¸°í™”' ë²„íŠ¼ì„ ëˆŒëŸ¬ UIì— ë°˜ì˜í•˜ì„¸ìš”. ",-1))])])])):g("",!0)])]),s("div",ui,[s("button",{onClick:e[50]||(e[50]=(...u)=>a.resetToDefault&&a.resetToDefault(...u)),class:"btn-reset"},[d(r,{emoji:"ðŸ”„",size:16}),e[110]||(e[110]=f(" ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™” ",-1))]),s("button",{onClick:e[51]||(e[51]=(...u)=>a.exportCSS&&a.exportCSS(...u)),class:"btn-export"},[d(r,{emoji:"ðŸ’¾",size:16}),e[111]||(e[111]=f(" CSS ë‚´ë³´ë‚´ê¸° ",-1))]),s("button",{onClick:e[52]||(e[52]=(...u)=>a.importCSS&&a.importCSS(...u)),class:"btn-import"},[d(r,{emoji:"ðŸ“‚",size:16}),e[112]||(e[112]=f(" CSS ë¶ˆëŸ¬ì˜¤ê¸° ",-1))]),s("button",{onClick:e[53]||(e[53]=(...u)=>a.applyAndSave&&a.applyAndSave(...u)),class:"btn-save"},[d(r,{emoji:"âœ…",size:16}),e[113]||(e[113]=f(" ì ìš© ë° ì €ìž¥ ",-1))])])]),s("input",{ref:"fileInput",type:"file",accept:".css",style:{display:"none"},onChange:e[54]||(e[54]=(...u)=>a.handleFileImport&&a.handleFileImport(...u))},null,544)])}const pi=D(oa,[["render",ci],["__scopeId","data-v-7e778c86"]]),hi={name:"EditorView",components:{StepEffectsEditor:ge,StepInfoEditor:el,CharacterBulkEditor:Ol,ImageBulkEditor:Lo,CustomCSSEditor:pi,DialogBox:N,CharacterDisplay:O,PlaybackControls:F},setup(){return{logStore:P()}},data(){return{activeTab:"info",selectedStepIndex:null,showEmbedModal:!1,embedJsonUrl:"https://ohohod.github.io/embeded-test.json",embedAutoplay:!1,embedCopied:!1,embedPreviewLoaded:!1}},computed:{allSteps(){var i;const t=[];return(((i=this.logStore.vnData)==null?void 0:i.scenes)||[]).forEach(h=>{t.push(...h.steps||[])}),t},totalSteps(){return this.allSteps.length},selectedStep(){return this.selectedStepIndex===null?null:this.allSteps[this.selectedStepIndex]||null},selectedStepEffects(){var t;return((t=this.selectedStep)==null?void 0:t.effects)||null},generatedEmbedCode(){if(!this.embedJsonUrl)return"<!-- JSON URLì„ ìž…ë ¥í•˜ì„¸ìš” -->";const t=window.location.origin,e="/vnlog/",i=this.embedAutoplay?"&autoplay=true":"";return`<iframe src="${`${t}${e}embed?json=${encodeURIComponent(this.embedJsonUrl)}${i}`}" width="800" height="600" frameborder="0" allowfullscreen></iframe>`},embedPreviewUrl(){if(!this.embedJsonUrl)return"";const t=window.location.origin,e="/vnlog/",i=this.embedAutoplay?"&autoplay=true":"";return`${t}${e}embed?json=${encodeURIComponent(this.embedJsonUrl)}${i}`}},methods:{selectStep(t){this.selectedStepIndex=t},goBack(){this.$router.push("/player")},saveAndPlay(){this.saveToLocalStorage(),this.selectedStepIndex!==null&&sessionStorage.setItem("player-target-step",this.selectedStepIndex+1),this.$router.push("/player")},showEmbedCodeModal(){this.showEmbedModal=!0,this.embedCopied=!1,this.embedPreviewLoaded=!1},closeEmbedModal(){this.showEmbedModal=!1},async copyEmbedCode(){if(!this.embedJsonUrl){alert("JSON URLì„ ë¨¼ì € ìž…ë ¥í•˜ì„¸ìš”.");return}try{await navigator.clipboard.writeText(this.generatedEmbedCode),this.embedCopied=!0,setTimeout(()=>{this.embedCopied=!1},2e3)}catch(t){console.error("í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:",t),alert("í´ë¦½ë³´ë“œ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},exportJSON(){const t=this.logStore.vnData;if(!t){alert("ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");return}const e=localStorage.getItem("vnlog-theme-settings");let i=null;if(e)try{i=JSON.parse(e)}catch(v){console.warn("í…Œë§ˆ ì„¤ì • íŒŒì‹± ì‹¤íŒ¨:",v)}const h={vnData:t,theme:i,exportedAt:new Date().toISOString(),version:"1.0.0"},l=JSON.stringify(h,null,2),a=new Blob([l],{type:"application/json"}),r=URL.createObjectURL(a),o=document.createElement("a");o.href=r,o.download=`${t.title||"vnlog"}_edited.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r),console.log("[EditorView] JSON ë‚´ë³´ë‚´ê¸° ì™„ë£Œ (customCSS í¬í•¨:",!!t.customCSS,")")},saveToLocalStorage(){try{const t=this.logStore.vnData;localStorage.setItem("vnlog-edited-data",JSON.stringify(t))}catch(t){console.error("ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì €ìž¥ ì‹¤íŒ¨:",t)}},handleSaveStepInfo({id:t,updates:e}){const i=this.allSteps.find(h=>h.id===t);if(!i){alert("ìŠ¤í…ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}i.sceneNumber=e.sceneNumber,i.type=e.type,i.character.name=e.character.name,i.character.color=e.character.color,i.character.avatarUrl=e.character.avatarUrl,i.text=e.text,i.isSceneDescription=e.isSceneDescription,i.sceneTitle=e.sceneTitle,i.scenePCs=e.scenePCs,i.sceneDescription=e.sceneDescription,i.illustrations=JSON.parse(JSON.stringify(e.illustrations||[])),i.diceRolls=JSON.parse(JSON.stringify(e.diceRolls||[])),i.statusChanges=JSON.parse(JSON.stringify(e.statusChanges||[])),i.dxCombos=JSON.parse(JSON.stringify(e.dxCombos||[])),i.effects=JSON.parse(JSON.stringify(e.effects||{})),i.hasDice=e.hasDice,i.hasStatusChange=e.hasStatusChange,i.hasDXCombo=e.hasDXCombo,i.hasIllustration=e.hasIllustration,this.saveToLocalStorage(),alert("ìŠ¤í… ì •ë³´ê°€ ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤.")},handleDeleteStep(t){const e=this.logStore.vnData.scenes;let i=!1;for(let l=0;l<e.length;l++){const a=e[l],r=a.steps.findIndex(o=>o.id===t);if(r!==-1){a.steps.splice(r,1),i=!0;break}}if(!i){alert("ìŠ¤í…ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}const h=this.allSteps.length;this.selectedStepIndex>=h&&(this.selectedStepIndex=h>0?h-1:null),this.saveToLocalStorage(),alert("ìŠ¤í…ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")},handleDuplicateStep(t){const e=this.logStore.vnData.scenes;let i=!1,h=0;const a=(Math.max(...this.allSteps.map(r=>parseInt(r.id)||0))+1).toString();for(let r=0;r<e.length;r++){const o=e[r],v=o.steps.findIndex(n=>n.id===t);if(v!==-1){const n=o.steps[v],u=JSON.parse(JSON.stringify(n));u.id=a,o.steps.splice(v+1,0,u);for(let S=0;S<r;S++)h+=e[S].steps.length;h+=v+1,i=!0;break}h+=o.steps.length}if(!i){alert("ìŠ¤í…ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}this.selectedStepIndex=h,this.saveToLocalStorage(),alert(`ìŠ¤í…ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. (ìƒˆ ID: ${a})`)},handleApplyEffects({startStep:t,endStep:e,effects:i}){const h=this.allSteps;for(let l=t-1;l<e&&l<h.length;l++){const a=h[l];a.effects&&(a.effects.sfx=i.sfx,a.effects.bgm=i.bgm,a.effects.background=i.background,a.effects.backgroundOpacity=i.backgroundOpacity)}this.saveToLocalStorage(),alert(`ìŠ¤í… ${t}~${e}ì— íš¨ê³¼ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.`)},handleRemoveEffects({startStep:t,endStep:e}){const i=this.allSteps;for(let h=t-1;h<e&&h<i.length;h++){const l=i[h];l.effects&&(l.effects.sfx=null,l.effects.bgm=null,l.effects.background=null)}this.saveToLocalStorage(),alert(`ìŠ¤í… ${t}~${e}ì˜ íš¨ê³¼ê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.`)},async handleBulkUpdateCharacter({oldName:t,newName:e,newColor:i,onProgress:h,onComplete:l}){let a=0,r=0;this.allSteps.forEach(o=>{o.character&&o.character.name===t&&r++});for(let o=0;o<this.allSteps.length;o++){const v=this.allSteps[o];v.character&&v.character.name===t&&(v.character.name=e,v.character.color=i,a++,h&&h(a,r),a%10===0&&await new Promise(n=>setTimeout(n,10)))}this.saveToLocalStorage(),l&&await l({success:!0,updatedCount:a,message:`"${t}" â†’ "${e}"
${a}ê°œ ìŠ¤í…ì˜ ìºë¦­í„° ì •ë³´ê°€ ì¼ê´„ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`})},async handleBulkUpdateImage({oldUrl:t,newUrl:e,onProgress:i,onComplete:h}){var o,v;let l=0,a=0;const r=this.logStore.vnData;if(r.scenes&&r.scenes.forEach(n=>{var u;(u=n.steps)==null||u.forEach(S=>{var V,C;((V=S.character)==null?void 0:V.avatarUrl)===t&&a++,((C=S.effects)==null?void 0:C.background)===t&&a++,S.illustrations&&Array.isArray(S.illustrations)&&S.illustrations.forEach(B=>{B.url===t&&a++})})}),r.handouts&&r.handouts.forEach(n=>{n.imageUrl===t&&a++}),r.scenes)for(let n=0;n<r.scenes.length;n++){const u=r.scenes[n];if(u.steps)for(let S=0;S<u.steps.length;S++){const V=u.steps[S];if(((o=V.character)==null?void 0:o.avatarUrl)===t&&(V.character.avatarUrl=e,l++,i&&i(l,a)),((v=V.effects)==null?void 0:v.background)===t&&(V.effects.background=e,l++,i&&i(l,a)),V.illustrations&&Array.isArray(V.illustrations))for(let C=0;C<V.illustrations.length;C++){const B=V.illustrations[C];B.url===t&&(B.url=e,l++,i&&i(l,a))}l%10===0&&await new Promise(C=>setTimeout(C,10))}}if(r.characters)for(const n in r.characters){const u=r.characters[n];u.avatarUrl===t&&(u.avatarUrl=e)}if(r.handouts)for(let n=0;n<r.handouts.length;n++){const u=r.handouts[n];u.imageUrl===t&&(u.imageUrl=e,l++,i&&i(l,a),l%10===0&&await new Promise(S=>setTimeout(S,10)))}this.saveToLocalStorage(),h&&await h({success:!0,updatedCount:l,message:`ì´ë¯¸ì§€ URLì´ ì¼ê´„ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.
ì´ ${l}ê°œ í•­ëª©ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.`})},hasEffects(t){return t.effects&&(t.effects.sfx||t.effects.bgm||t.effects.background)},handleSaveCustomCSS(t){this.logStore.vnData||(this.logStore.vnData={}),this.logStore.vnData.customCSS=t,this.saveToLocalStorage(),console.log("[EditorView] customCSS ì €ìž¥ ì™„ë£Œ:",t)},truncateText(t,e){return t?t.length>e?t.substring(0,e)+"...":t:""},scrollToTargetStep(){const t=sessionStorage.getItem("editor-target-step");if(t){const e=parseInt(t,10);if(e>=1&&e<=this.totalSteps){const i=e-1;this.$nextTick(()=>{this.selectStep(i);const h=document.querySelectorAll(".step-item");h[i]&&h[i].scrollIntoView({behavior:"smooth",block:"center"})})}sessionStorage.removeItem("editor-target-step")}}},mounted(){if(!this.logStore.vnData){this.$router.push("/");return}this.scrollToTargetStep()},beforeUnmount(){},watch:{activeTab(t,e){e==="css"&&t!=="css"&&(this.cssPreviewAutoPlay=!1)}}},mi={class:"editor-view"},fi={class:"editor-container"},gi={class:"editor-header"},vi={class:"header-actions"},bi={class:"modal-header"},yi={class:"modal-body"},Ci={class:"embed-step"},Vi={class:"hosting-guide"},Si={class:"hosting-option recommended"},ki={class:"hosting-option tip"},xi={class:"hosting-option warning"},wi={class:"embed-step"},Ui={class:"embed-step"},Bi={class:"embed-options"},Di={class:"option-item"},Ii={class:"embed-step"},Ti={class:"code-preview"},_i={key:0,class:"embed-preview-section"},zi={class:"embed-preview-frame"},ji={key:0,class:"preview-loading"},Pi=["src"],Ei={class:"help-text-small"},Ri={key:0,class:"help-text-small"},Fi={class:"editor-content"},Oi={key:0,class:"steps-list"},Ni={class:"list-header"},Li={class:"list-body"},Ai=["onClick"],Mi={class:"step-number"},Hi={class:"step-info"},Ji={class:"step-character"},Gi={class:"step-text"},Wi={key:0,class:"step-effects-tags"},Xi={key:0,class:"effect-tag sfx"},qi={key:1,class:"effect-tag bgm"},Ki={key:2,class:"effect-tag bg"},Yi={class:"editor-panel"},Qi={class:"tab-header"},Zi={class:"tab-content"},$i={key:0,class:"tab-pane"},er={key:1,class:"tab-pane"},tr={key:2,class:"tab-pane"},sr={key:3,class:"tab-pane"},lr={key:4,class:"tab-pane"};function or(t,e,i,h,l,a){var V;const r=x("EmojiToIcon"),o=x("StepInfoEditor"),v=x("StepEffectsEditor"),n=x("CharacterBulkEditor"),u=x("ImageBulkEditor"),S=x("CustomCSSEditor");return c(),p("div",mi,[s("div",fi,[s("header",gi,[s("button",{onClick:e[0]||(e[0]=(...C)=>a.goBack&&a.goBack(...C)),class:"back-button"},[d(r,{emoji:"â¬…ï¸",size:20})]),s("h2",null,[d(r,{emoji:"âœï¸",size:24}),e[21]||(e[21]=f(" ë¡œê·¸ íŽ¸ì§‘ê¸° ",-1))]),s("div",vi,[s("button",{onClick:e[1]||(e[1]=(...C)=>a.showEmbedCodeModal&&a.showEmbedCodeModal(...C)),class:"embed-button"},[d(r,{emoji:"ðŸ”—",size:18}),e[22]||(e[22]=f(" ìž„ë² ë“œ ì½”ë“œ ",-1))]),s("button",{onClick:e[2]||(e[2]=(...C)=>a.exportJSON&&a.exportJSON(...C)),class:"export-button"},[d(r,{emoji:"ðŸ“¤",size:18}),e[23]||(e[23]=f(" JSON ë‚´ë³´ë‚´ê¸° ",-1))]),s("button",{onClick:e[3]||(e[3]=(...C)=>a.saveAndPlay&&a.saveAndPlay(...C)),class:"save-button"},[d(r,{emoji:"â–¶ï¸",size:18}),e[24]||(e[24]=f(" ìž¬ìƒí•˜ê¸° ",-1))])])]),l.showEmbedModal?(c(),p("div",{key:0,class:"modal-overlay",onClick:e[11]||(e[11]=(...C)=>a.closeEmbedModal&&a.closeEmbedModal(...C))},[s("div",{class:"modal-content embed-modal",onClick:e[10]||(e[10]=E(()=>{},["stop"]))},[s("div",bi,[s("h3",null,[d(r,{emoji:"ðŸ”—",size:20}),e[25]||(e[25]=f(" ìž„ë² ë“œ ì½”ë“œ ìƒì„± ",-1))]),s("button",{onClick:e[4]||(e[4]=(...C)=>a.closeEmbedModal&&a.closeEmbedModal(...C)),class:"close-button"},[d(r,{emoji:"âœ–ï¸",size:18})])]),s("div",yi,[s("div",Ci,[e[33]||(e[33]=s("h4",null,"1ë‹¨ê³„: JSON íŒŒì¼ í˜¸ìŠ¤íŒ…",-1)),e[34]||(e[34]=s("p",{class:"help-text"}," ë¨¼ì € JSONì„ ë‚´ë³´ë‚´ê¸°í•˜ì—¬ ì›¹ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ê³³ì— ì—…ë¡œë“œí•˜ì„¸ìš”. ",-1)),s("div",Vi,[s("div",Si,[d(r,{emoji:"âœ…",size:14}),e[26]||(e[26]=s("strong",null,"ì¶”ì²œ:",-1)),e[27]||(e[27]=f(" GitHub Gist, GitHub Pages, JSFiddle ",-1))]),s("div",ki,[d(r,{emoji:"ðŸ’¡",size:14}),e[28]||(e[28]=s("strong",null,"íŒ:",-1)),e[29]||(e[29]=f(" DropboxëŠ” dl=0ì„ dl=1ë¡œ, ì¹´ì¹´ì˜¤ ë¸”ë¡œê·¸ëŠ” attach=1ì„ attach=0ìœ¼ë¡œ ë³€ê²½ (ìžë™ ì²˜ë¦¬ë¨) ",-1))]),s("div",xi,[d(r,{emoji:"âš ï¸",size:14}),e[30]||(e[30]=s("strong",null,"ìž‘ë™ ì•ˆ í•¨:",-1)),e[31]||(e[31]=f(" Google Drive, OneDrive (CORS/Referer ì œí•œ) ",-1))])]),s("button",{onClick:e[5]||(e[5]=(...C)=>a.exportJSON&&a.exportJSON(...C)),class:"export-link-button"},[d(r,{emoji:"ðŸ“¤",size:16}),e[32]||(e[32]=f(" JSON ë‚´ë³´ë‚´ê¸° ",-1))])]),s("div",wi,[e[35]||(e[35]=s("h4",null,"2ë‹¨ê³„: JSON URL ìž…ë ¥",-1)),m(s("input",{"onUpdate:modelValue":e[6]||(e[6]=C=>l.embedJsonUrl=C),type:"url",placeholder:"https://ohohod.github.io/embeded-test.json",class:"embed-url-input"},null,512),[[b,l.embedJsonUrl]])]),s("div",Ui,[e[37]||(e[37]=s("h4",null,"3ë‹¨ê³„: ì˜µì…˜ ì„¤ì •",-1)),s("div",Bi,[s("label",Di,[m(s("input",{"onUpdate:modelValue":e[7]||(e[7]=C=>l.embedAutoplay=C),type:"checkbox"},null,512),[[j,l.embedAutoplay]]),e[36]||(e[36]=s("span",null,"ìžë™ ìž¬ìƒ",-1))])])]),s("div",Ii,[e[38]||(e[38]=s("h4",null,"4ë‹¨ê³„: ìž„ë² ë“œ ì½”ë“œ ë³µì‚¬",-1)),s("div",Ti,[s("pre",null,[s("code",null,y(a.generatedEmbedCode),1)])]),s("button",{onClick:e[8]||(e[8]=(...C)=>a.copyEmbedCode&&a.copyEmbedCode(...C)),class:w(["copy-button",{copied:l.embedCopied}])},[d(r,{emoji:l.embedCopied?"âœ…":"ðŸ“‹",size:16},null,8,["emoji"]),f(" "+y(l.embedCopied?"ë³µì‚¬ ì™„ë£Œ!":"ì½”ë“œ ë³µì‚¬"),1)],2)]),l.embedJsonUrl?(c(),p("div",_i,[s("h4",null,[d(r,{emoji:"ðŸ‘ï¸",size:18}),e[39]||(e[39]=f(" ë¯¸ë¦¬ë³´ê¸° ",-1))]),e[43]||(e[43]=s("p",{class:"help-text"},"ì‹¤ì œ ìž„ë² ë“œ í”Œë ˆì´ì–´ê°€ ì´ë ‡ê²Œ í‘œì‹œë©ë‹ˆë‹¤:",-1)),s("div",zi,[l.embedPreviewLoaded?g("",!0):(c(),p("div",ji,[...e[40]||(e[40]=[s("div",{class:"loading-spinner"},null,-1),s("span",null,"ë¡œë”© ì¤‘...",-1)])])),s("iframe",{src:a.embedPreviewUrl,width:"100%",height:"100%",frameborder:"0",allowfullscreen:"",sandbox:"allow-scripts allow-same-origin allow-popups allow-forms",class:"preview-iframe",onLoad:e[9]||(e[9]=C=>l.embedPreviewLoaded=!0)},null,40,Pi)]),s("p",Ei,[d(r,{emoji:"ðŸ’¡",size:14}),e[41]||(e[41]=f(" ë¯¸ë¦¬ë³´ê¸°ê°€ í‘œì‹œë˜ì§€ ì•Šìœ¼ë©´ JSON URLì´ CORSë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ",-1))]),l.embedPreviewLoaded?(c(),p("p",Ri,[d(r,{emoji:"âš ï¸",size:14}),e[42]||(e[42]=f(" ìž„ë² ë“œ í”Œë ˆì´ì–´ëŠ” íƒ€ì‚¬ ì½˜í…ì¸ ë¥¼ í¬í•¨í•  ìˆ˜ ìžˆìœ¼ë©°, í•´ë‹¹ ì½˜í…ì¸ ì˜ ë²•ì  ì±…ìž„ì€ í•´ë‹¹ ì½˜í…ì¸  ì œê³µìžì—ê²Œ ìžˆìŠµë‹ˆë‹¤. ",-1))])):g("",!0)])):g("",!0)])])])):g("",!0),s("div",Fi,[l.activeTab!=="css"?(c(),p("div",Oi,[s("div",Ni,[s("h3",null,"ìŠ¤í… ëª©ë¡ ("+y(a.totalSteps)+"ê°œ)",1)]),s("div",Li,[(c(!0),p(k,null,U(a.allSteps,(C,B)=>(c(),p("div",{key:C.id,class:w(["step-item",{"has-effects":a.hasEffects(C),selected:l.selectedStepIndex===B}]),onClick:ar=>a.selectStep(B)},[s("div",Mi,y(B+1),1),s("div",Hi,[s("div",Ji,y(C.character.name||"ì‹œìŠ¤í…œ"),1),s("div",Gi,y(a.truncateText(C.text,50)),1),a.hasEffects(C)?(c(),p("div",Wi,[C.effects.sfx?(c(),p("span",Xi,[d(r,{emoji:"ðŸ”Š",size:12})])):g("",!0),C.effects.bgm?(c(),p("span",qi,[d(r,{emoji:"ðŸŽµ",size:12})])):g("",!0),C.effects.background?(c(),p("span",Ki,[d(r,{emoji:"ðŸ–¼ï¸",size:12})])):g("",!0)])):g("",!0)])],10,Ai))),128))])])):g("",!0),s("div",Yi,[s("div",Qi,[s("button",{class:w(["tab-button",{active:l.activeTab==="info"}]),onClick:e[12]||(e[12]=C=>l.activeTab="info")},[d(r,{emoji:"ðŸ“",size:16}),e[44]||(e[44]=f(" ì •ë³´ ìˆ˜ì • ",-1))],2),s("button",{class:w(["tab-button",{active:l.activeTab==="effects"}]),onClick:e[13]||(e[13]=C=>l.activeTab="effects")},[d(r,{emoji:"âœ¨",size:16}),e[45]||(e[45]=f(" íš¨ê³¼ íŽ¸ì§‘ ",-1))],2),s("button",{class:w(["tab-button",{active:l.activeTab==="characters"}]),onClick:e[14]||(e[14]=C=>l.activeTab="characters")},[d(r,{emoji:"ðŸ‘¥",size:16}),e[46]||(e[46]=f(" ìºë¦­í„° ì¼ê´„íŽ¸ì§‘ ",-1))],2),s("button",{class:w(["tab-button",{active:l.activeTab==="images"}]),onClick:e[15]||(e[15]=C=>l.activeTab="images")},[d(r,{emoji:"ðŸ–¼ï¸",size:16}),e[47]||(e[47]=f(" ì´ë¯¸ì§€ ì¼ê´„íŽ¸ì§‘ ",-1))],2),s("button",{class:w(["tab-button",{active:l.activeTab==="css"}]),onClick:e[16]||(e[16]=C=>l.activeTab="css")},[d(r,{emoji:"ðŸŽ¨",size:16}),e[48]||(e[48]=f(" CSS ì»¤ìŠ¤í„°ë§ˆì´ì§• ",-1))],2)]),s("div",Zi,[l.activeTab==="info"?(c(),p("div",$i,[d(o,{"step-data":a.selectedStep,onSave:a.handleSaveStepInfo,onDelete:a.handleDeleteStep,onDuplicate:a.handleDuplicateStep,onClose:e[17]||(e[17]=C=>l.activeTab="effects")},null,8,["step-data","onSave","onDelete","onDuplicate"])])):g("",!0),l.activeTab==="effects"?(c(),p("div",er,[d(v,{"total-steps":a.totalSteps,"selected-step":l.selectedStepIndex!==null?l.selectedStepIndex+1:null,"current-effects":a.selectedStepEffects,onApply:a.handleApplyEffects,onRemove:a.handleRemoveEffects,onClose:e[18]||(e[18]=C=>l.activeTab="info")},null,8,["total-steps","selected-step","current-effects","onApply","onRemove"])])):g("",!0),l.activeTab==="characters"?(c(),p("div",tr,[d(n,{"all-steps":a.allSteps,onBulkUpdate:a.handleBulkUpdateCharacter,onClose:e[19]||(e[19]=C=>l.activeTab="info")},null,8,["all-steps","onBulkUpdate"])])):g("",!0),l.activeTab==="images"?(c(),p("div",sr,[d(u,{"vn-data":h.logStore.vnData,onBulkUpdate:a.handleBulkUpdateImage,onClose:e[20]||(e[20]=C=>l.activeTab="info")},null,8,["vn-data","onBulkUpdate"])])):g("",!0),l.activeTab==="css"?(c(),p("div",lr,[d(S,{"initial-c-s-s":((V=h.logStore.vnData)==null?void 0:V.customCSS)||{},onSave:a.handleSaveCustomCSS},null,8,["initial-c-s-s","onSave"])])):g("",!0)])])])])])}const ur=D(hi,[["render",or],["__scopeId","data-v-e070aa7b"]]);export{ur as default};
