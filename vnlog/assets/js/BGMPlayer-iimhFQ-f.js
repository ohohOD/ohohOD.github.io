import{_ as C,c as o,f as u,F as g,m as k,r as T,o as n,n as v,a as i,d as h,t as l,g as S,l as P,w as _,T as b,h as I,e as x,q as A,i as j,v as $}from"./index-CsOkaXE9.js";const E={name:"StatusChange",props:{statusChanges:{type:Array,default:()=>[]}},methods:{getStatusIcon(t){const e=t.toLowerCase();return e.includes("Ïπ®Ïãù")?"‚ö°":e.includes("hp")||e.includes("ÏÉùÎ™Ö")||e.includes("Ï≤¥Î†•")?"‚ù§Ô∏è":e.includes("mp")||e.includes("ÎßàÎÇò")||e.includes("ÎßàÎ†•")?"üíô":e.includes("san")||e.includes("Ï†ïÏã†")||e.includes("Ïù¥ÏÑ±")?"üß†":"üìä"}}},N={key:0,class:"status-change-container"},B={class:"status-icon"},D={class:"status-info"},R={class:"character-name"},V={class:"status-name"},z={class:"status-values"},M={class:"old-value"},H={class:"new-value"},O={key:1,class:"new-value"},U={key:2,class:"old-value"};function Y(t,e,a,p,c,r){const d=T("EmojiToIcon");return a.statusChanges&&a.statusChanges.length>0?(n(),o("div",N,[(n(!0),o(g,null,k(a.statusChanges,(s,m)=>(n(),o("div",{key:m,class:v(["status-change",{"is-positive":s.delta>0,"is-negative":s.delta<0}])},[i("div",B,[h(d,{emoji:r.getStatusIcon(s.statusName),size:16},null,8,["emoji"])]),i("div",D,[i("span",R,l(s.characterName),1),i("span",V,l(s.statusName),1)]),i("div",z,[s.oldValue!==null&&s.newValue!==null?(n(),o(g,{key:0},[i("span",M,l(s.oldValue),1),e[0]||(e[0]=i("span",{class:"arrow"},"‚Üí",-1)),i("span",H,l(s.newValue),1)],64)):s.oldValue===null&&s.newValue!==null?(n(),o("span",O,l(s.newValue),1)):s.oldValue!==null&&s.newValue===null?(n(),o("span",U,l(s.oldValue),1)):u("",!0),s.delta!==0?(n(),o("span",{key:3,class:v(["delta",{"delta-positive":s.delta>0,"delta-negative":s.delta<0}])},l(s.delta>0?"+":"")+l(s.delta),3)):u("",!0)])],2))),128))])):u("",!0)}const L=C(E,[["render",Y],["__scopeId","data-v-820fc90f"]]),G={name:"DXCombo",props:{dxCombos:{type:Array,default:()=>[]}},methods:{decodeHtml(t){if(!t)return t;const e=document.createElement("textarea");e.innerHTML=t;let a=e.value;return a=a.replace(/\\n/g,`
`),a=a.replace(/\\t/g,"	"),a=a.replace(/\\r/g,"\r"),a}}},q={key:0,class:"dx-combo-container"},K={class:"combo-header"},X={class:"combo-icon"},F={class:"combo-label"},J={key:0,class:"combo-name"},Q={key:1,class:"erosion-cost"},W={class:"combo-effects"},Z={class:"effect-name"},ee={class:"effect-level"},te={key:0,class:"combo-info-row"},se={key:0,class:"info-item"},ie={class:"info-value"},ae={key:1,class:"info-item"},ne={class:"info-value"},oe={key:2,class:"info-item"},le={class:"info-value"},re={key:3,class:"info-item"},ue={class:"info-value"},de={key:1,class:"combo-stats-row"},ce={key:0,class:"info-item"},he={class:"info-value"},me={key:1,class:"info-item"},ye={class:"info-value"},pe={key:2,class:"info-item"},fe={class:"info-value"},ge={key:3,class:"info-item"},_e={class:"info-value"},ve={key:2,class:"combo-description"},be={key:3,class:"combo-dice-roll"},Te={class:"dice-roll-header"},ke={class:"dice-roll-content"},Ce={class:"dice-formula"},Pe={class:"dice-detail"},Se={class:"dice-result"};function we(t,e,a,p,c,r){const d=T("EmojiToIcon");return a.dxCombos&&a.dxCombos.length>0?(n(),o("div",q,[(n(!0),o(g,null,k(a.dxCombos,(s,m)=>(n(),o("div",{key:m,class:"dx-combo"},[i("div",K,[i("div",X,[h(d,{emoji:"‚ö°",size:16})]),i("span",F,l(s.isSingleEffect?"Ïù¥ÌéôÌä∏":"ÏΩ§Î≥¥"),1),s.comboName?(n(),o("span",J,l(r.decodeHtml(s.comboName)),1)):u("",!0),s.erosionCost?(n(),o("span",Q,l(s.erosionCost)+"‚Üë",1)):u("",!0)]),i("div",W,[(n(!0),o(g,null,k(s.effects,(y,f)=>(n(),o("div",{key:f,class:"combo-effect"},[i("span",Z,l(r.decodeHtml(y.name)),1),i("span",ee,"Lv."+l(y.level),1)]))),128))]),s.timing||s.difficulty||s.target||s.range?(n(),o("div",te,[s.timing?(n(),o("span",se,[e[0]||(e[0]=i("span",{class:"info-label"},"ÌÉÄÏù¥Î∞ç:",-1)),i("span",ie,l(r.decodeHtml(s.timing)),1)])):u("",!0),s.difficulty?(n(),o("span",ae,[e[1]||(e[1]=i("span",{class:"info-label"},"ÎÇúÏù¥ÎèÑ:",-1)),i("span",ne,l(r.decodeHtml(s.difficulty)),1)])):u("",!0),s.target?(n(),o("span",oe,[e[2]||(e[2]=i("span",{class:"info-label"},"ÎåÄÏÉÅ:",-1)),i("span",le,l(r.decodeHtml(s.target)),1)])):u("",!0),s.range?(n(),o("span",re,[e[3]||(e[3]=i("span",{class:"info-label"},"ÏÇ¨Í±∞Î¶¨:",-1)),i("span",ue,l(r.decodeHtml(s.range)),1)])):u("",!0)])):u("",!0),s.dice||s.critical||s.attack||s.erosion?(n(),o("div",de,[s.dice?(n(),o("span",ce,[e[4]||(e[4]=i("span",{class:"info-label"},"Îã§Ïù¥Ïä§:",-1)),i("span",he,l(r.decodeHtml(s.dice)),1)])):u("",!0),s.critical?(n(),o("span",me,[e[5]||(e[5]=i("span",{class:"info-label"},"ÌÅ¨Î¶¨Ïπò:",-1)),i("span",ye,l(r.decodeHtml(s.critical)),1)])):u("",!0),s.attack?(n(),o("span",pe,[e[6]||(e[6]=i("span",{class:"info-label"},"Í≥µÍ≤©Î†•:",-1)),i("span",fe,l(r.decodeHtml(s.attack)),1)])):u("",!0),s.erosion?(n(),o("span",ge,[e[7]||(e[7]=i("span",{class:"info-label"},"Ïπ®Ïãù:",-1)),i("span",_e,l(r.decodeHtml(s.erosion)),1)])):u("",!0)])):u("",!0),s.description?(n(),o("div",ve,l(r.decodeHtml(s.description)),1)):u("",!0),s.diceRoll?(n(),o("div",be,[i("div",Te,[h(d,{emoji:"üé≤",size:14}),e[8]||(e[8]=i("span",{class:"dice-roll-label"},"ÌåêÏ†ï",-1))]),i("div",ke,[i("span",Ce,l(s.diceRoll.formula),1),e[9]||(e[9]=i("span",{class:"dice-separator"},"‚Üí",-1)),i("span",Pe,l(s.diceRoll.diceRolls),1),e[10]||(e[10]=i("span",{class:"dice-separator"},"‚Üí",-1)),i("span",Se,l(s.diceRoll.result),1)])])):u("",!0)]))),128))])):u("",!0)}const xe=C(G,[["render",we],["__scopeId","data-v-73107c03"]]),Ie={name:"Illustration",props:{illustrations:{type:Array,default:()=>[]}},data(){return{failedImages:new Set}},methods:{handleImageError(t){this.failedImages.add(t),this.$forceUpdate()},handleImageLoad(){}}},Ae={key:0,class:"illustration-container"},je=["src","alt","onError"];function $e(t,e,a,p,c,r){return a.illustrations&&a.illustrations.length>0?(n(),o("div",Ae,[(n(!0),o(g,null,k(a.illustrations,(d,s)=>(n(),o("div",{key:s,class:"illustration-item"},[c.failedImages.has(s)?u("",!0):(n(),o("img",{key:0,src:d.url,alt:d.alt||"ÏÇΩÌôî",class:"illustration-image",onError:m=>r.handleImageError(s),onLoad:e[0]||(e[0]=(...m)=>r.handleImageLoad&&r.handleImageLoad(...m))},null,40,je))]))),128))])):u("",!0)}const Ee=C(Ie,[["render",$e],["__scopeId","data-v-c3f90253"]]),Ne={name:"DialogBox",components:{StatusChange:L,DXCombo:xe,Illustration:Ee},props:{stepKey:{type:[String,Number],default:null},stepType:{type:String,default:"dialogue",validator:t=>["dialogue","system","narrator","scene-description"].includes(t)},characterName:{type:String,default:""},characterColor:{type:String,default:"#333333"},text:{type:String,required:!0},statusChanges:{type:Array,default:()=>[]},dxCombos:{type:Array,default:()=>[]},illustrations:{type:Array,default:()=>[]},typingSpeed:{type:Number,default:50},autoPlaySpeed:{type:Number,default:1},autoAdvance:{type:Boolean,default:!1},hasOverlay:{type:Boolean,default:!1}},data(){return{displayedText:"",isTyping:!1,isComplete:!1,typingTimer:null,autoAdvanceTimer:null,currentIndex:0,originalHtmlText:null,lastTypingSignature:null}},computed:{decodedText(){return this.decodeHtmlEntities(this.displayedText)}},watch:{stepKey:{handler(){this.restartTyping("stepKey")}},text:{immediate:!0,handler(){this.restartTyping("text")}},autoAdvance(t,e){if(console.log("[DialogBox] autoAdvance Î≥ÄÍ≤Ω:",{old:e,new:t,isComplete:this.isComplete,hasOverlay:this.hasOverlay}),!t&&e){console.log("[DialogBox] ÏûêÎèôÏû¨ÏÉù Ï∑®ÏÜå - ÌÉÄÏù¥Î®∏ Ï†ïÎ¶¨"),this.stopAutoAdvance();return}t&&!e&&this.isComplete&&!this.hasOverlay&&(this.stopAutoAdvance(),this.autoAdvanceTimer=setTimeout(()=>{this.autoAdvance&&this.isComplete&&!this.hasOverlay&&(console.log("[DialogBox] autoAdvance watchÏóêÏÑú ÏßÑÌñâ"),this.autoAdvanceTimer=null,this.$emit("advance"))},1500))}},methods:{restartTyping(t){const e=`${this.stepKey??""}::${this.text??""}`;e!==this.lastTypingSignature&&(this.lastTypingSignature=e,console.log(`[DialogBox] ${t} Î≥ÄÍ≤Ω, ÌÉÄÏù¥Ìïë ÏãúÏûë`),this.startTyping(this.text))},decodeHtmlEntities(t){if(!t)return t;const e={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&#39;":"'","&apos;":"'"};return t.replace(/&[a-z]+;|&#\d+;/gi,a=>e[a]||a)},startTyping(t){if(this.stopTyping(),this.stopAutoAdvance(),this.displayedText="",this.currentIndex=0,this.isTyping=!0,this.isComplete=!1,!t||t.length===0){this.displayedText=t,this.completeTyping(!0);return}if(t.includes("roll20-dx3-template")||t.includes("sheet-rolltemplate-")){this.displayedText=t,this.completeTyping(!0);return}if(this.hasHtmlTags(t)){const e=this.extractPlainText(t);this.originalHtmlText=t,this.typeNextCharacter(e,t);return}this.originalHtmlText=null,this.typeNextCharacter(t,t)},hasHtmlTags(t){return/<[^>]+>/i.test(t)},extractPlainText(t){const e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""},typeNextCharacter(t,e){this.currentIndex<t.length?(this.originalHtmlText?this.displayedText=this.reconstructHtmlUpToIndex(this.originalHtmlText,this.currentIndex):this.displayedText+=t[this.currentIndex],this.currentIndex++,this.typingTimer=setTimeout(()=>{this.typeNextCharacter(t,e)},this.typingSpeed/this.autoPlaySpeed)):(this.displayedText=e,this.completeTyping())},reconstructHtmlUpToIndex(t,e){const a=document.createElement("div");a.innerHTML=t;let p=0,c="";const r=d=>{if(p>=e)return!1;if(d.nodeType===Node.TEXT_NODE){const s=d.textContent,m=e-p;if(p+s.length<=e)c+=s,p+=s.length;else return c+=s.substring(0,m),p=e,!1}else if(d.nodeType===Node.ELEMENT_NODE){const s=d.tagName.toLowerCase(),m=Array.from(d.attributes).map(y=>`${y.name}="${y.value}"`).join(" ");c+=`<${s}${m?" "+m:""}>`;for(let y of d.childNodes)if(!r(y))return!1;c+=`</${s}>`}return!0};for(let d of a.childNodes)if(!r(d))break;return c},completeTyping(t=!1){if(this.isTyping=!1,this.isComplete=!0,this.$emit("typing-complete"),console.log("[DialogBox] completeTyping:",{autoAdvance:this.autoAdvance,hasOverlay:this.hasOverlay,isEmpty:t,textLength:this.text.length}),this.autoAdvance&&!this.hasOverlay){let e=1500;t&&(e=3e3);const a=this.text.length*this.typingSpeed/this.autoPlaySpeed,c=a+e/this.autoPlaySpeed<3e3/this.autoPlaySpeed?3e3/this.autoPlaySpeed-a:e/this.autoPlaySpeed;console.log("[DialogBox] ÏûêÎèô ÏßÑÌñâ ÌÉÄÏù¥Î®∏ ÏãúÏûë:",Math.max(c,e),"ms"),this.autoAdvanceTimer=setTimeout(()=>{this.autoAdvance&&!this.hasOverlay?(console.log("[DialogBox] ÏûêÎèô ÏßÑÌñâ Ïã§Ìñâ"),this.autoAdvanceTimer=null,this.$emit("advance")):(console.log("[DialogBox] ÏûêÎèô ÏßÑÌñâ Ï∑®ÏÜåÎê® (autoAdvance:",this.autoAdvance,", hasOverlay:",this.hasOverlay,")"),this.autoAdvanceTimer=null)},Math.max(c,e))}},handleClick(){this.skipTyping()},skipTyping(){this.isTyping?(this.stopTyping(),this.displayedText=this.text,this.completeTyping()):this.isComplete&&this.$emit("advance")},stopTyping(){this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=null)},stopAutoAdvance(){this.autoAdvanceTimer&&(clearTimeout(this.autoAdvanceTimer),this.autoAdvanceTimer=null)}},beforeUnmount(){this.stopTyping(),this.stopAutoAdvance()}},Be=["innerHTML"],De={key:0,class:"continue-indicator"};function Re(t,e,a,p,c,r){const d=T("EmojiToIcon"),s=T("Illustration"),m=T("DXCombo"),y=T("StatusChange");return n(),o("div",{class:v(["dialog-box",{"dialog-system":a.stepType==="system","dialog-narrator":a.stepType==="narrator","dialog-scene-description":a.stepType==="scene-description"}]),style:P({borderColor:a.characterColor}),onClick:e[0]||(e[0]=(...f)=>r.handleClick&&r.handleClick(...f))},[a.characterName?(n(),o("div",{key:0,class:"character-name",style:P({color:a.characterColor})},l(a.characterName),5)):u("",!0),a.text&&a.text.trim().length>0?(n(),o("div",{key:1,class:v(["dialog-text",{"is-typing":c.isTyping,"is-narration":!a.characterName}])},[i("p",{class:"text-content",innerHTML:r.decodedText},null,8,Be),!c.isTyping&&!c.isComplete?(n(),o("div",De,[h(d,{emoji:"‚ñº",size:12})])):u("",!0)],2)):u("",!0),a.illustrations&&a.illustrations.length>0?(n(),S(s,{key:2,illustrations:a.illustrations},null,8,["illustrations"])):u("",!0),a.dxCombos&&a.dxCombos.length>0?(n(),S(m,{key:3,dxCombos:a.dxCombos},null,8,["dxCombos"])):u("",!0),a.statusChanges&&a.statusChanges.length>0?(n(),S(y,{key:4,statusChanges:a.statusChanges},null,8,["statusChanges"])):u("",!0)],6)}const zs=C(Ne,[["render",Re],["__scopeId","data-v-49fa8f30"]]),Ve={name:"CharacterDisplay",props:{currentStep:{type:Object,default:null},characters:{type:Object,default:()=>({})},maxVisibleCharacters:{type:Number,default:3},layout:{type:String,default:"single",validator:t=>["single","left","center","right"].includes(t)}},data(){return{activeCharacterIds:[],failedImageIds:new Set}},computed:{speakingCharacterId(){var t;return!this.currentStep||this.currentStep.type==="system"||this.currentStep.type==="narrator"?null:((t=this.currentStep.character)==null?void 0:t.id)||null},currentCharacter(){return this.currentStep?this.getCurrentCharacter():null}},methods:{getCurrentCharacter(){if(!this.currentStep||!this.currentStep.character)return null;const t=this.currentStep.character;return{id:t.id||t.name,name:t.name,avatarUrl:t.avatarUrl,color:t.color,emotion:t.emotion||"default"}},getCharacterStyle(t){const e={};return t.color&&t.id===this.speakingCharacterId&&(e.borderColor=t.color),e},handleImageError(t){console.warn(`Ï∫êÎ¶≠ÌÑ∞ Ïù¥ÎØ∏ÏßÄ Î°úÎìú Ïã§Ìå®: ${t.name}`),this.failedImageIds.add(t.id),this.$forceUpdate()}},watch:{currentStep:{handler(t){if(!t)return;const e=this.speakingCharacterId;e&&!this.activeCharacterIds.includes(e)&&(this.activeCharacterIds.push(e),this.activeCharacterIds.length>this.maxVisibleCharacters&&this.activeCharacterIds.shift())},immediate:!0}}},ze={class:"character-display"},Me={class:"character-container"},He={class:"character-avatar"},Oe=["src","alt"];function Ue(t,e,a,p,c,r){return n(),o("div",ze,[i("div",Me,[h(b,{name:"character-fade",mode:"out-in"},{default:_(()=>[r.currentCharacter&&r.currentCharacter.avatarUrl&&!c.failedImageIds.has(r.currentCharacter.id)?(n(),o("div",{key:r.currentCharacter.id,class:v(["character-wrapper",{"is-speaking":r.currentCharacter.id===r.speakingCharacterId}]),style:P(r.getCharacterStyle(r.currentCharacter))},[i("div",He,[i("img",{src:r.currentCharacter.avatarUrl,alt:r.currentCharacter.name,onError:e[0]||(e[0]=d=>r.handleImageError(r.currentCharacter))},null,40,Oe)])],6)):u("",!0)]),_:1})])])}const Ms=C(Ve,[["render",Ue],["__scopeId","data-v-b271bfe7"]]),Ye={name:"PlaybackControls",data(){return{speedOptions:[.5,1,1.2,2]}},props:{currentStepNumber:{type:Number,required:!0},totalSteps:{type:Number,required:!0},currentSceneName:{type:String,default:""},hasPreviousStep:{type:Boolean,default:!1},hasNextStep:{type:Boolean,default:!0},autoPlayEnabled:{type:Boolean,default:!1},autoPlaySpeed:{type:Number,default:1},showProgressBar:{type:Boolean,default:!0},showSceneSelector:{type:Boolean,default:!1}},computed:{progressPercentage(){return this.totalSteps===0?0:this.currentStepNumber/this.totalSteps*100}},methods:{handleSceneSelectorClick(){console.log("[PlaybackControls] Ïî¨ ÏÑ†ÌÉù Î≤ÑÌäº ÌÅ¥Î¶≠Îê®"),console.log("[PlaybackControls] showSceneSelector prop:",this.showSceneSelector),this.$emit("open-scene-selector"),console.log("[PlaybackControls] open-scene-selector Ïù¥Î≤§Ìä∏ emit ÏôÑÎ£å")}}},Le={class:"playback-controls"},Ge={key:0,class:"progress-bar"},qe={class:"progress-info"},Ke={class:"scene-name"},Xe={class:"step-counter"},Fe={class:"controls-buttons"},Je=["disabled"],Qe=["disabled"],We={class:"speed-control"},Ze=["onClick","title"],et={key:1,class:"step-counter"};function tt(t,e,a,p,c,r){const d=T("EmojiToIcon");return n(),o("div",Le,[a.showProgressBar?(n(),o("div",Ge,[i("div",{class:"progress-fill",style:P({width:r.progressPercentage+"%"})},null,4),i("div",qe,[i("span",Ke,l(a.currentSceneName),1),i("span",Xe,l(a.currentStepNumber)+" / "+l(a.totalSteps),1)])])):u("",!0),i("div",Fe,[i("button",{class:"control-button",onClick:e[0]||(e[0]=s=>t.$emit("previous")),disabled:!a.hasPreviousStep,title:"Ïù¥Ï†Ñ (‚Üê)"},[h(d,{emoji:"‚èÆÔ∏è",size:20})],8,Je),i("button",{class:"control-button primary",onClick:e[1]||(e[1]=s=>t.$emit("next")),disabled:!a.hasNextStep,title:"Îã§Ïùå (‚Üí / Space)"},[h(d,{emoji:"‚ñ∂Ô∏è",size:24})],8,Qe),i("button",{class:v(["control-button",{"is-active":a.autoPlayEnabled}]),onClick:e[2]||(e[2]=s=>t.$emit("toggle-autoplay")),title:"ÏûêÎèô Ïû¨ÏÉù"},[h(d,{emoji:a.autoPlayEnabled?"‚è∏Ô∏è":"‚èØÔ∏è",size:20},null,8,["emoji"])],2),i("div",We,[(n(!0),o(g,null,k(c.speedOptions,s=>(n(),o("button",{key:s,class:v(["speed-button",{"is-active":a.autoPlaySpeed===s}]),onClick:m=>t.$emit("change-speed",s),title:s+"Î∞∞ÏÜç"},l(s)+"x ",11,Ze))),128))]),a.showSceneSelector?(n(),o("button",{key:0,class:"control-button",onClick:e[3]||(e[3]=(...s)=>r.handleSceneSelectorClick&&r.handleSceneSelectorClick(...s)),title:"Ïî¨ ÏÑ†ÌÉù"},[h(d,{emoji:"üìë",size:20})])):u("",!0),a.showProgressBar?u("",!0):(n(),o("div",et,l(a.currentStepNumber)+" / "+l(a.totalSteps),1))])])}const Hs=C(Ye,[["render",tt],["__scopeId","data-v-c19d5e78"]]),st={name:"SceneSelectorModal",props:{isVisible:{type:Boolean,default:!1},scenes:{type:Array,default:()=>[]},currentSceneIndex:{type:Number,default:0},currentStepIndex:{type:Number,default:0},closeOnOverlayClick:{type:Boolean,default:!0}},data(){return{expandedScenes:new Set}},methods:{close(){this.$emit("close")},handleOverlayClick(){this.closeOnOverlayClick&&this.close()},toggleScene(t){this.expandedScenes.has(t)?this.expandedScenes.delete(t):this.expandedScenes.add(t),this.$forceUpdate()},goToStep(t,e){this.$emit("go-to-step",t,e),this.close()},getStepPreview(t){return t?t.length>50?t.substring(0,50)+"...":t:"(ÌÖçÏä§Ìä∏ ÏóÜÏùå)"},handleKeyPress(t){t.key==="Escape"&&this.isVisible&&this.close()},initExpandedScenes(){this.currentSceneIndex!==null&&this.expandedScenes.add(this.currentSceneIndex)},scrollToCurrentScene(){setTimeout(()=>{this.$nextTick(()=>{const t=this.$refs.currentStep;if(t){const e=Array.isArray(t)?t[0]:t;e&&e.scrollIntoView({behavior:"smooth",block:"center"})}})},250)}},watch:{isVisible:{immediate:!0,handler(t){t?(this.initExpandedScenes(),window.addEventListener("keydown",this.handleKeyPress),document.body.style.overflow="hidden",this.scrollToCurrentScene()):(window.removeEventListener("keydown",this.handleKeyPress),document.body.style.overflow="",this.expandedScenes.clear())}},currentSceneIndex:{handler(t){this.isVisible&&t!==null&&(this.expandedScenes.add(t),this.$forceUpdate())}}},beforeUnmount(){window.removeEventListener("keydown",this.handleKeyPress),document.body.style.overflow=""}},it={class:"modal-header"},at={class:"modal-title"},nt={class:"modal-content"},ot=["onClick"],lt={class:"scene-info"},rt={class:"scene-number"},ut={class:"scene-name"},dt={class:"scene-meta"},ct={class:"step-count"},ht={key:0,class:"steps-list"},mt=["onClick"],yt={class:"step-number"},pt={class:"step-preview"},ft={class:"step-text"},gt={key:0,class:"empty-state"},_t={class:"modal-footer"},vt={class:"footer-info"};function bt(t,e,a,p,c,r){const d=T("EmojiToIcon");return n(),S(b,{name:"modal-overlay"},{default:_(()=>[a.isVisible?(n(),o("div",{key:0,class:"modal-overlay",onClick:e[3]||(e[3]=(...s)=>r.handleOverlayClick&&r.handleOverlayClick(...s))},[i("div",{class:"modal-container",onClick:e[2]||(e[2]=I(()=>{},["stop"]))},[i("div",it,[i("h2",at,[h(d,{emoji:"üìë",size:24}),e[4]||(e[4]=x(" Ïî¨ ÏÑ†ÌÉù ",-1))]),i("button",{class:"close-button",onClick:e[0]||(e[0]=(...s)=>r.close&&r.close(...s)),title:"Îã´Í∏∞ (ESC)"},[h(d,{emoji:"‚úñÔ∏è",size:20})])]),i("div",nt,[(n(!0),o(g,null,k(a.scenes,(s,m)=>(n(),o("div",{key:`scene-${m}`,class:v(["scene-item",{"is-current":m===a.currentSceneIndex}])},[i("div",{class:"scene-header",onClick:y=>r.toggleScene(m)},[i("div",lt,[i("span",rt,"Ïî¨ "+l(m+1),1),i("h3",ut,l(s.name||"Ï†úÎ™© ÏóÜÏùå"),1)]),i("div",dt,[i("span",ct,l(s.steps.length)+"Í∞ú Ïä§ÌÖù",1),h(d,{emoji:c.expandedScenes.has(m)?"üîΩ":"‚ñ∂Ô∏è",size:16,class:"expand-icon"},null,8,["emoji"])])],8,ot),h(b,{name:"steps-expand"},{default:_(()=>[c.expandedScenes.has(m)?(n(),o("div",ht,[(n(!0),o(g,null,k(s.steps,(y,f)=>{var w;return n(),o("div",{key:`step-${m}-${f}`,ref_for:!0,ref:m===a.currentSceneIndex&&f===a.currentStepIndex?"currentStep":null,class:v(["step-item",{"is-current":m===a.currentSceneIndex&&f===a.currentStepIndex}]),onClick:Rs=>r.goToStep(m,f)},[i("span",yt,l(f+1),1),i("div",pt,[(w=y.character)!=null&&w.name?(n(),o("span",{key:0,class:"step-character",style:P({color:y.character.color||"#ffffff"})},l(y.character.name)+": ",5)):u("",!0),i("span",ft,l(r.getStepPreview(y.text)),1)]),m===a.currentSceneIndex&&f===a.currentStepIndex?(n(),S(d,{key:0,emoji:"‚ñ∂Ô∏è",size:14,class:"current-indicator"})):u("",!0)],10,mt)}),128))])):u("",!0)]),_:2},1024)],2))),128)),a.scenes.length===0?(n(),o("div",gt,[h(d,{emoji:"üì≠",size:48}),e[5]||(e[5]=i("p",null,"Ïî¨Ïù¥ ÏóÜÏäµÎãàÎã§",-1))])):u("",!0)]),i("div",_t,[i("div",vt,[h(d,{emoji:"‚ÑπÔ∏è",size:14}),e[6]||(e[6]=i("span",null,"Ïî¨ÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ ÌéºÏπòÍ≥†, Ïä§ÌÖùÏùÑ ÏÑ†ÌÉùÌïòÏó¨ Ïù¥ÎèôÌï©ÎãàÎã§.",-1))]),i("button",{class:"action-button primary",onClick:e[1]||(e[1]=(...s)=>r.close&&r.close(...s))}," Îã´Í∏∞ ")])])])):u("",!0)]),_:1})}const Os=C(st,[["render",bt],["__scopeId","data-v-94d16136"]]),Tt={name:"DiceRoll",props:{diceRolls:{type:Array,default:()=>[]},characterName:{type:String,default:""},characterColor:{type:String,default:"#ffffff"},animated:{type:Boolean,default:!0},animationDuration:{type:Number,default:800},playSoundEffect:{type:Boolean,default:!1}},data(){return{processedRolls:[],audioContext:null}},watch:{diceRolls:{immediate:!0,handler(t){this.processRolls(t)}}},methods:{processRolls(t){if(!t||t.length===0){this.processedRolls=[];return}this.processedRolls=t.map((e,a)=>({...e,isAnimating:!1,showResult:e.type==="choice"||e.type==="judgement",showDetails:!1})),this.animated?this.processedRolls.forEach((e,a)=>{e.type==="choice"||e.type==="judgement"||setTimeout(()=>{this.animateRoll(a)},a*200)}):this.processedRolls.forEach(e=>{e.showResult=!0})},animateRoll(t){const e=this.processedRolls[t];e&&(e.isAnimating=!0,this.playSoundEffect&&this.playDiceSound(),setTimeout(()=>{e.isAnimating=!1,e.showResult=!0},this.animationDuration))},toggleDetails(t){const e=this.processedRolls[t];e&&(e.showDetails=!e.showDetails)},playDiceSound(){this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext));const t=this.audioContext,e=t.createOscillator(),a=t.createGain();e.connect(a),a.connect(t.destination),e.type="square",e.frequency.setValueAtTime(200,t.currentTime),e.frequency.exponentialRampToValueAtTime(100,t.currentTime+.1),a.gain.setValueAtTime(.1,t.currentTime),a.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1),e.start(t.currentTime),e.stop(t.currentTime+.1)}}},kt={class:"dice-roll-container"},Ct={class:"dice-icon-wrapper"},Pt={class:"dice-result choice-result"},St=["onClick","title"],wt={key:0,class:"dice-details choice-options"},xt={key:1,class:"ougi-full-wrapper"},It={class:"ougi-header"},At={class:"dice-icon-wrapper"},jt={class:"ougi-info"},$t={class:"ougi-title-line"},Et={class:"ougi-name"},Nt={class:"ougi-main-name"},Bt={class:"ougi-info-table"},Dt={key:0},Rt={key:0},Vt={class:"ougi-presentation"},zt={key:1},Mt={key:2},Ht={class:"ougi-ninpou"},Ot={class:"shinobigami-full-wrapper"},Ut={class:"shinobigami-header"},Yt={class:"dice-icon-wrapper"},Lt={class:"shinobigami-info"},Gt={class:"shinobigami-main"},qt={class:"dice-formula"},Kt={class:"shinobigami-result-line"},Xt={key:1,class:"dice-placeholder"},Ft={class:"shinobigami-judgement"},Jt={key:0,class:"shinobigami-info-table"},Qt={key:0},Wt={key:1},Zt={key:2},es={key:3},ts={key:4},ss=["onClick","title"],is={key:0,class:"dice-details shinobigami-details"},as={class:"shinobigami-formula"},ns={class:"shinobigami-rolls"},os={key:0},ls={key:1},rs={class:"judgement-header"},us={class:"dice-icon-wrapper"},ds={class:"judgement-info"},cs={class:"judgement-main"},hs={class:"dice-formula"},ms={class:"judgement-result-line"},ys={key:1,class:"dice-placeholder"},ps={class:"judgement-text"},fs=["onClick","title"],gs={key:0,class:"dice-details"},_s={class:"dice-formula"},vs={key:1,class:"dice-placeholder"},bs={key:0,class:"dice-details-wrapper"},Ts=["onClick","title"],ks={key:0,class:"dice-details"};function Cs(t,e,a,p,c,r){const d=T("EmojiToIcon");return n(),o("div",kt,[h(A,{name:"dice-list",tag:"div",class:"dice-rolls"},{default:_(()=>[(n(!0),o(g,null,k(c.processedRolls,(s,m)=>(n(),o("div",{key:`${s.formula}-${m}`,class:v(["dice-roll",[{"is-animating":s.isAnimating},`roll-type-${s.type}`]])},[s.type==="choice"?(n(),o(g,{key:0},[i("div",Ct,[h(d,{emoji:"üéØ",size:18,class:"dice-icon"})]),e[0]||(e[0]=i("span",{class:"dice-formula"},"ÏÑ†ÌÉù",-1)),e[1]||(e[1]=i("span",{class:"dice-arrow"},"‚Üí",-1)),i("span",Pt,l(s.result),1),i("button",{class:"details-toggle",onClick:y=>r.toggleDetails(m),title:s.showDetails?"ÏòµÏÖò Ïà®Í∏∞Í∏∞":"ÏòµÏÖò Î≥¥Í∏∞"},[h(d,{emoji:s.showDetails?"üîΩ":"‚ñ∂Ô∏è",size:12},null,8,["emoji"])],8,St),h(b,{name:"details-expand"},{default:_(()=>[s.showDetails?(n(),o("div",wt,[(n(!0),o(g,null,k(s.options,(y,f)=>(n(),o("span",{key:f,class:"choice-option"},l(y),1))),128))])):u("",!0)]),_:2},1024)],64)):s.type==="ougi"?(n(),o("div",xt,[i("div",It,[i("div",At,[h(d,{emoji:"üåü",size:20,class:"dice-icon"})]),i("div",jt,[i("div",$t,[i("span",{class:"ougi-character",style:P({color:a.characterColor})},l(a.characterName),5),i("span",Et,"„ÄêÂ••Áæ©: "+l(s.ougiType)+"„Äë",1),i("span",Nt,l(s.ougiName),1)]),i("table",Bt,[i("tbody",null,[i("tr",null,[e[2]||(e[2]=i("th",null,"ÏßÄÏ†ï ÌäπÍ∏∞",-1)),i("td",null,[(n(!0),o(g,null,k(s.skills,(y,f)=>(n(),o("span",{key:f,class:"ougi-skill"},[x(" „Ää"+l(y)+"„Äã",1),f<s.skills.length-1?(n(),o("span",Dt,", ")):u("",!0)]))),128))])]),s.presentation?(n(),o("tr",Rt,[e[3]||(e[3]=i("th",null,"Ïó∞Ï∂ú",-1)),i("td",Vt,l(s.presentation),1)])):u("",!0),s.ougiEffect?(n(),o("tr",zt,[e[4]||(e[4]=i("th",null,"Ìö®Í≥º",-1)),i("td",null,l(s.ougiEffect),1)])):u("",!0),s.ninpouInfo?(n(),o("tr",Mt,[e[5]||(e[5]=i("th",null,"Ïù∏Î≤ï",-1)),i("td",Ht,l(s.ninpouInfo),1)])):u("",!0)])])])])])):s.type==="shinobigami"?(n(),o(g,{key:2},[i("div",Ot,[i("div",Ut,[i("div",Yt,[h(d,{emoji:"‚öîÔ∏è",size:18,class:"dice-icon"})]),i("div",Lt,[i("div",Gt,[i("span",{class:"shinobigami-character",style:P({color:a.characterColor})},l(a.characterName),5),i("span",qt,"„Äê"+l(s.checkName)+"„Äë",1)]),i("div",Kt,[e[6]||(e[6]=i("span",{class:"dice-arrow"},"‚Üí",-1)),h(b,{name:"dice-result",mode:"out-in"},{default:_(()=>[s.showResult?(n(),o("span",{key:s.result,class:"dice-result"},l(s.result),1)):(n(),o("span",Xt,"???"))]),_:2},1024),i("span",Ft,l(s.judgement),1)]),s.additionalInfo?(n(),o("table",Jt,[i("tbody",null,[s.additionalInfo.type?(n(),o("tr",Qt,[e[7]||(e[7]=i("th",null,"ÌÉÄÏûÖ",-1)),i("td",null,l(s.additionalInfo.type),1)])):u("",!0),s.additionalInfo.range?(n(),o("tr",Wt,[e[8]||(e[8]=i("th",null,"Í∞ÑÍ≤©",-1)),i("td",null,l(s.additionalInfo.range.replace("Í∞ÑÍ≤©:","").trim()),1)])):u("",!0),s.additionalInfo.cost?(n(),o("tr",Zt,[e[9]||(e[9]=i("th",null,"ÏΩîÏä§Ìä∏",-1)),i("td",null,l(s.additionalInfo.cost.replace("ÏΩîÏä§Ìä∏:","").trim()),1)])):u("",!0),s.additionalInfo.skill?(n(),o("tr",es,[e[10]||(e[10]=i("th",null,"ÌäπÍ∏∞",-1)),i("td",null,l(s.additionalInfo.skill),1)])):u("",!0),s.additionalInfo.description?(n(),o("tr",ts,[e[11]||(e[11]=i("th",null,"ÏÑ§Î™Ö",-1)),i("td",null,l(s.additionalInfo.description),1)])):u("",!0)])])):u("",!0)])])]),i("button",{class:"details-toggle",onClick:y=>r.toggleDetails(m),title:s.showDetails?"ÏÉÅÏÑ∏ Ïà®Í∏∞Í∏∞":"ÏÉÅÏÑ∏ Î≥¥Í∏∞"},[h(d,{emoji:s.showDetails?"üîΩ":"‚ñ∂Ô∏è",size:12},null,8,["emoji"])],8,ss),h(b,{name:"details-expand"},{default:_(()=>[s.showDetails?(n(),o("div",is,[i("div",as,l(s.command),1),i("div",ns,[s.diceExpression?(n(),o("span",os,"Ï£ºÏÇ¨ÏúÑ: "+l(s.diceExpression),1)):(n(),o("span",ls,"Í∞úÎ≥Ñ Ï£ºÏÇ¨ÏúÑ: "+l(s.diceRolls),1))])])):u("",!0)]),_:2},1024)],64)):s.type==="judgement"?(n(),o(g,{key:3},[i("div",rs,[i("div",us,[h(d,{emoji:"‚öñÔ∏è",size:18,class:"dice-icon"})]),i("div",ds,[i("div",cs,[i("span",{class:"judgement-character",style:P({color:a.characterColor})},l(a.characterName),5),i("span",hs,l(s.checkName),1)]),i("div",ms,[e[12]||(e[12]=i("span",{class:"dice-arrow"},"‚Üí",-1)),h(b,{name:"dice-result",mode:"out-in"},{default:_(()=>[s.showResult?(n(),o("span",{key:s.result,class:"dice-result"},l(s.result),1)):(n(),o("span",ys,"???"))]),_:2},1024),i("span",ps,l(s.judgement),1)])])]),i("button",{class:"details-toggle",onClick:y=>r.toggleDetails(m),title:s.showDetails?"ÏÉÅÏÑ∏ Ïà®Í∏∞Í∏∞":"ÏÉÅÏÑ∏ Î≥¥Í∏∞"},[h(d,{emoji:s.showDetails?"üîΩ":"‚ñ∂Ô∏è",size:12},null,8,["emoji"])],8,fs),h(b,{name:"details-expand"},{default:_(()=>[s.showDetails?(n(),o("div",gs,l(s.formula),1)):u("",!0)]),_:2},1024)],64)):(n(),o(g,{key:4},[i("div",{class:v(["dice-icon-wrapper",{"is-rolling":s.isAnimating}])},[h(d,{emoji:"üé≤",size:18,class:"dice-icon"})],2),i("span",_s,l(s.formula),1),e[13]||(e[13]=i("span",{class:"dice-arrow"},"‚Üí",-1)),h(b,{name:"dice-result",mode:"out-in"},{default:_(()=>[s.showResult?(n(),o("span",{key:s.result,class:"dice-result"},l(s.result),1)):(n(),o("span",vs,"???"))]),_:2},1024),s.type==="dx3"&&s.diceRolls?(n(),o("div",bs,[i("button",{class:"details-toggle",onClick:y=>r.toggleDetails(m),title:s.showDetails?"ÏÉÅÏÑ∏ Ïà®Í∏∞Í∏∞":"ÏÉÅÏÑ∏ Î≥¥Í∏∞"},[h(d,{emoji:s.showDetails?"üîΩ":"‚ñ∂Ô∏è",size:12},null,8,["emoji"])],8,Ts),h(b,{name:"details-expand"},{default:_(()=>[s.showDetails?(n(),o("div",ks,l(s.diceRolls),1)):u("",!0)]),_:2},1024)])):u("",!0)],64))],2))),128))]),_:1})])}const Us=C(Tt,[["render",Cs],["__scopeId","data-v-3b3fb983"]]),Ps={name:"BGMPlayer",props:{bgmUrl:{type:String,default:""},bgmType:{type:String,default:"youtube",validator:t=>["youtube","audio"].includes(t)},volume:{type:Number,default:.5},autoPlay:{type:Boolean,default:!1},showControls:{type:Boolean,default:!0}},data(){return{isPlaying:!1,isPaused:!1,isMuted:!1,currentVolume:this.volume,youtubePlayer:null,youtubeApiReady:!1,shouldBePlaying:!1,resumeTimer:null}},computed:{youtubeVideoId(){if(this.bgmType!=="youtube"||!this.bgmUrl)return"";const t=[/(?:youtube\.com\/watch\?v=)([\w-]+)/,/(?:youtu\.be\/)([\w-]+)/,/(?:youtube\.com\/embed\/)([\w-]+)/,/^([\w-]{11})$/];for(const e of t){const a=this.bgmUrl.match(e);if(a)return a[1]}return""}},watch:{bgmUrl(t,e){t&&t!==e?(this.stopPlayer(),this.isPlaying=!1,this.isPaused=!1,this.initializePlayer()):t||this.stopPlayer()},volume(t){this.currentVolume=t,this.updateVolume()}},methods:{clearResumeTimer(){this.resumeTimer&&(clearTimeout(this.resumeTimer),this.resumeTimer=null)},scheduleResumeYouTube(t=""){this.bgmType==="youtube"&&this.youtubePlayer&&this.shouldBePlaying&&(document.hidden||(this.clearResumeTimer(),this.resumeTimer=setTimeout(()=>{if(this.resumeTimer=null,!(!this.youtubePlayer||!this.shouldBePlaying||document.hidden))try{console.warn("[BGMPlayer] YouTube Ïû¨ÏÉù Ïû¨ÏãúÎèÑ:",t),this.youtubePlayer.playVideo()}catch(e){console.warn("[BGMPlayer] YouTube Ïû¨ÏãúÎèÑ Ïã§Ìå®:",e)}},800)))},loadYouTubeAPI(){if(window.YT&&window.YT.Player){this.youtubeApiReady=!0;return}if(!document.getElementById("youtube-iframe-api")){const t=document.createElement("script");t.id="youtube-iframe-api",t.src="https://www.youtube.com/iframe_api";const e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e);const a=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{try{typeof a=="function"&&a()}finally{this.youtubeApiReady=!0,this.initYouTubePlayer()}}}},initializePlayer(){this.$nextTick(()=>{this.bgmType==="youtube"?(this.loadYouTubeAPI(),this.youtubeApiReady&&this.initYouTubePlayer()):this.bgmType==="audio"&&this.initAudioPlayer()})},initYouTubePlayer(){!this.youtubeApiReady||!this.youtubeVideoId||(this.youtubePlayer&&(this.youtubePlayer.destroy(),this.youtubePlayer=null),this.$nextTick(()=>{this.youtubePlayer=new window.YT.Player(this.$refs.youtubeIframe,{height:"1",width:"1",videoId:this.youtubeVideoId,playerVars:{autoplay:this.autoPlay?1:0,loop:1,playlist:this.youtubeVideoId,controls:0,disablekb:1,fs:0,modestbranding:1,playsinline:1,origin:window.location.origin},events:{onReady:t=>{t.target.setVolume(this.currentVolume*100),this.autoPlay&&(this.shouldBePlaying=!0,t.target.playVideo(),this.isPlaying=!0,this.isPaused=!1)},onStateChange:t=>{t.data===1?(this.isPlaying=!0,this.isPaused=!1):t.data===2?(this.isPlaying=!1,this.isPaused=!0,this.scheduleResumeYouTube("paused")):t.data===0||t.data===-1?(this.isPlaying=!1,this.isPaused=!1,this.scheduleResumeYouTube(t.data===0?"ended":"unstarted")):t.data===3&&this.scheduleResumeYouTube("buffering")},onError:t=>{console.error("[BGMPlayer] YouTube Ïû¨ÏÉù Ïò§Î•ò:",{code:t==null?void 0:t.data,url:this.bgmUrl,videoId:this.youtubeVideoId}),this.$emit("error","YouTube BGM Ïû¨ÏÉùÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. (ÏûÑÎ≤†Îìú Ï†úÌïú/ÌôïÏû•ÌîÑÎ°úÍ∑∏Îû® Ï∞®Îã® Í∞ÄÎä•)"),this.scheduleResumeYouTube("error")}}})}))},initAudioPlayer(){const t=this.$refs.audioPlayer;t&&(t.volume=this.currentVolume,this.autoPlay&&t.play().then(()=>{this.isPlaying=!0,this.isPaused=!1}).catch(e=>{console.warn("ÏûêÎèôÏû¨ÏÉù Ïã§Ìå®:",e),this.isPaused=!0}))},togglePlay(){if(this.bgmType==="audio"){const t=this.$refs.audioPlayer;t&&(this.isPlaying?(this.shouldBePlaying=!1,t.pause(),this.isPlaying=!1,this.isPaused=!0):(this.shouldBePlaying=!0,t.play().then(()=>{this.isPlaying=!0,this.isPaused=!1}).catch(e=>{console.error("Ïû¨ÏÉù Ïã§Ìå®:",e),this.isPlaying=!1,this.isPaused=!0})))}else if(this.bgmType==="youtube"){if(!this.youtubePlayer)return;this.isPlaying?(this.shouldBePlaying=!1,this.clearResumeTimer(),this.youtubePlayer.pauseVideo()):(this.shouldBePlaying=!0,this.youtubePlayer.playVideo())}},toggleMute(){if(this.isMuted=!this.isMuted,this.bgmType==="audio"){const t=this.$refs.audioPlayer;t&&(t.muted=this.isMuted)}else this.bgmType==="youtube"&&this.youtubePlayer&&(this.isMuted?this.youtubePlayer.mute():this.youtubePlayer.unMute())},updateVolume(){if(this.bgmType==="audio"){const t=this.$refs.audioPlayer;t&&(t.volume=this.currentVolume)}else this.bgmType==="youtube"&&this.youtubePlayer&&this.youtubePlayer.setVolume(this.currentVolume*100)},stopPlayer(){if(this.shouldBePlaying=!1,this.clearResumeTimer(),this.bgmType==="audio"){const t=this.$refs.audioPlayer;t&&(t.pause(),t.currentTime=0)}else this.bgmType==="youtube"&&this.youtubePlayer&&this.youtubePlayer.stopVideo();this.isPlaying=!1,this.isPaused=!1},handleAudioError(t){console.error("Ïò§ÎîîÏò§ Î°úÎìú Ïã§Ìå®:",t),this.$emit("error","BGM ÌååÏùºÏùÑ Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.")}},mounted(){this.bgmUrl&&this.initializePlayer()},beforeUnmount(){this.stopPlayer(),this.youtubePlayer&&(this.youtubePlayer.destroy(),this.youtubePlayer=null)}},Ss={key:0,class:"bgm-player"},ws={key:0,class:"youtube-container"},xs={ref:"youtubeIframe"},Is=["src","autoplay"],As={key:2,class:"bgm-controls"},js=["title"],$s={class:"bgm-info"},Es={class:"bgm-status"},Ns={class:"volume-control"},Bs=["title"];function Ds(t,e,a,p,c,r){const d=T("EmojiToIcon");return a.bgmUrl?(n(),o("div",Ss,[a.bgmType==="youtube"&&r.youtubeVideoId?(n(),o("div",ws,[i("div",xs,null,512)])):a.bgmType==="audio"?(n(),o("audio",{key:1,ref:"audioPlayer",src:a.bgmUrl,autoplay:a.autoPlay,loop:"",onError:e[0]||(e[0]=(...s)=>r.handleAudioError&&r.handleAudioError(...s))},null,40,Is)):u("",!0),a.showControls?(n(),o("div",As,[i("button",{onClick:e[1]||(e[1]=(...s)=>r.togglePlay&&r.togglePlay(...s)),class:"bgm-button",title:c.isPlaying?"ÏùºÏãúÏ†ïÏßÄ":"Ïû¨ÏÉù"},[h(d,{emoji:c.isPlaying?"‚è∏Ô∏è":"‚ñ∂Ô∏è",size:16},null,8,["emoji"])],8,js),i("div",$s,[e[5]||(e[5]=i("span",{class:"bgm-label"},"BGM",-1)),i("span",Es,l(c.isPlaying?"Ïû¨ÏÉù Ï§ë":c.isPaused?"ÏùºÏãúÏ†ïÏßÄ":"Ï†ïÏßÄ"),1)]),i("div",Ns,[i("button",{onClick:e[2]||(e[2]=(...s)=>r.toggleMute&&r.toggleMute(...s)),class:"volume-button",title:c.isMuted?"ÏùåÏÜåÍ±∞ Ìï¥Ï†ú":"ÏùåÏÜåÍ±∞"},[h(d,{emoji:c.isMuted?"üîá":"üîä",size:14},null,8,["emoji"])],8,Bs),j(i("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>c.currentVolume=s),type:"range",min:"0",max:"1",step:"0.05",class:"volume-slider",onInput:e[4]||(e[4]=(...s)=>r.updateVolume&&r.updateVolume(...s))},null,544),[[$,c.currentVolume,void 0,{number:!0}]])])])):u("",!0)])):u("",!0)}const Ys=C(Ps,[["render",Ds],["__scopeId","data-v-97659b90"]]);export{Ys as B,Ms as C,xe as D,Hs as P,Os as S,Us as a,zs as b};
