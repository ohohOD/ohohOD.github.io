import{u as T}from"./logStore-CSK1vxws.js";import{_ as V,c,a as t,b as u,d as v,r as D,e as m,j as h,v as f,t as g,o as d,p as I,F as k,f as w,k as E,n as S,l as N,h as U,g as j}from"./index-BNWIXiE6.js";const z={name:"StepEffectsEditor",props:{totalSteps:{type:Number,required:!0},selectedStep:{type:Number,default:null},currentEffects:{type:Object,default:null}},data(){return{startStep:1,endStep:1,effects:{sfx:"",bgm:"",background:"",backgroundOpacity:.3}}},computed:{canApply(){return this.startStep>=1&&this.endStep>=this.startStep&&this.endStep<=this.totalSteps},hasAnyEffect(){return this.effects.sfx||this.effects.bgm||this.effects.background}},methods:{applyEffects(){this.canApply&&(this.$emit("apply",{startStep:this.startStep,endStep:this.endStep,effects:{sfx:this.effects.sfx||null,bgm:this.effects.bgm||null,background:this.effects.background||null,backgroundOpacity:this.effects.backgroundOpacity}}),this.resetForm())},removeEffects(){this.canApply&&(this.$emit("remove",{startStep:this.startStep,endStep:this.endStep}),this.resetForm())},resetForm(){this.effects={sfx:"",bgm:"",background:"",backgroundOpacity:.3}},loadStepEffects(){this.selectedStep!==null&&(this.startStep=this.selectedStep,this.endStep=this.selectedStep),this.currentEffects&&(this.effects={sfx:this.currentEffects.sfx||"",bgm:this.currentEffects.bgm||"",background:this.currentEffects.background||"",backgroundOpacity:this.currentEffects.backgroundOpacity??.3})}},watch:{selectedStep:{immediate:!0,handler(){this.loadStepEffects()}},currentEffects:{immediate:!0,handler(){this.loadStepEffects()}}}},O={class:"step-effects-editor"},R={class:"editor-header"},A={class:"editor-body"},G={class:"section"},J={class:"step-range"},L={class:"input-group"},B=["max"],P={class:"input-group"},F=["min","max"],M={class:"section"},X={class:"section"},q={class:"section"},H={key:0,class:"opacity-control"},Y={key:0,class:"section preview-section"},K={class:"preview-list"},Q={key:0,class:"preview-item"},W={key:1,class:"preview-item"},Z={key:2,class:"preview-item"},$={key:3,class:"preview-item"},ee={class:"actions"},te=["disabled"],se=["disabled"];function le(o,e,i,p,l,a){const n=D("EmojiToIcon");return d(),c("div",O,[t("div",R,[t("h3",null,[u(n,{emoji:"âœ¨",size:20}),e[8]||(e[8]=v(" ìŠ¤í… íš¨ê³¼ í¸ì§‘ê¸° ",-1))])]),t("div",A,[t("div",G,[e[11]||(e[11]=t("h4",null,"ëŒ€ìƒ ìŠ¤í… ì„ íƒ",-1)),t("div",J,[t("div",L,[e[9]||(e[9]=t("label",null,"ì‹œì‘ ìŠ¤í…",-1)),h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.startStep=s),type:"number",min:1,max:i.totalSteps,placeholder:"1"},null,8,B),[[f,l.startStep,void 0,{number:!0}]])]),t("div",P,[e[10]||(e[10]=t("label",null,"ì¢…ë£Œ ìŠ¤í…",-1)),h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.endStep=s),type:"number",min:l.startStep,max:i.totalSteps,placeholder:"1"},null,8,F),[[f,l.endStep,void 0,{number:!0}]])])]),e[12]||(e[12]=t("p",{class:"hint-text"}," ë‹¨ì¼ ìŠ¤í…: ì‹œì‘ê³¼ ì¢…ë£Œë¥¼ ê°™ì€ ë²ˆí˜¸ë¡œ ì„¤ì • | ë²”ìœ„: ë‹¤ë¥¸ ë²ˆí˜¸ë¡œ ì„¤ì • ",-1))]),t("div",M,[t("h4",null,[u(n,{emoji:"ğŸ”Š",size:16}),e[13]||(e[13]=v(" íš¨ê³¼ìŒ (SFX) ",-1))]),h(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.effects.sfx=s),type:"text",placeholder:"íš¨ê³¼ìŒ íŒŒì¼ URL (ì˜ˆ: https://example.com/sound.mp3)",class:"url-input"},null,512),[[f,l.effects.sfx]])]),t("div",X,[t("h4",null,[u(n,{emoji:"ğŸµ",size:16}),e[14]||(e[14]=v(" ë°°ê²½ìŒì•… (BGM) ",-1))]),h(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.effects.bgm=s),type:"text",placeholder:"BGM URL (YouTube ë˜ëŠ” ì˜¤ë””ì˜¤ íŒŒì¼)",class:"url-input"},null,512),[[f,l.effects.bgm]])]),t("div",q,[t("h4",null,[u(n,{emoji:"ğŸ–¼ï¸",size:16}),e[15]||(e[15]=v(" ë°°ê²½ ì´ë¯¸ì§€ ",-1))]),h(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.effects.background=s),type:"text",placeholder:"ë°°ê²½ ì´ë¯¸ì§€ URL (ì˜ˆ: https://example.com/bg.jpg)",class:"url-input"},null,512),[[f,l.effects.background]]),l.effects.background?(d(),c("div",H,[t("label",null,[u(n,{emoji:"ğŸ’§",size:14}),v(" ë°°ê²½ íˆ¬ëª…ë„ ("+g(Math.round(l.effects.backgroundOpacity*100))+"%) ",1)]),h(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>l.effects.backgroundOpacity=s),type:"range",min:"0",max:"1",step:"0.05",class:"opacity-slider"},null,512),[[f,l.effects.backgroundOpacity,void 0,{number:!0}]])])):m("",!0)]),a.hasAnyEffect?(d(),c("div",Y,[t("h4",null,[u(n,{emoji:"ğŸ‘ï¸",size:16}),e[16]||(e[16]=v(" ì„¤ì • ë¯¸ë¦¬ë³´ê¸° ",-1))]),t("div",K,[l.effects.sfx?(d(),c("div",Q,[e[17]||(e[17]=t("strong",null,"íš¨ê³¼ìŒ:",-1)),t("span",null,g(l.effects.sfx),1)])):m("",!0),l.effects.bgm?(d(),c("div",W,[e[18]||(e[18]=t("strong",null,"BGM:",-1)),t("span",null,g(l.effects.bgm),1)])):m("",!0),l.effects.background?(d(),c("div",Z,[e[19]||(e[19]=t("strong",null,"ë°°ê²½:",-1)),t("span",null,g(l.effects.background),1)])):m("",!0),l.effects.background?(d(),c("div",$,[e[20]||(e[20]=t("strong",null,"íˆ¬ëª…ë„:",-1)),t("span",null,g(Math.round(l.effects.backgroundOpacity*100))+"%",1)])):m("",!0)])])):m("",!0),t("div",ee,[t("button",{onClick:e[6]||(e[6]=(...s)=>a.applyEffects&&a.applyEffects(...s)),class:"apply-button",disabled:!a.canApply},[u(n,{emoji:"âœ…",size:16}),e[21]||(e[21]=v(" íš¨ê³¼ ì ìš© ",-1))],8,te),t("button",{onClick:e[7]||(e[7]=(...s)=>a.removeEffects&&a.removeEffects(...s)),class:"remove-button",disabled:!a.canApply},[u(n,{emoji:"ğŸ—‘ï¸",size:16}),e[22]||(e[22]=v(" íš¨ê³¼ ì œê±° ",-1))],8,se)])])])}const oe=V(z,[["render",le],["__scopeId","data-v-ad38d2b9"]]),ae={name:"StepInfoEditor",props:{stepData:{type:Object,default:null}},data(){return{localData:null,showRawJSON:!1}},computed:{hasDice(){var o,e;return((e=(o=this.localData)==null?void 0:o.diceRolls)==null?void 0:e.length)>0},hasStatusChange(){var o,e;return((e=(o=this.localData)==null?void 0:o.statusChanges)==null?void 0:e.length)>0},hasDXCombo(){var o,e;return((e=(o=this.localData)==null?void 0:o.dxCombos)==null?void 0:e.length)>0},hasIllustration(){var o,e;return((e=(o=this.localData)==null?void 0:o.illustrations)==null?void 0:e.length)>0}},watch:{"localData.statusChanges":{handler(o){o&&o.forEach(e=>{e.oldValue!==null&&e.newValue!==null&&(e.delta=e.newValue-e.oldValue)})},deep:!0},"localData.diceRolls":{handler(o){o&&o.forEach(e=>{e.type==="choice"&&e.optionsText&&(e.options=e.optionsText.split(",").map(i=>i.trim()))})},deep:!0}},methods:{initializeLocalData(){var o,e,i;if(!this.stepData){this.localData=null;return}this.localData={id:this.stepData.id,sceneNumber:this.stepData.sceneNumber,type:this.stepData.type||"dialogue",character:{name:((o=this.stepData.character)==null?void 0:o.name)||"",color:((e=this.stepData.character)==null?void 0:e.color)||"#ffffff",avatarUrl:((i=this.stepData.character)==null?void 0:i.avatarUrl)||""},text:this.stepData.text||"",rawText:this.stepData.rawText||"",isSceneDescription:this.stepData.isSceneDescription||!1,sceneTitle:this.stepData.sceneTitle||"",scenePCs:this.stepData.scenePCs||"",sceneDescription:this.stepData.sceneDescription||"",illustrations:JSON.parse(JSON.stringify(this.stepData.illustrations||[])),diceRolls:this.initializeDiceRolls(this.stepData.diceRolls||[]),statusChanges:JSON.parse(JSON.stringify(this.stepData.statusChanges||[])),dxCombos:JSON.parse(JSON.stringify(this.stepData.dxCombos||[])),effects:JSON.parse(JSON.stringify(this.stepData.effects||{sfx:null,bgm:null,background:null,backgroundOpacity:.3}))}},initializeDiceRolls(o){return o.map(e=>{const i={...e};return e.type==="choice"&&e.options&&Array.isArray(e.options)&&(i.optionsText=e.options.join(", ")),i})},addIllustration(){this.localData.illustrations||(this.localData.illustrations=[]),this.localData.illustrations.push({url:"",alt:"img"})},removeIllustration(o){this.localData.illustrations.splice(o,1)},handleImageError(o){o.target.style.display="none"},addDiceRoll(){this.localData.diceRolls||(this.localData.diceRolls=[]),this.localData.diceRolls.push({type:"normal",formula:"",result:0,fullFormula:"",diceRolls:"",command:"",checkName:"",judgement:"",options:[],optionsText:""})},removeDiceRoll(o){this.localData.diceRolls.splice(o,1)},addStatusChange(){this.localData.statusChanges||(this.localData.statusChanges=[]),this.localData.statusChanges.push({characterName:"",statusName:"",oldValue:null,newValue:null,delta:0})},toggleStatusMode(o,e){e.target.checked?(o.oldValue=0,o.newValue=0,o.delta=0):(o.oldValue=null,o.newValue=null)},computeDelta(o){return o.oldValue!==null&&o.newValue!==null?o.newValue-o.oldValue:o.delta||0},removeStatusChange(o){this.localData.statusChanges.splice(o,1)},addDXCombo(){this.localData.dxCombos||(this.localData.dxCombos=[]),this.localData.dxCombos.push({type:"dx-combo",isSingleEffect:!1,comboName:"",description:"",effects:[],timing:"",difficulty:"",target:"",range:"",erosion:"",erosionCost:null,diceRoll:null})},removeDXCombo(o){this.localData.dxCombos.splice(o,1)},deleteStep(){!this.stepData||!confirm(`ìŠ¤í… #${this.stepData.id}ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)||this.$emit("delete",this.stepData.id)},duplicateStep(){this.stepData&&this.$emit("duplicate",this.stepData.id)},saveChanges(){if(!this.localData)return;const o={...this.localData,hasDice:this.hasDice,hasStatusChange:this.hasStatusChange,hasDXCombo:this.hasDXCombo,hasIllustration:this.hasIllustration};this.$emit("save",{id:this.stepData.id,updates:o})}},watch:{stepData:{immediate:!0,handler(){this.initializeLocalData(),this.showRawJSON=!1}}}},ie={class:"step-info-editor"},ne={class:"editor-header"},re={class:"editor-body"},de={key:0,class:"no-selection"},ce={key:1,class:"info-form"},ue={class:"field-group"},pe=["value"],he={key:0,class:"field-group"},me={key:1,class:"field-group"},fe={key:2,class:"field-group"},ge={class:"color-picker-wrapper"},ve={key:3,class:"field-group"},be={key:4,class:"field-group"},ye={key:5,class:"field-group"},_e=["value"],ke={key:6,class:"field-group"},Ce={class:"type-selection"},Se={class:"radio-label"},De={class:"radio-label"},we={class:"radio-label"},Ue={class:"radio-label"},xe={key:7,class:"scene-desc-section"},Ve={class:"field-group"},Ie={class:"field-label"},je={class:"field-row"},Ee={key:8,class:"field-group section-header"},Te={class:"field-label"},Ne={key:9,class:"items-list"},ze={class:"item-content"},Oe=["onUpdate:modelValue"],Re=["src"],Ae=["onClick"],Ge={key:10,class:"field-group section-header"},Je={class:"field-label"},Le={key:11,class:"items-list"},Be={class:"item-content"},Pe={class:"field-row"},Fe=["onUpdate:modelValue"],Me=["onUpdate:modelValue"],Xe={key:0,class:"field-row"},qe=["onUpdate:modelValue"],He={key:1,class:"dx3-fields"},Ye={class:"field-row"},Ke=["onUpdate:modelValue"],Qe={class:"field-row"},We=["onUpdate:modelValue"],Ze={class:"field-row"},$e=["onUpdate:modelValue"],et={key:2,class:"judgement-fields"},tt={class:"field-row"},st=["onUpdate:modelValue"],lt=["onUpdate:modelValue"],ot={class:"field-row"},at=["onUpdate:modelValue"],it=["onUpdate:modelValue"],nt={key:3,class:"choice-fields"},rt={class:"field-row"},dt=["onUpdate:modelValue"],ct={class:"field-row"},ut=["onUpdate:modelValue"],pt=["onClick"],ht={key:12,class:"field-group section-header"},mt={class:"field-label"},ft={key:13,class:"items-list"},gt={class:"item-content"},vt={class:"field-row"},bt=["onUpdate:modelValue"],yt=["onUpdate:modelValue"],_t={class:"field-row"},kt={class:"checkbox-label"},Ct=["checked","onChange"],St={key:0,class:"field-row"},Dt=["onUpdate:modelValue"],wt=["onUpdate:modelValue"],Ut={key:1,class:"field-row"},xt=["onUpdate:modelValue"],Vt=["onClick"],It={key:14,class:"field-group section-header"},jt={class:"field-label"},Et={key:15,class:"items-list"},Tt={class:"item-content"},Nt={class:"field-row"},zt=["onUpdate:modelValue"],Ot={class:"checkbox-label"},Rt=["onUpdate:modelValue"],At=["onUpdate:modelValue"],Gt={class:"field-row"},Jt=["onUpdate:modelValue"],Lt=["onUpdate:modelValue"],Bt={class:"field-row"},Pt=["onUpdate:modelValue"],Ft=["onUpdate:modelValue"],Mt=["onUpdate:modelValue"],Xt={class:"field-row"},qt=["onUpdate:modelValue"],Ht=["onUpdate:modelValue"],Yt=["onClick"],Kt={key:16,class:"field-group"},Qt={class:"field-label"},Wt={key:17,class:"json-viewer"},Zt={key:18,class:"actions"},$t={class:"action-group left"};function es(o,e,i,p,l,a){const n=D("EmojiToIcon");return d(),c("div",ie,[t("div",ne,[t("h3",null,[u(n,{emoji:"ğŸ“",size:20}),e[23]||(e[23]=v(" ìŠ¤í… ì •ë³´ í¸ì§‘ê¸° ",-1))])]),t("div",re,[i.stepData?(d(),c("div",ce,[t("div",ue,[e[25]||(e[25]=t("label",{class:"field-label"},"ìŠ¤í… ID (ì½ê¸° ì „ìš©)",-1)),t("input",{type:"text",value:i.stepData.id,disabled:"",class:"field-input disabled"},null,8,pe)]),l.localData?(d(),c("div",he,[e[26]||(e[26]=t("label",{class:"field-label"},"ì”¬ ë²ˆí˜¸",-1)),h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.localData.sceneNumber=s),type:"number",class:"field-input",placeholder:"ì”¬ ë²ˆí˜¸"},null,512),[[f,l.localData.sceneNumber,void 0,{number:!0}]])])):m("",!0),l.localData?(d(),c("div",me,[e[27]||(e[27]=t("label",{class:"field-label"},"ìºë¦­í„° ì´ë¦„",-1)),h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.localData.character.name=s),type:"text",class:"field-input",placeholder:"ìºë¦­í„° ì´ë¦„"},null,512),[[f,l.localData.character.name]])])):m("",!0),l.localData?(d(),c("div",fe,[e[28]||(e[28]=t("label",{class:"field-label"},"ìºë¦­í„° ìƒ‰ìƒ",-1)),t("div",ge,[h(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.localData.character.color=s),type:"color",class:"color-picker"},null,512),[[f,l.localData.character.color]]),h(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.localData.character.color=s),type:"text",class:"color-input",placeholder:"#ffffff"},null,512),[[f,l.localData.character.color]])])])):m("",!0),l.localData?(d(),c("div",ve,[e[29]||(e[29]=t("label",{class:"field-label"},"ì•„ë°”íƒ€ URL",-1)),h(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.localData.character.avatarUrl=s),type:"text",class:"field-input",placeholder:"https://example.com/avatar.png"},null,512),[[f,l.localData.character.avatarUrl]])])):m("",!0),l.localData?(d(),c("div",be,[e[30]||(e[30]=t("label",{class:"field-label"},"ëŒ€ì‚¬ í…ìŠ¤íŠ¸",-1)),h(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=s=>l.localData.text=s),class:"field-textarea",rows:"4",placeholder:"ìºë¦­í„°ì˜ ëŒ€ì‚¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”"},null,512),[[f,l.localData.text]])])):m("",!0),i.stepData?(d(),c("div",ye,[e[31]||(e[31]=t("label",{class:"field-label"},"ì›ë³¸ í…ìŠ¤íŠ¸ (ì½ê¸° ì „ìš©)",-1)),t("textarea",{value:i.stepData.rawText,disabled:"",class:"field-textarea disabled",rows:"3"},null,8,_e)])):m("",!0),l.localData?(d(),c("div",ke,[e[36]||(e[36]=t("label",{class:"field-label"},"ìŠ¤í… íƒ€ì… (í•˜ë‚˜ë§Œ ì„ íƒ ê°€ëŠ¥)",-1)),t("div",Ce,[t("label",Se,[h(t("input",{type:"radio",value:"dialogue","onUpdate:modelValue":e[6]||(e[6]=s=>l.localData.type=s)},null,512),[[I,l.localData.type]]),e[32]||(e[32]=t("span",null,"ì¼ë°˜ ëŒ€í™”",-1))]),t("label",De,[h(t("input",{type:"radio",value:"system","onUpdate:modelValue":e[7]||(e[7]=s=>l.localData.type=s)},null,512),[[I,l.localData.type]]),e[33]||(e[33]=t("span",null,"ì‹œìŠ¤í…œ ë©”ì‹œì§€",-1))]),t("label",we,[h(t("input",{type:"radio",value:"narrator","onUpdate:modelValue":e[8]||(e[8]=s=>l.localData.type=s)},null,512),[[I,l.localData.type]]),e[34]||(e[34]=t("span",null,"ë‚˜ë ˆì´í„°",-1))]),t("label",Ue,[h(t("input",{type:"radio",value:"scene-description","onUpdate:modelValue":e[9]||(e[9]=s=>l.localData.type=s)},null,512),[[I,l.localData.type]]),e[35]||(e[35]=t("span",null,"ì”¬ ì„¤ëª…",-1))])])])):m("",!0),l.localData&&l.localData.type==="scene-description"?(d(),c("div",xe,[t("div",Ve,[t("label",Ie,[u(n,{emoji:"ğŸ¬",size:14}),e[37]||(e[37]=v(" ì”¬ ì •ë³´ ",-1))])]),t("div",je,[h(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>l.localData.sceneNumber=s),type:"text",class:"field-input small",placeholder:"ì”¬ ë²ˆí˜¸"},null,512),[[f,l.localData.sceneNumber]]),h(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>l.localData.sceneTitle=s),type:"text",class:"field-input",placeholder:"ì”¬ ì œëª©"},null,512),[[f,l.localData.sceneTitle]])]),h(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>l.localData.scenePCs=s),type:"text",class:"field-input",placeholder:"ì°¸ê°€ PC (ì˜ˆ: í™ê¸¸ë™, ê¹€ì² ìˆ˜)"},null,512),[[f,l.localData.scenePCs]]),h(t("textarea",{"onUpdate:modelValue":e[13]||(e[13]=s=>l.localData.sceneDescription=s),class:"field-textarea",rows:"3",placeholder:"ì”¬ ìƒì„¸ ì„¤ëª…"},null,512),[[f,l.localData.sceneDescription]])])):m("",!0),l.localData?(d(),c("div",Ee,[t("label",Te,[u(n,{emoji:"ğŸ–¼ï¸",size:14}),v(" ì¼ëŸ¬ìŠ¤íŠ¸ ("+g(l.localData.illustrations.length)+"ê°œ) ",1)]),t("button",{onClick:e[14]||(e[14]=(...s)=>a.addIllustration&&a.addIllustration(...s)),class:"add-button"},[u(n,{emoji:"â•",size:12}),e[38]||(e[38]=v(" ì¶”ê°€ ",-1))])])):m("",!0),l.localData.illustrations.length>0?(d(),c("div",Ne,[(d(!0),c(k,null,w(l.localData.illustrations,(s,y)=>(d(),c("div",{key:y,class:"item-card"},[t("div",ze,[h(t("input",{"onUpdate:modelValue":r=>s.url=r,type:"text",class:"field-input",placeholder:"ì´ë¯¸ì§€ URL"},null,8,Oe),[[f,s.url]]),s.url?(d(),c("img",{key:0,src:s.url,class:"preview-img",onError:e[15]||(e[15]=(...r)=>a.handleImageError&&a.handleImageError(...r))},null,40,Re)):m("",!0)]),t("button",{onClick:r=>a.removeIllustration(y),class:"remove-button"},[u(n,{emoji:"ğŸ—‘ï¸",size:14})],8,Ae)]))),128))])):m("",!0),l.localData?(d(),c("div",Ge,[t("label",Je,[u(n,{emoji:"ğŸ²",size:14}),v(" ë‹¤ì´ìŠ¤ ë¡¤ ("+g(l.localData.diceRolls.length)+"ê°œ) ",1)]),t("button",{onClick:e[16]||(e[16]=(...s)=>a.addDiceRoll&&a.addDiceRoll(...s)),class:"add-button"},[u(n,{emoji:"â•",size:12}),e[39]||(e[39]=v(" ì¶”ê°€ ",-1))])])):m("",!0),l.localData.diceRolls.length>0?(d(),c("div",Le,[(d(!0),c(k,null,w(l.localData.diceRolls,(s,y)=>(d(),c("div",{key:y,class:"item-card dice-card"},[t("div",Be,[t("div",Pe,[h(t("select",{"onUpdate:modelValue":r=>s.type=r,class:"field-input small"},[...e[40]||(e[40]=[t("option",{value:"normal"},"ì¼ë°˜",-1),t("option",{value:"dx3"},"DX3",-1),t("option",{value:"judgement"},"íŒì •",-1),t("option",{value:"choice"},"ì„ íƒ",-1)])],8,Fe),[[E,s.type]]),h(t("input",{"onUpdate:modelValue":r=>s.formula=r,type:"text",class:"field-input",placeholder:"ê³µì‹ (ì˜ˆ: 1D100, 8dx+16)"},null,8,Me),[[f,s.formula]])]),s.type==="normal"?(d(),c("div",Xe,[e[41]||(e[41]=t("span",{class:"field-label-inline"},"ê²°ê³¼:",-1)),h(t("input",{"onUpdate:modelValue":r=>s.result=r,type:"number",class:"field-input small",placeholder:"ê²°ê³¼"},null,8,qe),[[f,s.result,void 0,{number:!0}]])])):m("",!0),s.type==="dx3"?(d(),c("div",He,[t("div",Ye,[h(t("input",{"onUpdate:modelValue":r=>s.fullFormula=r,type:"text",class:"field-input",placeholder:"ì „ì²´ ê³µì‹ (ì˜ˆ: 8DX10+16)"},null,8,Ke),[[f,s.fullFormula]])]),t("div",Qe,[h(t("input",{"onUpdate:modelValue":r=>s.diceRolls=r,type:"text",class:"field-input",placeholder:"ë‹¤ì´ìŠ¤ ë¡¤ (ì˜ˆ: 10[5,6,7,8,9,10]+5[5]+16)"},null,8,We),[[f,s.diceRolls]])]),t("div",Ze,[e[42]||(e[42]=t("span",{class:"field-label-inline"},"ìµœì¢… ê²°ê³¼:",-1)),h(t("input",{"onUpdate:modelValue":r=>s.result=r,type:"number",class:"field-input small",placeholder:"ê²°ê³¼"},null,8,$e),[[f,s.result,void 0,{number:!0}]])])])):m("",!0),s.type==="judgement"?(d(),c("div",et,[t("div",tt,[h(t("input",{"onUpdate:modelValue":r=>s.command=r,type:"text",class:"field-input small",placeholder:"ì»¤ë§¨ë“œ (cc<=70)"},null,8,st),[[f,s.command]]),h(t("input",{"onUpdate:modelValue":r=>s.checkName=r,type:"text",class:"field-input",placeholder:"íŒì •ëª…"},null,8,lt),[[f,s.checkName]])]),t("div",ot,[h(t("input",{"onUpdate:modelValue":r=>s.result=r,type:"number",class:"field-input small",placeholder:"ê²°ê³¼"},null,8,at),[[f,s.result,void 0,{number:!0}]]),h(t("input",{"onUpdate:modelValue":r=>s.judgement=r,type:"text",class:"field-input",placeholder:"íŒì • (ë³´í†µ ì„±ê³µ, ì‹¤íŒ¨ ë“±)"},null,8,it),[[f,s.judgement]])])])):m("",!0),s.type==="choice"?(d(),c("div",nt,[t("div",rt,[h(t("textarea",{"onUpdate:modelValue":r=>s.optionsText=r,class:"field-textarea small",rows:"2",placeholder:"ì„ íƒì§€ (ì‰¼í‘œë¡œ êµ¬ë¶„)"},null,8,dt),[[f,s.optionsText]])]),t("div",ct,[e[43]||(e[43]=t("span",{class:"field-label-inline"},"ì„ íƒë¨:",-1)),h(t("input",{"onUpdate:modelValue":r=>s.result=r,type:"text",class:"field-input",placeholder:"ì„ íƒëœ ì˜µì…˜"},null,8,ut),[[f,s.result]])])])):m("",!0)]),t("button",{onClick:r=>a.removeDiceRoll(y),class:"remove-button"},[u(n,{emoji:"ğŸ—‘ï¸",size:14})],8,pt)]))),128))])):m("",!0),l.localData?(d(),c("div",ht,[t("label",mt,[u(n,{emoji:"ğŸ“Š",size:14}),v(" ìŠ¤í…Œì´í„°ìŠ¤ ë³€í™” ("+g(l.localData.statusChanges.length)+"ê°œ) ",1)]),t("button",{onClick:e[17]||(e[17]=(...s)=>a.addStatusChange&&a.addStatusChange(...s)),class:"add-button"},[u(n,{emoji:"â•",size:12}),e[44]||(e[44]=v(" ì¶”ê°€ ",-1))])])):m("",!0),l.localData.statusChanges.length>0?(d(),c("div",ft,[(d(!0),c(k,null,w(l.localData.statusChanges,(s,y)=>(d(),c("div",{key:y,class:"item-card"},[t("div",gt,[t("div",vt,[h(t("input",{"onUpdate:modelValue":r=>s.characterName=r,type:"text",class:"field-input",placeholder:"ìºë¦­í„°ëª…"},null,8,bt),[[f,s.characterName]]),h(t("input",{"onUpdate:modelValue":r=>s.statusName=r,type:"text",class:"field-input",placeholder:"ìƒíƒœëª… (HP, ì¹¨ì‹ë¥  ë“±)"},null,8,yt),[[f,s.statusName]])]),t("div",_t,[t("label",kt,[t("input",{type:"checkbox",checked:s.oldValue!==null&&s.newValue!==null,onChange:r=>a.toggleStatusMode(s,r)},null,40,Ct),e[45]||(e[45]=t("span",null,"ì´ì „ê°’/ìƒˆê°’ ëª¨ë“œ",-1))])]),s.oldValue!==null&&s.newValue!==null?(d(),c("div",St,[h(t("input",{"onUpdate:modelValue":r=>s.oldValue=r,type:"number",class:"field-input small",placeholder:"ì´ì „ê°’"},null,8,Dt),[[f,s.oldValue,void 0,{number:!0}]]),e[46]||(e[46]=t("span",{class:"arrow"},"â†’",-1)),h(t("input",{"onUpdate:modelValue":r=>s.newValue=r,type:"number",class:"field-input small",placeholder:"ìƒˆê°’"},null,8,wt),[[f,s.newValue,void 0,{number:!0}]]),t("span",{class:S(["delta",{positive:a.computeDelta(s)>0,negative:a.computeDelta(s)<0}])},g(a.computeDelta(s)>0?"+":"")+g(a.computeDelta(s)),3)])):(d(),c("div",Ut,[e[47]||(e[47]=t("span",{class:"field-label-inline"},"ë³€í™”ëŸ‰:",-1)),h(t("input",{"onUpdate:modelValue":r=>s.delta=r,type:"number",class:"field-input small",placeholder:"Â±ë³€í™”ëŸ‰"},null,8,xt),[[f,s.delta,void 0,{number:!0}]]),t("span",{class:S(["delta",{positive:s.delta>0,negative:s.delta<0}])},g(s.delta>0?"+":"")+g(s.delta),3)]))]),t("button",{onClick:r=>a.removeStatusChange(y),class:"remove-button"},[u(n,{emoji:"ğŸ—‘ï¸",size:14})],8,Vt)]))),128))])):m("",!0),l.localData?(d(),c("div",It,[t("label",jt,[u(n,{emoji:"âš”ï¸",size:14}),v(" DX ì½¤ë³´/ì´í™íŠ¸ ("+g(l.localData.dxCombos.length)+"ê°œ) ",1)]),t("button",{onClick:e[18]||(e[18]=(...s)=>a.addDXCombo&&a.addDXCombo(...s)),class:"add-button"},[u(n,{emoji:"â•",size:12}),e[48]||(e[48]=v(" ì¶”ê°€ ",-1))])])):m("",!0),l.localData.dxCombos.length>0?(d(),c("div",Et,[(d(!0),c(k,null,w(l.localData.dxCombos,(s,y)=>(d(),c("div",{key:y,class:"item-card combo-card"},[t("div",Tt,[t("div",Nt,[h(t("select",{"onUpdate:modelValue":r=>s.type=r,class:"field-input small"},[...e[49]||(e[49]=[t("option",{value:"dx-combo"},"ì½¤ë³´",-1),t("option",{value:"dx-effect"},"ë‹¨ì¼ ì´í™íŠ¸",-1)])],8,zt),[[E,s.type]]),t("label",Ot,[h(t("input",{type:"checkbox","onUpdate:modelValue":r=>s.isSingleEffect=r},null,8,Rt),[[N,s.isSingleEffect]]),e[50]||(e[50]=t("span",null,"ë‹¨ì¼ ì´í™íŠ¸",-1))])]),h(t("input",{"onUpdate:modelValue":r=>s.comboName=r,type:"text",class:"field-input",placeholder:"ì½¤ë³´/ì´í™íŠ¸ëª…"},null,8,At),[[f,s.comboName]]),t("div",Gt,[h(t("input",{"onUpdate:modelValue":r=>s.timing=r,type:"text",class:"field-input",placeholder:"íƒ€ì´ë° (ë©”ì´ì €, ë§ˆì´ë„ˆ ë“±)"},null,8,Jt),[[f,s.timing]]),h(t("input",{"onUpdate:modelValue":r=>s.difficulty=r,type:"text",class:"field-input",placeholder:"ë‚œì´ë„ (ìë™, ëŒ€í•­ ë“±)"},null,8,Lt),[[f,s.difficulty]])]),t("div",Bt,[h(t("input",{"onUpdate:modelValue":r=>s.target=r,type:"text",class:"field-input",placeholder:"ëŒ€ìƒ"},null,8,Pt),[[f,s.target]]),h(t("input",{"onUpdate:modelValue":r=>s.range=r,type:"text",class:"field-input",placeholder:"ì‚¬ê±°ë¦¬"},null,8,Ft),[[f,s.range]])]),h(t("textarea",{"onUpdate:modelValue":r=>s.description=r,class:"field-textarea small",rows:"2",placeholder:"ì„¤ëª…/ê¸°ëŠ¥"},null,8,Mt),[[f,s.description]]),t("div",Xt,[h(t("input",{"onUpdate:modelValue":r=>s.erosion=r,type:"text",class:"field-input small",placeholder:"ì¹¨ì‹ì¹˜"},null,8,qt),[[f,s.erosion]]),h(t("input",{"onUpdate:modelValue":r=>s.erosionCost=r,type:"number",class:"field-input small",placeholder:"ì¹¨ì‹ ì½”ìŠ¤íŠ¸"},null,8,Ht),[[f,s.erosionCost,void 0,{number:!0}]])])]),t("button",{onClick:r=>a.removeDXCombo(y),class:"remove-button"},[u(n,{emoji:"ğŸ—‘ï¸",size:14})],8,Yt)]))),128))])):m("",!0),i.stepData?(d(),c("div",Kt,[t("label",Qt,[u(n,{emoji:"ğŸ”",size:14}),e[51]||(e[51]=v(" JSON ì›ë³¸ ë°ì´í„° ",-1))]),t("button",{onClick:e[19]||(e[19]=s=>l.showRawJSON=!l.showRawJSON),class:"toggle-json-button"},g(l.showRawJSON?"ìˆ¨ê¸°ê¸°":"ë³´ê¸°"),1)])):m("",!0),l.showRawJSON?(d(),c("div",Wt,[t("pre",null,g(JSON.stringify(i.stepData,null,2)),1)])):m("",!0),l.localData?(d(),c("div",Zt,[t("div",$t,[t("button",{onClick:e[20]||(e[20]=(...s)=>a.deleteStep&&a.deleteStep(...s)),class:"delete-button"},[u(n,{emoji:"ğŸ—‘ï¸",size:16}),e[52]||(e[52]=v(" ìŠ¤í… ì‚­ì œ ",-1))]),t("button",{onClick:e[21]||(e[21]=(...s)=>a.duplicateStep&&a.duplicateStep(...s)),class:"duplicate-button"},[u(n,{emoji:"ğŸ“‹",size:16}),e[53]||(e[53]=v(" ìŠ¤í… ë³µì‚¬ ",-1))])]),t("button",{onClick:e[22]||(e[22]=(...s)=>a.saveChanges&&a.saveChanges(...s)),class:"save-button"},[u(n,{emoji:"ğŸ’¾",size:16}),e[54]||(e[54]=v(" ë³€ê²½ì‚¬í•­ ì €ì¥ ",-1))])])):m("",!0)])):(d(),c("div",de,[u(n,{emoji:"ğŸ‘†",size:48}),e[24]||(e[24]=t("p",null,"ì™¼ìª½ì—ì„œ ìŠ¤í…ì„ ì„ íƒí•˜ì„¸ìš”",-1))]))])])}const ts=V(ae,[["render",es],["__scopeId","data-v-2b9fbfca"]]),ss={name:"CharacterBulkEditor",props:{allSteps:{type:Array,required:!0}},data(){return{selectedCharacter:null,newCharacterName:"",newCharacterColor:"",isApplying:!1,progressCurrent:0,progressTotal:0}},computed:{characterGroups(){const o={};return this.allSteps.forEach(e=>{var l,a;const i=((l=e.character)==null?void 0:l.name)||"",p=((a=e.character)==null?void 0:a.color)||"#ffffff";o[i]||(o[i]={name:i,color:p,count:0}),o[i].count++}),Object.values(o).sort((e,i)=>i.count-e.count)},selectedGroup(){return this.selectedCharacter?this.characterGroups.find(o=>o.name===this.selectedCharacter):null},hasChanges(){if(!this.selectedCharacter)return!1;const o=this.newCharacterName&&this.newCharacterName!==this.selectedCharacter,e=this.newCharacterColor&&this.newCharacterColor!==this.selectedGroup.color;return o||e},progressPercentage(){return this.progressTotal===0?0:Math.round(this.progressCurrent/this.progressTotal*100)}},methods:{selectCharacter(o){this.selectedCharacter=o,this.newCharacterName=o,this.newCharacterColor=this.selectedGroup.color},resetForm(){this.selectedGroup&&(this.newCharacterName=this.selectedCharacter,this.newCharacterColor=this.selectedGroup.color)},async applyChanges(){if(!this.hasChanges||this.isApplying)return;const o=this.selectedCharacter,e=this.newCharacterName||o,i=this.newCharacterColor;this.isApplying=!0,this.progressCurrent=0,this.progressTotal=this.selectedGroup.count;try{this.$emit("bulk-update",{oldName:o,newName:e,newColor:i,onProgress:(p,l)=>{this.progressCurrent=p,this.progressTotal=l},onComplete:async p=>{await new Promise(l=>setTimeout(l,300)),this.isApplying=!1,this.progressCurrent=0,this.progressTotal=0,await new Promise(l=>setTimeout(l,150)),alert(p.message),this.selectedCharacter=null,this.newCharacterName="",this.newCharacterColor=""}})}catch(p){console.error("ì¼ê´„ ë³€ê²½ ì‹¤íŒ¨:",p),this.isApplying=!1,this.progressCurrent=0,this.progressTotal=0,await new Promise(l=>setTimeout(l,150)),alert("ìºë¦­í„° ì¼ê´„ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}}}},ls={class:"character-bulk-editor"},os={key:0,class:"loading-overlay"},as={class:"loading-content"},is={class:"progress-section"},ns={class:"progress-bar"},rs={class:"progress-text"},ds={class:"editor-header"},cs={class:"editor-body"},us={class:"info-message"},ps={class:"character-list"},hs={class:"list-header"},ms={class:"list-body"},fs=["onClick"],gs={class:"character-info"},vs={class:"character-name"},bs={class:"character-count"},ys={key:0,class:"edit-form"},_s={class:"form-header"},ks={class:"affected-count"},Cs={class:"field-group"},Ss=["placeholder"],Ds={class:"field-group"},ws={class:"color-picker-wrapper"},Us=["placeholder"],xs={class:"preview-section"},Vs={class:"preview-comparison"},Is={class:"preview-item before"},js={class:"preview-box"},Es={class:"preview-arrow"},Ts={class:"preview-item after"},Ns={class:"preview-box"},zs={class:"actions"},Os=["disabled"],Rs=["disabled"],As={key:1,class:"no-selection"};function Gs(o,e,i,p,l,a){const n=D("EmojiToIcon");return d(),c("div",ls,[l.isApplying?(d(),c("div",os,[t("div",as,[e[5]||(e[5]=t("div",{class:"spinner"},null,-1)),e[6]||(e[6]=t("p",{class:"loading-text"},"ìºë¦­í„° ì •ë³´ë¥¼ ì¼ê´„ ë³€ê²½í•˜ëŠ” ì¤‘...",-1)),t("div",is,[t("div",ns,[t("div",{class:"progress-fill",style:U({width:a.progressPercentage+"%"})},null,4)]),t("p",rs,g(l.progressCurrent)+" / "+g(l.progressTotal)+" ìŠ¤í… ("+g(a.progressPercentage)+"%)",1)]),e[7]||(e[7]=t("p",{class:"loading-subtext"},"ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”",-1))])])):m("",!0),t("div",ds,[t("h3",null,[u(n,{emoji:"ğŸ‘¥",size:20}),e[8]||(e[8]=v(" ìºë¦­í„° ì¼ê´„ í¸ì§‘ ",-1))])]),t("div",cs,[t("div",us,[u(n,{emoji:"ğŸ’¡",size:18}),e[9]||(e[9]=t("p",null,"ê°™ì€ ì´ë¦„ì˜ ìºë¦­í„°ë¥¼ ëª¨ë‘ ì„ íƒí•˜ì—¬ ì´ë¦„ê³¼ ìƒ‰ìƒì„ ì¼ê´„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",-1))]),t("div",ps,[t("div",hs,[t("h4",null,"ìºë¦­í„° ëª©ë¡ ("+g(a.characterGroups.length)+"ëª…)",1)]),t("div",ms,[(d(!0),c(k,null,w(a.characterGroups,s=>(d(),c("div",{key:s.name,class:S(["character-item",{selected:l.selectedCharacter===s.name}]),onClick:y=>a.selectCharacter(s.name)},[t("div",{class:"character-color-preview",style:U({backgroundColor:s.color})},null,4),t("div",gs,[t("div",vs,g(s.name||"(ì´ë¦„ ì—†ìŒ)"),1),t("div",bs,g(s.count)+"ê°œ ìŠ¤í…",1)])],10,fs))),128))])]),l.selectedCharacter?(d(),c("div",ys,[t("div",_s,[t("h4",null,[u(n,{emoji:"âœï¸",size:16}),v(' "'+g(l.selectedCharacter)+'" í¸ì§‘ ',1)]),t("span",ks,g(a.selectedGroup.count)+"ê°œ ìŠ¤í…ì— ì ìš©ë©ë‹ˆë‹¤",1)]),t("div",Cs,[e[10]||(e[10]=t("label",{class:"field-label"},"ìƒˆ ìºë¦­í„° ì´ë¦„",-1)),h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.newCharacterName=s),type:"text",class:"field-input",placeholder:l.selectedCharacter},null,8,Ss),[[f,l.newCharacterName]])]),t("div",Ds,[e[11]||(e[11]=t("label",{class:"field-label"},"ìƒˆ ìºë¦­í„° ìƒ‰ìƒ",-1)),t("div",ws,[h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.newCharacterColor=s),type:"color",class:"color-picker"},null,512),[[f,l.newCharacterColor]]),h(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.newCharacterColor=s),type:"text",class:"color-input",placeholder:a.selectedGroup.color},null,8,Us),[[f,l.newCharacterColor]])])]),t("div",xs,[e[14]||(e[14]=t("h5",null,"ë³€ê²½ ì „/í›„ ë¯¸ë¦¬ë³´ê¸°",-1)),t("div",Vs,[t("div",Is,[e[12]||(e[12]=t("span",{class:"preview-label"},"ë³€ê²½ ì „",-1)),t("div",js,[t("div",{class:"preview-avatar",style:U({backgroundColor:a.selectedGroup.color})},g(l.selectedCharacter.charAt(0)),5),t("span",{class:"preview-name",style:U({color:a.selectedGroup.color})},g(l.selectedCharacter),5)])]),t("div",Es,[u(n,{emoji:"â¡ï¸",size:24})]),t("div",Ts,[e[13]||(e[13]=t("span",{class:"preview-label"},"ë³€ê²½ í›„",-1)),t("div",Ns,[t("div",{class:"preview-avatar",style:U({backgroundColor:l.newCharacterColor})},g((l.newCharacterName||l.selectedCharacter).charAt(0)),5),t("span",{class:"preview-name",style:U({color:l.newCharacterColor})},g(l.newCharacterName||l.selectedCharacter),5)])])])]),t("div",zs,[t("button",{onClick:e[3]||(e[3]=(...s)=>a.resetForm&&a.resetForm(...s)),class:"reset-button",disabled:l.isApplying},[u(n,{emoji:"ğŸ”„",size:16}),e[15]||(e[15]=v(" ì´ˆê¸°í™” ",-1))],8,Os),t("button",{onClick:e[4]||(e[4]=(...s)=>a.applyChanges&&a.applyChanges(...s)),class:"apply-button",disabled:!a.hasChanges||l.isApplying},[l.isApplying?(d(),c(k,{key:0},[e[16]||(e[16]=t("div",{class:"button-spinner"},null,-1)),e[17]||(e[17]=v(" ì²˜ë¦¬ ì¤‘... ",-1))],64)):(d(),c(k,{key:1},[u(n,{emoji:"âœ…",size:16}),e[18]||(e[18]=v(" ì¼ê´„ ì ìš© ",-1))],64))],8,Rs)])])):(d(),c("div",As,[u(n,{emoji:"ğŸ‘†",size:48}),e[19]||(e[19]=t("p",null,"ì™¼ìª½ì—ì„œ ìºë¦­í„°ë¥¼ ì„ íƒí•˜ì„¸ìš”",-1))]))])])}const Js=V(ss,[["render",Gs],["__scopeId","data-v-73d9619b"]]),Ls={name:"ImageBulkEditor",props:{vnData:{type:Object,required:!0}},data(){return{selectedImageUrl:null,newImageUrl:"",isApplying:!1,progressCurrent:0,progressTotal:0,activeFilter:"all",imageTypes:[{value:"all",label:"ì „ì²´",emoji:"ğŸŒ"},{value:"avatar",label:"ì•„ë°”íƒ€",emoji:"ğŸ‘¤"},{value:"background",label:"ë°°ê²½",emoji:"ğŸ¨"},{value:"handout",label:"í•¸ë“œì•„ì›ƒ",emoji:"ğŸ“„"},{value:"illustration",label:"ì¼ëŸ¬ìŠ¤íŠ¸",emoji:"ğŸ–¼ï¸"}]}},computed:{imageGroups(){const o={};return this.vnData.characters&&Object.values(this.vnData.characters).forEach(e=>{const i=e.avatarUrl;i&&(o[i]||(o[i]={url:i,count:0,types:new Set,locations:{avatar:[],background:[],handout:[],illustration:[]}}),o[i].count++,o[i].types.add("avatar"),o[i].locations.avatar.push(e.name))}),this.vnData.scenes&&this.vnData.scenes.forEach((e,i)=>{var p;(p=e.steps)==null||p.forEach((l,a)=>{var s,y;const n=(s=l.effects)==null?void 0:s.background;if(n&&(o[n]||(o[n]={url:n,count:0,types:new Set,locations:{avatar:[],background:[],handout:[],illustration:[]}}),o[n].count++,o[n].types.add("background"),o[n].locations.background.push(`ì”¬${i+1} ìŠ¤í…${a+1}`)),(y=l.illustration)!=null&&y.imageUrl){const r=l.illustration.imageUrl;o[r]||(o[r]={url:r,count:0,types:new Set,locations:{avatar:[],background:[],handout:[],illustration:[]}}),o[r].count++,o[r].types.add("illustration"),o[r].locations.illustration.push(`ì”¬${i+1} ìŠ¤í…${a+1}`)}})}),this.vnData.handouts&&this.vnData.handouts.forEach(e=>{const i=e.imageUrl;i&&(o[i]||(o[i]={url:i,count:0,types:new Set,locations:{avatar:[],background:[],handout:[],illustration:[]}}),o[i].count++,o[i].types.add("handout"),o[i].locations.handout.push(e.title||e.id))}),Object.values(o).map(e=>({...e,types:Array.from(e.types)})).sort((e,i)=>i.count-e.count)},filteredImageGroups(){return this.activeFilter==="all"?this.imageGroups:this.imageGroups.filter(o=>o.types.includes(this.activeFilter))},selectedGroup(){return this.selectedImageUrl?this.imageGroups.find(o=>o.url===this.selectedImageUrl):null},hasChanges(){return this.selectedImageUrl?this.newImageUrl&&this.newImageUrl!==this.selectedImageUrl:!1},progressPercentage(){return this.progressTotal===0?0:Math.round(this.progressCurrent/this.progressTotal*100)}},methods:{selectImage(o){this.selectedImageUrl=o,this.newImageUrl=o},resetForm(){this.selectedGroup&&(this.newImageUrl=this.selectedImageUrl)},truncateUrl(o,e=50){return o?o.length<=e?o:o.substring(0,e-3)+"...":""},handleImageError(o){o.target.style.display="none",o.target.parentElement.classList.add("error")},async applyChanges(){if(!this.hasChanges||this.isApplying)return;const o=this.selectedImageUrl,e=this.newImageUrl;this.isApplying=!0,this.progressCurrent=0,this.progressTotal=this.selectedGroup.count;try{this.$emit("bulk-update",{oldUrl:o,newUrl:e,onProgress:(i,p)=>{this.progressCurrent=i,this.progressTotal=p},onComplete:async i=>{await new Promise(p=>setTimeout(p,300)),this.isApplying=!1,this.progressCurrent=0,this.progressTotal=0,await new Promise(p=>setTimeout(p,150)),alert(i.message),this.selectedImageUrl=null,this.newImageUrl=""}})}catch(i){console.error("ì¼ê´„ ë³€ê²½ ì‹¤íŒ¨:",i),this.isApplying=!1,this.progressCurrent=0,this.progressTotal=0,await new Promise(p=>setTimeout(p,150)),alert("ì´ë¯¸ì§€ URL ì¼ê´„ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}}}},Bs={class:"image-bulk-editor"},Ps={key:0,class:"loading-overlay"},Fs={class:"loading-content"},Ms={class:"progress-section"},Xs={class:"progress-bar"},qs={class:"progress-text"},Hs={class:"editor-header"},Ys={class:"editor-body"},Ks={class:"info-message"},Qs={class:"image-list"},Ws={class:"list-header"},Zs={class:"filter-buttons"},$s=["onClick"],el={class:"list-body"},tl=["onClick"],sl={class:"image-preview"},ll=["src","alt"],ol={class:"image-info"},al=["title"],il={class:"image-meta"},nl={class:"usage-count"},rl={class:"usage-types"},dl={key:0,class:"edit-form"},cl={class:"form-header"},ul={class:"affected-count"},pl={class:"field-group"},hl={class:"current-url"},ml={class:"field-group"},fl={class:"preview-section"},gl={class:"preview-comparison"},vl={class:"preview-item before"},bl={class:"preview-box"},yl=["src"],_l={class:"preview-arrow"},kl={class:"preview-item after"},Cl={class:"preview-box"},Sl=["src"],Dl={key:1,class:"preview-placeholder"},wl={class:"usage-details"},Ul={class:"usage-list"},xl={key:0,class:"usage-type"},Vl={key:1,class:"usage-type"},Il={key:2,class:"usage-type"},jl={key:3,class:"usage-type"},El={class:"actions"},Tl=["disabled"],Nl=["disabled"],zl={key:1,class:"no-selection"};function Ol(o,e,i,p,l,a){const n=D("EmojiToIcon");return d(),c("div",Bs,[l.isApplying?(d(),c("div",Ps,[t("div",Fs,[e[6]||(e[6]=t("div",{class:"spinner"},null,-1)),e[7]||(e[7]=t("p",{class:"loading-text"},"ì´ë¯¸ì§€ URLì„ ì¼ê´„ ë³€ê²½í•˜ëŠ” ì¤‘...",-1)),t("div",Ms,[t("div",Xs,[t("div",{class:"progress-fill",style:U({width:a.progressPercentage+"%"})},null,4)]),t("p",qs,g(l.progressCurrent)+" / "+g(l.progressTotal)+" í•­ëª© ("+g(a.progressPercentage)+"%)",1)]),e[8]||(e[8]=t("p",{class:"loading-subtext"},"ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”",-1))])])):m("",!0),t("div",Hs,[t("h3",null,[u(n,{emoji:"ğŸ–¼ï¸",size:20}),e[9]||(e[9]=v(" ì´ë¯¸ì§€ URL ì¼ê´„ í¸ì§‘ ",-1))])]),t("div",Ys,[t("div",Ks,[u(n,{emoji:"ğŸ’¡",size:18}),e[10]||(e[10]=t("p",null,"ë™ì¼í•œ ì´ë¯¸ì§€ URLì„ ëª¨ë‘ ì„ íƒí•˜ì—¬ í•œ ë²ˆì— ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì•„ë°”íƒ€, ë°°ê²½, í•¸ë“œì•„ì›ƒ ë“±)",-1))]),t("div",Qs,[t("div",Ws,[t("h4",null,"ì´ë¯¸ì§€ URL ëª©ë¡ ("+g(a.imageGroups.length)+"ê°œ)",1),t("div",Zs,[(d(!0),c(k,null,w(l.imageTypes,s=>(d(),c("button",{key:s.value,class:S(["filter-button",{active:l.activeFilter===s.value}]),onClick:y=>l.activeFilter=s.value},[u(n,{emoji:s.emoji,size:14},null,8,["emoji"]),v(" "+g(s.label),1)],10,$s))),128))])]),t("div",el,[(d(!0),c(k,null,w(a.filteredImageGroups,s=>(d(),c("div",{key:s.url,class:S(["image-item",{selected:l.selectedImageUrl===s.url}]),onClick:y=>a.selectImage(s.url)},[t("div",sl,[t("img",{src:s.url,alt:s.url,onError:e[0]||(e[0]=(...y)=>a.handleImageError&&a.handleImageError(...y))},null,40,ll)]),t("div",ol,[t("div",{class:"image-url",title:s.url},g(a.truncateUrl(s.url)),9,al),t("div",il,[t("span",nl,g(s.count)+"íšŒ ì‚¬ìš©",1),t("span",rl,[s.types.includes("avatar")?(d(),j(n,{key:0,emoji:"ğŸ‘¤",size:12,title:"ì•„ë°”íƒ€"})):m("",!0),s.types.includes("background")?(d(),j(n,{key:1,emoji:"ğŸ¨",size:12,title:"ë°°ê²½"})):m("",!0),s.types.includes("handout")?(d(),j(n,{key:2,emoji:"ğŸ“„",size:12,title:"í•¸ë“œì•„ì›ƒ"})):m("",!0),s.types.includes("illustration")?(d(),j(n,{key:3,emoji:"ğŸ–¼ï¸",size:12,title:"ì¼ëŸ¬ìŠ¤íŠ¸"})):m("",!0)])])])],10,tl))),128))])]),l.selectedImageUrl?(d(),c("div",dl,[t("div",cl,[t("h4",null,[u(n,{emoji:"âœï¸",size:16}),e[11]||(e[11]=v(" URL ë³€ê²½ ",-1))]),t("span",ul,g(a.selectedGroup.count)+"ê°œ í•­ëª©ì— ì ìš©ë©ë‹ˆë‹¤",1)]),t("div",pl,[e[12]||(e[12]=t("label",{class:"field-label"},"í˜„ì¬ ì´ë¯¸ì§€ URL",-1)),t("div",hl,g(l.selectedImageUrl),1)]),t("div",ml,[e[13]||(e[13]=t("label",{class:"field-label"},"ìƒˆ ì´ë¯¸ì§€ URL",-1)),h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.newImageUrl=s),type:"text",class:"field-input",placeholder:"ìƒˆ ì´ë¯¸ì§€ URLì„ ì…ë ¥í•˜ì„¸ìš”"},null,512),[[f,l.newImageUrl]])]),t("div",fl,[e[17]||(e[17]=t("h5",null,"ë³€ê²½ ì „/í›„ ë¯¸ë¦¬ë³´ê¸°",-1)),t("div",gl,[t("div",vl,[e[14]||(e[14]=t("span",{class:"preview-label"},"ë³€ê²½ ì „",-1)),t("div",bl,[t("img",{src:l.selectedImageUrl,alt:"ë³€ê²½ ì „",onError:e[2]||(e[2]=(...s)=>a.handleImageError&&a.handleImageError(...s))},null,40,yl)])]),t("div",_l,[u(n,{emoji:"â¡ï¸",size:24})]),t("div",kl,[e[16]||(e[16]=t("span",{class:"preview-label"},"ë³€ê²½ í›„",-1)),t("div",Cl,[l.newImageUrl?(d(),c("img",{key:0,src:l.newImageUrl,alt:"ë³€ê²½ í›„",onError:e[3]||(e[3]=(...s)=>a.handleImageError&&a.handleImageError(...s))},null,40,Sl)):(d(),c("div",Dl,[u(n,{emoji:"ğŸ–¼ï¸",size:32}),e[15]||(e[15]=t("span",null,"URLì„ ì…ë ¥í•˜ì„¸ìš”",-1))]))])])])]),t("div",wl,[e[18]||(e[18]=t("h5",null,"ì‚¬ìš© ìœ„ì¹˜ ìƒì„¸",-1)),t("div",Ul,[a.selectedGroup.types.includes("avatar")?(d(),c("div",xl,[u(n,{emoji:"ğŸ‘¤",size:16}),t("span",null,"ì•„ë°”íƒ€ ("+g(a.selectedGroup.locations.avatar.length)+"ê°œ ìºë¦­í„°)",1)])):m("",!0),a.selectedGroup.types.includes("background")?(d(),c("div",Vl,[u(n,{emoji:"ğŸ¨",size:16}),t("span",null,"ë°°ê²½ ("+g(a.selectedGroup.locations.background.length)+"ê°œ ìŠ¤í…)",1)])):m("",!0),a.selectedGroup.types.includes("handout")?(d(),c("div",Il,[u(n,{emoji:"ğŸ“„",size:16}),t("span",null,"í•¸ë“œì•„ì›ƒ ("+g(a.selectedGroup.locations.handout.length)+"ê°œ)",1)])):m("",!0),a.selectedGroup.types.includes("illustration")?(d(),c("div",jl,[u(n,{emoji:"ğŸ–¼ï¸",size:16}),t("span",null,"ì¼ëŸ¬ìŠ¤íŠ¸ ("+g(a.selectedGroup.locations.illustration.length)+"ê°œ)",1)])):m("",!0)])]),t("div",El,[t("button",{onClick:e[4]||(e[4]=(...s)=>a.resetForm&&a.resetForm(...s)),class:"reset-button",disabled:l.isApplying},[u(n,{emoji:"ğŸ”„",size:16}),e[19]||(e[19]=v(" ì´ˆê¸°í™” ",-1))],8,Tl),t("button",{onClick:e[5]||(e[5]=(...s)=>a.applyChanges&&a.applyChanges(...s)),class:"apply-button",disabled:!a.hasChanges||l.isApplying},[l.isApplying?(d(),c(k,{key:0},[e[20]||(e[20]=t("div",{class:"button-spinner"},null,-1)),e[21]||(e[21]=v(" ì²˜ë¦¬ ì¤‘... ",-1))],64)):(d(),c(k,{key:1},[u(n,{emoji:"âœ…",size:16}),e[22]||(e[22]=v(" ì¼ê´„ ì ìš© ",-1))],64))],8,Nl)])])):(d(),c("div",zl,[u(n,{emoji:"ğŸ‘†",size:48}),e[23]||(e[23]=t("p",null,"ì™¼ìª½ì—ì„œ ì´ë¯¸ì§€ URLì„ ì„ íƒí•˜ì„¸ìš”",-1))]))])])}const Rl=V(Ls,[["render",Ol],["__scopeId","data-v-eaab8ed4"]]),Al={name:"EditorView",components:{StepEffectsEditor:oe,StepInfoEditor:ts,CharacterBulkEditor:Js,ImageBulkEditor:Rl},setup(){return{logStore:T()}},data(){return{activeTab:"info",selectedStepIndex:null}},computed:{allSteps(){var i;const o=[];return(((i=this.logStore.vnData)==null?void 0:i.scenes)||[]).forEach(p=>{o.push(...p.steps||[])}),o},totalSteps(){return this.allSteps.length},selectedStep(){return this.selectedStepIndex===null?null:this.allSteps[this.selectedStepIndex]||null},selectedStepEffects(){var o;return((o=this.selectedStep)==null?void 0:o.effects)||null}},methods:{selectStep(o){this.selectedStepIndex=o},goBack(){this.$router.push("/player")},saveAndPlay(){this.saveToLocalStorage(),this.selectedStepIndex!==null&&sessionStorage.setItem("player-target-step",this.selectedStepIndex+1),this.$router.push("/player")},exportJSON(){const o=this.logStore.vnData;if(!o){alert("ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");return}const e=JSON.stringify(o,null,2),i=new Blob([e],{type:"application/json"}),p=URL.createObjectURL(i),l=document.createElement("a");l.href=p,l.download=`${o.title||"vnlog"}_edited.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(p)},saveToLocalStorage(){try{const o=this.logStore.vnData;localStorage.setItem("vnlog-edited-data",JSON.stringify(o))}catch(o){console.error("ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì €ì¥ ì‹¤íŒ¨:",o)}},handleSaveStepInfo({id:o,updates:e}){const i=this.allSteps.find(p=>p.id===o);if(!i){alert("ìŠ¤í…ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}i.sceneNumber=e.sceneNumber,i.type=e.type,i.character.name=e.character.name,i.character.color=e.character.color,i.character.avatarUrl=e.character.avatarUrl,i.text=e.text,i.isSceneDescription=e.isSceneDescription,i.sceneTitle=e.sceneTitle,i.scenePCs=e.scenePCs,i.sceneDescription=e.sceneDescription,i.illustrations=JSON.parse(JSON.stringify(e.illustrations||[])),i.diceRolls=JSON.parse(JSON.stringify(e.diceRolls||[])),i.statusChanges=JSON.parse(JSON.stringify(e.statusChanges||[])),i.dxCombos=JSON.parse(JSON.stringify(e.dxCombos||[])),i.effects=JSON.parse(JSON.stringify(e.effects||{})),i.hasDice=e.hasDice,i.hasStatusChange=e.hasStatusChange,i.hasDXCombo=e.hasDXCombo,i.hasIllustration=e.hasIllustration,this.saveToLocalStorage(),alert("ìŠ¤í… ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.")},handleDeleteStep(o){const e=this.logStore.vnData.scenes;let i=!1;for(let l=0;l<e.length;l++){const a=e[l],n=a.steps.findIndex(s=>s.id===o);if(n!==-1){a.steps.splice(n,1),i=!0;break}}if(!i){alert("ìŠ¤í…ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}const p=this.allSteps.length;this.selectedStepIndex>=p&&(this.selectedStepIndex=p>0?p-1:null),this.saveToLocalStorage(),alert("ìŠ¤í…ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")},handleDuplicateStep(o){const e=this.logStore.vnData.scenes;let i=!1,p=0;const a=(Math.max(...this.allSteps.map(n=>parseInt(n.id)||0))+1).toString();for(let n=0;n<e.length;n++){const s=e[n],y=s.steps.findIndex(r=>r.id===o);if(y!==-1){const r=s.steps[y],_=JSON.parse(JSON.stringify(r));_.id=a,s.steps.splice(y+1,0,_);for(let b=0;b<n;b++)p+=e[b].steps.length;p+=y+1,i=!0;break}p+=s.steps.length}if(!i){alert("ìŠ¤í…ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}this.selectedStepIndex=p,this.saveToLocalStorage(),alert(`ìŠ¤í…ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. (ìƒˆ ID: ${a})`)},handleApplyEffects({startStep:o,endStep:e,effects:i}){const p=this.allSteps;for(let l=o-1;l<e&&l<p.length;l++){const a=p[l];a.effects&&(a.effects.sfx=i.sfx,a.effects.bgm=i.bgm,a.effects.background=i.background,a.effects.backgroundOpacity=i.backgroundOpacity)}this.saveToLocalStorage(),alert(`ìŠ¤í… ${o}~${e}ì— íš¨ê³¼ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.`)},handleRemoveEffects({startStep:o,endStep:e}){const i=this.allSteps;for(let p=o-1;p<e&&p<i.length;p++){const l=i[p];l.effects&&(l.effects.sfx=null,l.effects.bgm=null,l.effects.background=null)}this.saveToLocalStorage(),alert(`ìŠ¤í… ${o}~${e}ì˜ íš¨ê³¼ê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.`)},async handleBulkUpdateCharacter({oldName:o,newName:e,newColor:i,onProgress:p,onComplete:l}){let a=0,n=0;this.allSteps.forEach(s=>{s.character&&s.character.name===o&&n++});for(let s=0;s<this.allSteps.length;s++){const y=this.allSteps[s];y.character&&y.character.name===o&&(y.character.name=e,y.character.color=i,a++,p&&p(a,n),a%10===0&&await new Promise(r=>setTimeout(r,10)))}this.saveToLocalStorage(),l&&await l({success:!0,updatedCount:a,message:`"${o}" â†’ "${e}"
${a}ê°œ ìŠ¤í…ì˜ ìºë¦­í„° ì •ë³´ê°€ ì¼ê´„ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`})},async handleBulkUpdateImage({oldUrl:o,newUrl:e,onProgress:i,onComplete:p}){var s,y;let l=0,a=0;const n=this.logStore.vnData;if(n.characters&&Object.values(n.characters).forEach(r=>{r.avatarUrl===o&&a++}),n.scenes&&n.scenes.forEach(r=>{var _;(_=r.steps)==null||_.forEach(b=>{var C,x;((C=b.effects)==null?void 0:C.background)===o&&a++,((x=b.illustration)==null?void 0:x.imageUrl)===o&&a++})}),n.handouts&&n.handouts.forEach(r=>{r.imageUrl===o&&a++}),n.characters)for(const r in n.characters){const _=n.characters[r];_.avatarUrl===o&&(_.avatarUrl=e,l++,i&&i(l,a),l%10===0&&await new Promise(b=>setTimeout(b,10)))}if(n.scenes)for(let r=0;r<n.scenes.length;r++){const _=n.scenes[r];if(_.steps)for(let b=0;b<_.steps.length;b++){const C=_.steps[b];((s=C.effects)==null?void 0:s.background)===o&&(C.effects.background=e,l++,i&&i(l,a)),((y=C.illustration)==null?void 0:y.imageUrl)===o&&(C.illustration.imageUrl=e,l++,i&&i(l,a)),l%10===0&&await new Promise(x=>setTimeout(x,10))}}if(n.handouts)for(let r=0;r<n.handouts.length;r++){const _=n.handouts[r];_.imageUrl===o&&(_.imageUrl=e,l++,i&&i(l,a),l%10===0&&await new Promise(b=>setTimeout(b,10)))}this.saveToLocalStorage(),p&&await p({success:!0,updatedCount:l,message:`ì´ë¯¸ì§€ URLì´ ì¼ê´„ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.
ì´ ${l}ê°œ í•­ëª©ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.`})},hasEffects(o){return o.effects&&(o.effects.sfx||o.effects.bgm||o.effects.background)},truncateText(o,e){return o?o.length>e?o.substring(0,e)+"...":o:""},scrollToTargetStep(){const o=sessionStorage.getItem("editor-target-step");if(o){const e=parseInt(o,10);if(e>=1&&e<=this.totalSteps){const i=e-1;this.$nextTick(()=>{this.selectStep(i);const p=document.querySelectorAll(".step-item");p[i]&&p[i].scrollIntoView({behavior:"smooth",block:"center"})})}sessionStorage.removeItem("editor-target-step")}}},mounted(){if(!this.logStore.vnData){this.$router.push("/");return}this.scrollToTargetStep()}},Gl={class:"editor-view"},Jl={class:"editor-container"},Ll={class:"editor-header"},Bl={class:"header-actions"},Pl={class:"editor-content"},Fl={class:"steps-list"},Ml={class:"list-header"},Xl={class:"list-body"},ql=["onClick"],Hl={class:"step-number"},Yl={class:"step-info"},Kl={class:"step-character"},Ql={class:"step-text"},Wl={key:0,class:"step-effects-tags"},Zl={key:0,class:"effect-tag sfx"},$l={key:1,class:"effect-tag bgm"},eo={key:2,class:"effect-tag bg"},to={class:"editor-panel"},so={class:"tab-header"},lo={class:"tab-content"},oo={key:0,class:"tab-pane"},ao={key:1,class:"tab-pane"},io={key:2,class:"tab-pane"},no={key:3,class:"tab-pane"};function ro(o,e,i,p,l,a){const n=D("EmojiToIcon"),s=D("StepInfoEditor"),y=D("StepEffectsEditor"),r=D("CharacterBulkEditor"),_=D("ImageBulkEditor");return d(),c("div",Gl,[t("div",Jl,[t("header",Ll,[t("button",{onClick:e[0]||(e[0]=(...b)=>a.goBack&&a.goBack(...b)),class:"back-button"},[u(n,{emoji:"â¬…ï¸",size:20})]),t("h2",null,[u(n,{emoji:"âœï¸",size:24}),e[11]||(e[11]=v(" ë¡œê·¸ í¸ì§‘ê¸° ",-1))]),t("div",Bl,[t("button",{onClick:e[1]||(e[1]=(...b)=>a.exportJSON&&a.exportJSON(...b)),class:"export-button"},[u(n,{emoji:"ğŸ“¤",size:18}),e[12]||(e[12]=v(" JSON ë‚´ë³´ë‚´ê¸° ",-1))]),t("button",{onClick:e[2]||(e[2]=(...b)=>a.saveAndPlay&&a.saveAndPlay(...b)),class:"save-button"},[u(n,{emoji:"â–¶ï¸",size:18}),e[13]||(e[13]=v(" ì¬ìƒí•˜ê¸° ",-1))])])]),t("div",Pl,[t("div",Fl,[t("div",Ml,[t("h3",null,"ìŠ¤í… ëª©ë¡ ("+g(a.totalSteps)+"ê°œ)",1)]),t("div",Xl,[(d(!0),c(k,null,w(a.allSteps,(b,C)=>(d(),c("div",{key:b.id,class:S(["step-item",{"has-effects":a.hasEffects(b),selected:l.selectedStepIndex===C}]),onClick:x=>a.selectStep(C)},[t("div",Hl,g(C+1),1),t("div",Yl,[t("div",Kl,g(b.character.name||"ì‹œìŠ¤í…œ"),1),t("div",Ql,g(a.truncateText(b.text,50)),1),a.hasEffects(b)?(d(),c("div",Wl,[b.effects.sfx?(d(),c("span",Zl,[u(n,{emoji:"ğŸ”Š",size:12})])):m("",!0),b.effects.bgm?(d(),c("span",$l,[u(n,{emoji:"ğŸµ",size:12})])):m("",!0),b.effects.background?(d(),c("span",eo,[u(n,{emoji:"ğŸ–¼ï¸",size:12})])):m("",!0)])):m("",!0)])],10,ql))),128))])]),t("div",to,[t("div",so,[t("button",{class:S(["tab-button",{active:l.activeTab==="info"}]),onClick:e[3]||(e[3]=b=>l.activeTab="info")},[u(n,{emoji:"ğŸ“",size:16}),e[14]||(e[14]=v(" ì •ë³´ ìˆ˜ì • ",-1))],2),t("button",{class:S(["tab-button",{active:l.activeTab==="effects"}]),onClick:e[4]||(e[4]=b=>l.activeTab="effects")},[u(n,{emoji:"âœ¨",size:16}),e[15]||(e[15]=v(" íš¨ê³¼ í¸ì§‘ ",-1))],2),t("button",{class:S(["tab-button",{active:l.activeTab==="characters"}]),onClick:e[5]||(e[5]=b=>l.activeTab="characters")},[u(n,{emoji:"ğŸ‘¥",size:16}),e[16]||(e[16]=v(" ìºë¦­í„° ì¼ê´„í¸ì§‘ ",-1))],2),t("button",{class:S(["tab-button",{active:l.activeTab==="images"}]),onClick:e[6]||(e[6]=b=>l.activeTab="images")},[u(n,{emoji:"ğŸ–¼ï¸",size:16}),e[17]||(e[17]=v(" ì´ë¯¸ì§€ ì¼ê´„í¸ì§‘ ",-1))],2)]),t("div",lo,[l.activeTab==="info"?(d(),c("div",oo,[u(s,{"step-data":a.selectedStep,onSave:a.handleSaveStepInfo,onDelete:a.handleDeleteStep,onDuplicate:a.handleDuplicateStep,onClose:e[7]||(e[7]=b=>l.activeTab="effects")},null,8,["step-data","onSave","onDelete","onDuplicate"])])):m("",!0),l.activeTab==="effects"?(d(),c("div",ao,[u(y,{"total-steps":a.totalSteps,"selected-step":l.selectedStepIndex!==null?l.selectedStepIndex+1:null,"current-effects":a.selectedStepEffects,onApply:a.handleApplyEffects,onRemove:a.handleRemoveEffects,onClose:e[8]||(e[8]=b=>l.activeTab="info")},null,8,["total-steps","selected-step","current-effects","onApply","onRemove"])])):m("",!0),l.activeTab==="characters"?(d(),c("div",io,[u(r,{"all-steps":a.allSteps,onBulkUpdate:a.handleBulkUpdateCharacter,onClose:e[9]||(e[9]=b=>l.activeTab="info")},null,8,["all-steps","onBulkUpdate"])])):m("",!0),l.activeTab==="images"?(d(),c("div",no,[u(_,{"vn-data":p.logStore.vnData,onBulkUpdate:a.handleBulkUpdateImage,onClose:e[10]||(e[10]=b=>l.activeTab="info")},null,8,["vn-data","onBulkUpdate"])])):m("",!0)])])])])])}const po=V(Al,[["render",ro],["__scopeId","data-v-1ac6e006"]]);export{po as default};
