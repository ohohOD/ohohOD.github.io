import{u as B}from"./logStore-Bu_Vbhwy.js";import{_ as W,c as U,a as D,b as q,d as H,r as G,n as _,e as X,t as j,o as J}from"./index-CpR_-4mG.js";class z{static parseHTMLLog(e){const n=new DOMParser().parseFromString(e,"text/html"),t={title:"ì½”ì½”í¬ë¦¬ì•„ ë¡œê·¸",scenes:[],characters:{},handouts:[]},r=n.querySelectorAll(".ccl_tab");if(r.length>0)r.forEach((i,o)=>{const l=this.parseScene(i,o);l.steps.length>0&&t.scenes.push(l),this.collectCharacters(i,t.characters)});else{const i=n.querySelector(".ccfolia_wrap")||n.body,o=this.parseSceneFlat(i);o.steps.length>0&&t.scenes.push(o),this.collectCharactersFlat(i,t.characters)}return t}static parseScene(e,s){const n=e.querySelector(".ccl_tabtitle"),t=n?n.textContent.trim():`ì”¬ ${s+1}`,r={id:`scene_${s}`,name:t,description:null,steps:[]},i=e.querySelectorAll(".ccl_player");let o=0;return i.forEach(l=>{const g=this.parseStep(l,s,o);g&&g.length>0&&g.forEach(m=>{r.steps.push(m),o++})}),r}static parseStep(e,s,n){const t=e.classList.contains("system"),r=e.classList.contains("narrator"),i=e.querySelector(".ccl_Uname"),o=e.querySelector(".ccl_Utext"),l=e.querySelector(".ccl_imgWrap img");if(!o)return null;const g=i?i.textContent.trim():"",m=i?this.extractColor(i):"var(--text-color)",d=o.innerHTML.trim(),I=l?l.getAttribute("src"):null,u=/^ì”¬\s+(\d+)::\s*(.+?)(?:\s*\(([^)]+)\))?\s*(?:<br|$)/i,y=d.match(u);if(y){const c=y[1],T=y[2]?y[2].trim():"",f=y[3]?y[3].trim():null;let b="";const p=d.indexOf("<br>");return p!==-1&&(b=this.cleanText(d.substring(p+4))),console.log("Scene Description Parsed:",{sceneNumber:c,sceneTitle:T,scenePCs:f,sceneDescription:b,rawHTML:d.substring(0,100)}),[{id:`scene_${s}_desc_${n}`,type:"scene-description",character:{name:g,color:m},text:this.cleanText(d),rawText:d,isSceneDescription:!0,sceneNumber:c,sceneTitle:T,scenePCs:f,sceneDescription:b,avatarUrl:I}]}const N=this.splitByBreaks(d),S=[];return N.forEach((c,T)=>{if(!c.trim())return;const{rolls:f,ougis:b,shinobigamis:p}=this.extractDiceRolls(c),a=this.extractStatusChanges(c),h=this.extractDXCombo(c);let C=c;if((f.length>0||b.length>0||p.length>0||a.length>0||h.length>0)&&(C=this.removeDiceCommands(c)),!this.cleanText(C).trim())if(b.length>0)C="* ì˜¤ì˜";else if(p.length>0)C="* ì¸ë²•";else if(f.length>0){const M=f.some(x=>x.type==="judgement"),P=f.some(x=>x.type==="choice");M?C="* íŒì •":P?C="* ì„ íƒ":C="* ë‹¤ì´ìŠ¤"}else a.length>0?C="* ìƒíƒœ ë³€í™”":h.length>0&&(h.length>1||h[0].effects&&h[0].effects.length>1?C="* ì½¤ë³´":C="* ì´í™íŠ¸");const v={id:`step_${s}_${n+T}`,type:t?"system":r?"narrator":"dialogue",character:{name:g,color:m,avatarUrl:I},text:this.cleanText(C),rawText:c,diceRolls:f,hasDice:f.length>0,ougis:b,hasOugi:b.length>0,shinobigamis:p,hasShinobigami:p.length>0,statusChanges:a,hasStatusChange:a.length>0,dxCombos:h,hasDXCombo:h.length>0,effects:{sfx:null,bgm:null,background:null,backgroundOpacity:.3}};S.push(v)}),S.length>0?S:null}static splitByBreaks(e){return e.split(/<br[^>]*\/?>/gi).map(s=>s.trim()).filter(s=>s.length>0)}static parseSceneFlat(e){const s={id:"scene_0",name:"ë¡œê·¸",description:null,steps:[]},n=e.querySelectorAll(".gap");let t=0;return n.forEach(r=>{const i=this.parseStepFlat(r,0,t);i&&i.length>0&&i.forEach(o=>{s.steps.push(o),t++})}),s}static parseStepFlat(e,s,n){const t=e.querySelector("p");if(!t)return null;if((e.getAttribute("style")||"").includes("display: flow-root"))return this.parseFlowRootStep(t,s,n);const o=e.querySelector(".msg_container img"),l=t.querySelectorAll("span");let g="",m="var(--text-color)",d="";l.forEach(c=>{var T;window.getComputedStyle||c.style.fontWeight,(c.style.fontWeight==="bold"||(T=c.getAttribute("style"))!=null&&T.includes("font-weight: bold"))&&(g||(g=c.textContent.trim(),m=this.extractColorFromStyle(c.getAttribute("style"))||"var(--text-color)"))});const I=t.innerHTML,u=I.indexOf("<br>");if(u!==-1&&(d=I.substring(u+4).trim()),!d)return null;const y=o?o.getAttribute("src"):null,N=this.splitByBreaks(d),S=[];return N.forEach((c,T)=>{if(!c.trim())return;const{rolls:f,ougis:b,shinobigamis:p}=this.extractDiceRolls(c),a=this.extractStatusChanges(c);let h=c;if((f.length>0||b.length>0||p.length>0||a.length>0)&&(h=this.removeDiceCommands(c)),!this.cleanText(h).trim()){if(b.length>0)h="* ì˜¤ì˜";else if(p.length>0)h="* ì¸ë²•";else if(f.length>0){const M=f.some(w=>w.type==="judgement"),P=f.some(w=>w.type==="choice"),x=f.some(w=>w.type==="table");M?h="* íŒì •":x?h="* ì¥ë©´í‘œ":P?h="* ì„ íƒ":h="* ë‹¤ì´ìŠ¤"}}a.length>0&&!this.cleanText(h).trim()&&(h="* ìƒíƒœ ë³€í™”");const C=this.extractDXCombo(c);C.length>0&&!this.cleanText(h).trim()&&(C.length>1||C[0].effects&&C[0].effects.length>1?h="* ì½¤ë³´":h="* ì´í™íŠ¸");const v={id:`step_${s}_${n+T}`,type:g==="GM"?"narrator":"dialogue",character:{name:g,color:m,avatarUrl:y},text:this.cleanText(h),rawText:c,diceRolls:f,hasDice:f.length>0,ougis:b,hasOugi:b.length>0,shinobigamis:p,hasShinobigami:p.length>0,statusChanges:a,hasStatusChange:a.length>0,dxCombos:this.extractDXCombo(c),hasDXCombo:this.extractDXCombo(c).length>0,effects:{sfx:null,bgm:null,background:null,backgroundOpacity:.3}};S.push(v)}),S.length>0?S:null}static collectCharacters(e,s){e.querySelectorAll(".ccl_player:not(.system):not(.narrator)").forEach(t=>{const r=t.querySelector(".ccl_Uname"),i=t.querySelector(".ccl_imgWrap img");if(r){const o=r.textContent.trim(),l=this.extractColor(r),g=i?i.getAttribute("src"):null;o&&!s[o]&&(s[o]={id:`char_${Object.keys(s).length}`,name:o,color:l,avatarUrl:g,emotions:{default:g}})}})}static parseFlowRootStep(e,s,n){const t=e.querySelectorAll("span");let r="",i="var(--text-color)",o="",l=!1;if(t.forEach((S,c)=>{const T=S.getAttribute("style")||"",f=S.textContent.trim();if(T.includes("background: black")||T.includes("background:black")){l=!0;const b=f.split(" - ");b.length>=1&&(r=b[0].trim())}if(!i||i==="var(--text-color)"){const b=this.extractColorFromStyle(T);b&&!T.includes("background: black")&&(i=b)}f&&!T.includes("background: black")&&!T.includes("background:black")&&(f.includes("cc")||f.includes("CHOICE")||f.includes("choice")||f.includes("ï¼"))&&(o=f)}),!r){const c=e.textContent.trim().match(/^([^-]+)\s*-\s*íŒì •/);c&&(r=c[1].trim())}if(!o){const S=e.textContent.trim();if(l){const c=S.split(/íŒì •\s*/);c.length>1&&(o=c[1].trim())}o||(o=S)}if(o=o.replace(/^[^-]+-\s*íŒì •\s*/,"").trim(),!o)return null;const{rolls:g,ougis:m,shinobigamis:d}=this.extractDiceRolls(o),I=this.extractStatusChanges(o);let u=o;if((g.length>0||m.length>0||d.length>0||I.length>0)&&(u=this.removeDiceCommands(o)),(g.length>0||m.length>0||d.length>0)&&!u.trim())if(m.length>0)u="* ì˜¤ì˜";else if(d.length>0)u="* ì¸ë²•";else{const S=g.some(f=>f.type==="judgement"),c=g.some(f=>f.type==="choice"),T=g.some(f=>f.type==="table");S?u="* íŒì •":T?u="* ì¥ë©´í‘œ":c?u="* ì„ íƒ":u="* ë‹¤ì´ìŠ¤"}I.length>0&&!u.trim()&&(u="* ìƒíƒœ ë³€í™”");const y=this.extractDXCombo(o);return y.length>0&&!u.trim()&&(y.length>1||y[0].effects&&y[0].effects.length>1?u="* ì½¤ë³´":u="* ì´í™íŠ¸"),[{id:`step_${s}_${n}`,type:"system",character:{name:r||"ì‹œìŠ¤í…œ",color:i,avatarUrl:null},text:this.cleanText(u),rawText:o,diceRolls:g,hasDice:g.length>0,ougis:m,hasOugi:m.length>0,shinobigamis:d,hasShinobigami:d.length>0,statusChanges:I,hasStatusChange:I.length>0,dxCombos:y,hasDXCombo:y.length>0,effects:{sfx:null,bgm:null,background:null}}]}static collectCharactersFlat(e,s){e.querySelectorAll(".gap").forEach(t=>{const r=t.querySelector(".msg_container img"),i=t.querySelector("p");if(i){const o=i.querySelectorAll("span");let l="",g="var(--text-color)";if(o.forEach(m=>{var d;(m.style.fontWeight==="bold"||(d=m.getAttribute("style"))!=null&&d.includes("font-weight: bold"))&&(l||(l=m.textContent.trim(),g=this.extractColorFromStyle(m.getAttribute("style"))||"var(--text-color)"))}),l&&!s[l]){const m=r?r.getAttribute("src"):null;s[l]={id:`char_${Object.keys(s).length}`,name:l,color:g,avatarUrl:m,emotions:{default:m}}}}})}static extractColorFromStyle(e){if(!e)return null;const s=e.match(/color:\s*rgb\(([^)]+)\)/);if(s)return`rgb(${s[1]})`;const n=e.match(/color:\s*(#[0-9a-fA-F]{3,6})/);return n?n[1]:null}static extractColor(e){const s=e.getAttribute("style");if(s){const n=s.match(/color:\s*([^;]+)/);if(n)return n[1].trim()}return"var(--text-color)"}static extractDXCombo(e){const s=[],n=/(?:(\d+)[â†‘â†“])?\s*([^ã€Š\|]+?)?\s*ã€ŠC:([^ã€‹]+)ã€‹(?:\s*\|\s*([^\|]+)\s*\|\s*([^\|]+)\s*\|\s*(.+?))?(?:<br\s*\/?>|\n)?(?:\s*(\d+dx\d*(?:\+\d+)?)\s*\(([^)]+)\)\s*[ï¼>]\s*([^\sï¼>]+)\s*[ï¼>]\s*(\d+))?(?:<br\s*\/?>|$)/gim;let t;for(;(t=n.exec(e))!==null;){const o=t[1]?parseInt(t[1],10):null,l=t[2]?t[2].trim():"",g=t[3].trim(),m=t[4]?t[4].trim():"",d=t[5]?t[5].trim():"",I=t[6]?t[6].trim():"",u=t[7],y=t[8],N=t[9],S=t[10],c=[];if(g.split("+").forEach(f=>{const b=f.trim().match(/(.+?)\((\d+)\)/);b&&c.push({name:b[1].trim(),level:parseInt(b[2],10)})}),c.length>0){const f=m.split("/").map(x=>x.trim()),b=f[0]||"",p=f[1]||"",a=d.split("/").map(x=>x.trim()),h=(a[0]||"").replace(/^ë‹¤ì´ìŠ¤\s*/i,""),C=(a[1]||"").replace(/^í¬ë¦¬ì¹˜\s*/i,""),v=(a[2]||"").replace(/^ê³µê²©ë ¥\s*/i,""),M=(a[3]||"").replace(/^ì¹¨ì‹\s*/i,"");let P=null;u&&S&&(P={type:"dx3",formula:u.toUpperCase(),fullFormula:y,diceRolls:N,result:parseInt(S,10)}),s.push({type:"dx-combo",isSingleEffect:c.length===1,comboName:l,effects:c,erosionCost:o,timing:b,difficulty:p,dice:h,critical:C,attack:v,erosion:M,description:I,diceRoll:P,rawText:t[0]})}}const r=/ã€Š([^ã€‹]+)ã€‹\s*Lv(\d+)\s*\|\s*([^\|]+)\s*\|\s*([^\|]+)\s*\|\s*([^\|]+)\s*\|\s*([^\|]+)\s*\|\s*([^\|]+)(?:\s*\|\s*(.+?))?(?:<br\s*\/?>|\n)?(?:\s*(\d+dx\d*(?:\+\d+)?)\s*\(([^)]+)\)\s*[ï¼>]\s*([^\sï¼>]+)\s*[ï¼>]\s*(\d+))?(?:<br\s*\/?>|$)/gim;for(;(t=r.exec(e))!==null;){const o=t[1].trim(),l=parseInt(t[2],10),g=t[3].trim(),m=t[4].trim(),d=t[5].trim(),I=t[6].trim(),u=t[7].trim(),y=t[8]?t[8].trim():"",N=t[9],S=t[10],c=t[11],T=t[12];let f=null;N&&T&&(f={type:"dx3",formula:N.toUpperCase(),fullFormula:S,diceRolls:c,result:parseInt(T,10)}),s.push({type:"dx-effect",isSingleEffect:!0,effects:[{name:o,level:l}],timing:g,difficulty:m,target:d,range:I,description:u,erosion:y,diceRoll:f,rawText:t[0]})}const i=/(?:(\d+)[â†‘â†“])?\s*([^\|ã€Š]+?)?\s*(ã€Š[^ã€‹]+ã€‹(?:\s*\+\s*ã€Š[^ã€‹]+ã€‹)+)\s*(?:\|\s*([^\|]+)\s*\|\s*([^\|]+)\s*\|\s*(.+?))?(?:<br\s*\/?>|\n)?(?:\s*(\d+dx\d*(?:\+\d+)?)\s*\(([^)]+)\)\s*[ï¼>]\s*([^\sï¼>]+)\s*[ï¼>]\s*(\d+))?(?:<br\s*\/?>|$)/gim;for(;(t=i.exec(e))!==null;){const o=t[1]?parseInt(t[1],10):null,l=t[2]?t[2].trim():"",g=t[3],m=t[4]?t[4].trim():"",d=t[5]?t[5].trim():"",I=t[6]?t[6].trim():"",u=t[7],y=t[8],N=t[9],S=t[10],c=[],T=g.match(/ã€Š([^ã€‹]+)ã€‹/gi);T&&T.forEach(x=>{const w=x.match(/ã€Š(.+?)\((\d+)\)ã€‹/);w&&c.push({name:w[1].trim(),level:parseInt(w[2],10)})});const f=m.split("/").map(x=>x.trim()),b=f[0]||"",p=f[1]||"",a=d.split("/").map(x=>x.trim()),h=(a[0]||"").replace(/^ë‹¤ì´ìŠ¤\s*/i,""),C=(a[1]||"").replace(/^í¬ë¦¬ì¹˜\s*/i,""),v=(a[2]||"").replace(/^ê³µê²©ë ¥\s*/i,""),M=(a[3]||"").replace(/^ì¹¨ì‹\s*/i,"");let P=null;u&&S&&(P={type:"dx3",formula:u.toUpperCase(),fullFormula:y,diceRolls:N,result:parseInt(S,10)}),c.length>1&&s.push({type:"dx-combo",isSingleEffect:!1,comboName:l,effects:c,erosionCost:o,timing:b,difficulty:p,dice:h,critical:C,attack:v,erosion:M,description:I,diceRoll:P,rawText:t[0]})}return s}static extractStatusChanges(e){const s=[],n=/\[\s*([^\]]+)\s*\]\s*([^:ï¼š]+)\s*[ï¼š:]\s*(\d+)\s*[â†’>]\s*(\d+)/gi;let t;for(;(t=n.exec(e))!==null;){const r=t[1].trim(),i=t[2].trim(),o=parseInt(t[3],10),l=parseInt(t[4],10);s.push({characterName:r,statusName:i,oldValue:o,newValue:l,delta:l-o})}return s}static extractDiceRolls(e){const s=[],n=[],t=[];e.includes("SG@")&&e.includes("ã€")&&console.log("[DEBUG] Shinobigami text detected:",e.substring(0,100));const r=/([^ã€Š<]+?)\s*ã€Š([^ã€‹]+)ã€‹\s*\|\s*((?:(?!ã€Š).)+?)ã€ì˜¤ì˜:\s*([^ã€‘]+)ã€‘/gi;let i;for(;(i=r.exec(e))!==null;){const p=i[1].trim(),a=i[2].trim(),h=i[3].trim(),C=i[4].trim(),v=h.split("|").map(w=>w.trim()).filter(w=>w);let M="",P="",x="";v.length>=3?(M=v[0],P=v.slice(1,-1).join(" | "),x=v[v.length-1]):v.length===2?(M=v[0],x=v[1]):v.length===1&&(M=v[0]),n.push({type:"ougi",ougiName:p,skills:a.split(/[,ã€]/).map(w=>w.trim()),presentation:M,ougiEffect:P,ninpouInfo:x,ougiType:C})}const o=/(?:CHOICE|choice)\[([^\]]+)\]\s*(?:\([^)]*\))?\s*[ï¼>]\s*(.+?)(?:<|$)/gi;let l;for(;(l=o.exec(e))!==null;){const p=l[1].split(",").map(h=>h.trim()),a=l[2].trim();s.push({type:"choice",options:p,result:a,formula:`CHOICE[${p.join(",")}]`})}const g=/(?:CHOICE|choice)\s+([^(]+?)\s*\((?:CHOICE|choice)\s+[^)]+\)\s*[ï¼>]\s*(.+?)(?:<|$)/gi;for(;(l=g.exec(e))!==null;){const p=l[1].trim(),a=l[2].trim(),h=p.split(/[,\u3001]/).map(C=>C.trim()).filter(C=>C);h.length===0&&h.push(p),s.push({type:"choice",options:h,result:a,formula:`CHOICE[${h.join(",")}]`})}const m=/(\d*[A-Z]+[+\-]?\d*@\d+(?:#\d+)?(?:[+\-]\d+)?(?:(?:&gt;|&lt;|[<>=])+\d+)?)\s*\|\s*ã€([^ã€‘]+)ã€‘([^(]*?)\(([^)]+)\)\s*[ï¼>]\s*(.+?)(?=<|$)/gi,d=[];for(;(l=m.exec(e))!==null;){console.log("[DEBUG] Shinobigami match found:",{command:l[1],checkName:l[2],additionalInfo:l[3],formula:l[4],resultText:l[5]});const p=l[3].trim(),a=l[5],h=a.split(/\s*[ï¼>]\s*/),C=h[h.length-1].trim();let v="",M="",P=0;const x=a.match(/\[([^\]]+)\]\s*[ï¼>]\s*(\d+)\[([^\]]+)\](?:[+\-]\d+)?\s*[ï¼>]\s*(\d+)/);if(x)M=x[1],v=`${x[2]}[${x[3]}]`,P=parseInt(x[4],10);else{const k=a.match(/(\d+\[[^\]]+\](?:[+\-]\d+)?)\s*[ï¼>]\s*(\d+)/);if(k){v=k[1];const F=v.match(/\[([^\]]+)\]/);M=F?F[1]:"",P=parseInt(k[2],10)}}const w=this.parseShinobiAdditionalInfo(p),E={type:"shinobigami",command:l[1],checkName:l[2],additionalInfo:w,formula:l[4],diceRolls:M,diceExpression:v,result:P,judgement:C};console.log("[DEBUG] Pushing shinobigami:",E),t.push(E),d.push(l[0])}const I=/\((\d*[A-Z]+[+\-]?\d*@\d+(?:#\d+)?(?:[+\-]\d+)?(?:(?:&gt;|&lt;|[<>=])+\d+)?)\)\s*[ï¼>]\s*(.+?)(?=<|$)/gi;for(;(l=I.exec(e))!==null;){if(d.some(w=>w.includes(l[0])))continue;const a=l[2],h=a.split(/\s*[ï¼>]\s*/),C=h[h.length-1].trim();let v="",M="",P=0;const x=a.match(/(\d+\[[^\]]+\](?:[+\-]\d+)?)\s*[ï¼>]\s*(\d+)/);if(x){v=x[1];const w=v.match(/\[([^\]]+)\]/);M=w?w[1]:"",P=parseInt(x[2],10)}t.push({type:"shinobigami",command:l[1],checkName:"íŒì •",additionalInfo:null,formula:l[1],diceRolls:M,diceExpression:v,result:P,judgement:C}),d.push(l[0])}const u=/([^\dï¼>]+)\s+(\d+[dD]\d+)\s+([^(ï¼>]+)\((\d+)\)\s*[ï¼>]\s*(.+?)(?=<|$)/gi,y=[];for(;(l=u.exec(e))!==null;)s.push({type:"table",command:l[2],checkName:l[1].trim(),formula:`${l[2]} ${l[3].trim()}`,options:[],result:l[5].trim(),diceResult:parseInt(l[4],10)}),y.push(l[0]);const N=/([A-Z]+)\s*\|\s*ã€([^ã€‘]+)ã€‘\s*([^ï¼>]*)\s*[ï¼>]\s*(.+?)(?=<|$)/gi;for(;(l=N.exec(e))!==null;)l[0].includes("[")||s.push({type:"choice",command:l[1],checkName:l[2],formula:`${l[1]} ${l[3].trim()}`,options:[],result:l[4].trim()});const S=/(cc[<>=]+\d+)\s+(.+?)\((\d+[dD]\d+[<>=]+\d+)\)\s*.*?[ï¼>]\s*(\d+)(?:\s*[ï¼>]\s*\d+)*\s*[ï¼>]\s*(.+?)$/gi;for(;(l=S.exec(e))!==null;)d.some(a=>a.includes(l[0]))||s.push({type:"judgement",command:l[1],checkName:l[2].trim(),formula:l[3],result:parseInt(l[4],10),judgement:l[5].trim()});const c=/(\d+dx\d*(?:\+\d+)?)\s*\(([^)]+)\)\s*[ï¼>]\s*([^\sï¼>]+)\s*[ï¼>]\s*(\d+)/gi;for(;(l=c.exec(e))!==null;)s.push({type:"dx3",formula:l[1].toUpperCase(),fullFormula:l[2],diceRolls:l[3],result:parseInt(l[4],10)});const T=/((?:\d+[dD]\d+[+\-]?)+)\s*\([^)]+\)\s*[ï¼>]\s*([^\sï¼>]+)\s*[ï¼>]\s*(\d+)/gi,f=[];for(;(l=T.exec(e))!==null;){const p=l[1];p.toLowerCase().includes("dx")||(s.push({type:"detailed",formula:p.toUpperCase(),diceRolls:l[2],result:parseInt(l[3],10)}),f.push(l[0]))}const b=/(\d+[dD]\d+)\s*(?:\([^)]+\))?\s*[ï¼>]\s*(\d+)/gi;for(;(l=b.exec(e))!==null;){const p=l[1],a=l[0],h=f.some(v=>v.includes(a)),C=y.some(v=>v.includes(a));!p.toLowerCase().includes("dx")&&!h&&!C&&s.push({type:"normal",formula:p.toUpperCase(),result:parseInt(l[2],10)})}return console.log("[DEBUG] extractDiceRolls result:",{rollsCount:s.length,ougisCount:n.length,shinobigamisCount:t.length}),{rolls:s,ougis:n,shinobigamis:t}}static parseShinobiAdditionalInfo(e){if(!e||!e.trim())return null;const s=e.split("|").map(t=>t.trim()).filter(t=>t);if(s.length===0)return null;const n={type:null,range:null,cost:null,skill:null,description:null};return s.forEach((t,r)=>{r===0&&t.includes("ì¸ë²•")?n.type=t:t.includes("ê°„ê²©")?n.range=t:t.includes("ì½”ìŠ¤íŠ¸")?n.cost=t:t.includes("ã€Š")&&t.includes("ã€‹")?n.skill=t:n.description?n.description+=" | "+t:n.description=t}),n}static cleanText(e){return e.replace(/<br\s*\/?>/gi,`
`).replace(/<[^>]+>/g,"").trim()}static removeDiceCommands(e){console.log("[DEBUG] removeDiceCommands input:",e.substring(0,100));let s=e;return s=s.replace(/[^ã€Š<]+?\s*ã€Š[^ã€‹]+ã€‹\s*\|(?:(?!ã€Š).)+?ã€ì˜¤ì˜:[^ã€‘]+ã€‘/gi,""),s=s.replace(/(?:CHOICE|choice)\[[^\]]+\]\s*(?:\([^)]*\))?\s*[ï¼>]\s*.+?(?=<|$)/gi,""),s=s.replace(/(?:CHOICE|choice)\s+[^(]+?\s*\((?:CHOICE|choice)\s+[^)]+\)\s*[ï¼>]\s*.+?(?=<|$)/gi,""),s=s.replace(/[^\dï¼>]+\s+\d+[dD]\d+\s+[^(ï¼>]+\(\d+\)\s*[ï¼>]\s*.+?(?=<|$)/gi,""),s=s.replace(/\d*[A-Z]+[+\-]?\d*@\d+(?:#\d+)?(?:[+\-]\d+)?(?:(?:&gt;|&lt;|[<>=])+\d+)?\s*\|\s*ã€[^ã€‘]+ã€‘.*?\([^)]+\)\s*[ï¼>]\s*.+?(?=<|$)/gi,""),s=s.replace(/\(\d*[A-Z]+[+\-]?\d*@\d+(?:#\d+)?(?:[+\-]\d+)?(?:(?:&gt;|&lt;|[<>=])+\d+)?\)\s*[ï¼>]\s*.+?(?=<|$)/gi,""),s=s.replace(/[A-Z]+\s*\|\s*ã€[^ã€‘]+ã€‘\s*[^ï¼>\[]*\s*[ï¼>]\s*[^\[<]+?(?=<|$)/gi,""),s=s.replace(/(cc[<>=]+\d+)\s+(.*?)\((\d+D\d+[<>=]+\d+)\)\s*[^ï¼>]*?ï¼\s*\d+(?:\s*ï¼\s*\d+)*\s*ï¼\s*.+?$/gi,""),s=s.replace(/(\d+dx\d*(?:\+\d+)?)\s*\([^)]+\)\s*[ï¼>]\s*[^\sï¼>]+\s*[ï¼>]\s*\d+/gi,""),s=s.replace(/((?:\d+[dD]\d+[+\-]?)+)\s*\([^)]+\)\s*[ï¼>]\s*[^\sï¼>]+\s*[ï¼>]\s*\d+/gi,""),s=s.replace(/(\d+[dD]\d+)\s*(?:\([^)]+\))?\s*[ï¼>]\s*\d+/gi,""),s=s.replace(/\[\s*[^\]]+?\s*\]\s*[^:ï¼š\n]+?\s*[ï¼š:]\s*\d+\s*[â†’>]\s*\d+/g,""),s=s.replace(/ã€Š[^ã€‹]+ã€‹\s*Lv\d+\s*(?:\|[^\n<]*)+(?:(?:<br\s*\/?>\s*|\n)\d+dx\d*(?:\+\d+)?\s*\([^)]+\)\s*[ï¼>]\s*[^\sï¼>]+\s*[ï¼>]\s*\d+)?/gi,""),s=s.replace(/(?:\d+[â†‘â†“])?\s*[^\|ã€Š\n]*?\s*ã€Š[^ã€‹]+ã€‹(?:\s*\+\s*ã€Š[^ã€‹]+ã€‹)*\s*(?:\|[^\n<]*){0,3}(?:(?:<br\s*\/?>\s*|\n)\d+dx\d*(?:\+\d+)?\s*\([^)]+\)\s*[ï¼>]\s*[^\sï¼>]+\s*[ï¼>]\s*\d+)?/gi,""),s=s.replace(/ã€ŠC:[^ã€‹]+ã€‹(?:\s*\|[^\n<]*)*(?:(?:<br\s*\/?>\s*|\n)\d+dx\d*(?:\+\d+)?\s*\([^)]+\)\s*[ï¼>]\s*[^\sï¼>]+\s*[ï¼>]\s*\d+)?/gi,""),s=s.replace(/ã€Š[^ã€‹]+ã€‹(?:\s*\+\s*ã€Š[^ã€‹]+ã€‹)+(?:(?:<br\s*\/?>\s*|\n)\d+dx\d*(?:\+\d+)?\s*\([^)]+\)\s*[ï¼>]\s*[^\sï¼>]+\s*[ï¼>]\s*\d+)?/gi,""),s=s.replace(/^(<br\s*\/?>|\s)+$/gi,""),console.log("[DEBUG] removeDiceCommands output:",s.substring(0,100)),s.trim()}static parseTextLog(e){return console.warn("í”Œë ˆì¸ í…ìŠ¤íŠ¸ íŒŒì‹±ì€ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."),{title:"í…ìŠ¤íŠ¸ ë¡œê·¸",scenes:[{id:"scene_0",name:"ë¡œê·¸",steps:[{id:"step_0_0",type:"narrator",character:{name:"",color:"#333"},text:e,rawText:e,diceRolls:[],hasDice:!1}]}],characters:{},handouts:[]}}static parseRoll20Log(e){console.log("[Roll20 Parser] Starting parse..."),console.log("[Roll20 Parser] Content length:",e.length);const n=new DOMParser().parseFromString(e,"text/html");console.log("[Roll20 Parser] DOM parsed, body exists:",!!n.body);const t=n.querySelector("title"),r=t?t.textContent.replace("Chat Log for ","").trim():"Roll20 ë¡œê·¸";console.log("[Roll20 Parser] Title:",r);const i={title:r,scenes:[],characters:{},handouts:[]},o={id:"scene_0",name:"ë¡œê·¸",description:null,steps:[]};let l=n.querySelectorAll("div.message");if(console.log(`[Roll20 Parser] Found ${l.length} messages with 'div.message'`),l.length===0){const d=n.querySelector(".content");console.log("[Roll20 Parser] Content container exists:",!!d),d&&(l=d.querySelectorAll(".message"),console.log(`[Roll20 Parser] Found ${l.length} messages inside .content`))}if(l.length===0){const d=n.querySelectorAll("div[class*='message']");console.log(`[Roll20 Parser] Found ${d.length} divs with 'message' in class`),l=d}let g=0,m=null;return l.forEach((d,I)=>{const u=this.parseRoll20Message(d,g,m);u?(console.log(`[Roll20 Parser] Step ${g}:`,u.character.name,"-",u.text.substring(0,50)),o.steps.push(u),u.character&&u.character.name&&!i.characters[u.character.name]&&(i.characters[u.character.name]={id:`char_${Object.keys(i.characters).length}`,name:u.character.name,color:u.character.color||"var(--text-color)",avatarUrl:u.character.avatarUrl||null,emotions:{default:u.character.avatarUrl||null}}),m=u.character,g++):console.log(`[Roll20 Parser] Skipped message ${I}: empty or invalid`)}),o.steps.length>0&&i.scenes.push(o),i}static parseRoll20Message(e,s,n=null){const t=e.classList;let r="dialogue";t.contains("desc")||t.contains("emote")?r="narrator":t.contains("rollresult")&&(r="system");const i=e.querySelector(".by");let o="",l=!1;i?(o=i.textContent.replace(":","").trim(),(o==="GM"||o.includes("(GM)"))&&(r="narrator",o="GM")):r!=="narrator"&&n?(o=n.name,l=!0):r==="narrator"&&(o="GM");const g=e.querySelector(".avatar img");let m=g?g.getAttribute("src"):null;m&&m.startsWith("/")&&(m="https://app.roll20.net"+m),l&&!m&&n&&n.avatarUrl&&(m=n.avatarUrl);const d=[];e.querySelectorAll("img").forEach(R=>{if(!R.closest(".avatar")){let L=R.getAttribute("src");const A=R.getAttribute("alt")||"";L&&(L.startsWith("/")&&(L="https://app.roll20.net"+L),d.push({url:L,alt:A}))}});let u="",y=[],N=[],S=[];const c=e.querySelector(".sheet-rolltemplate-coc, .sheet-rolltemplate-coc-1");if(c){const R=this.parseRoll20DiceTemplate(c);R&&(y.push(R),u="* íŒì •")}e.querySelectorAll("[class*='sheet-rolltemplate-']").forEach(R=>{if(!R.classList.contains("sheet-rolltemplate-coc")&&!R.classList.contains("sheet-rolltemplate-coc-1")&&!R.classList.contains("sheet-rolltemplate-Dx3Dice")){const L=this.parseRoll20TableTemplate(R);L&&(u||(u=L.html))}});const f=e.querySelector(".sheet-rolltemplate-Dx3Dice");f&&(u=`<div class="roll20-dx3-template">${f.outerHTML}</div>`);let b=null;const p=/<strong>([^<]+)<\/strong>\s*\/\s*<span[^>]*>(\d*)<\/span>\s*<span[^>]*>\s*â†’\s*<\/span>\s*<b>(\d*)<\/b>/;let a=e.innerHTML.match(p);if(a){const R=a[1].trim(),L=a[2]?parseInt(a[2],10):null,A=a[3]?parseInt(a[3],10):null;if(b=a[0],L!==null||A!==null){const O=(A||0)-(L||0);S.push({characterName:o,statusName:R,oldValue:L,newValue:A,delta:O})}}else{e.textContent;const R=/(ì¹¨ì‹ë¥ |HP|MP|SAN|æ­£æ°—åº¦|ä¾µè•ç‡)\s*<span[^>]*inlinerollresult[^>]*>(\d+)<\/span>\s*(ìƒìŠ¹|í•˜ê°•|ì¦ê°€|ê°ì†Œ|ä¸Šæ˜‡|æ¸›å°‘)/i;if(a=e.innerHTML.match(R),a){const L=a[1].trim(),A=parseInt(a[2],10),V=a[3].match(/ìƒìŠ¹|ì¦ê°€|ä¸Šæ˜‡/)?A:-A;b=a[0],S.push({characterName:o,statusName:L,oldValue:null,newValue:null,delta:V})}}const h=e.querySelectorAll(".inlinerollresult");h.length>0&&!c&&!f&&!a&&h.forEach(R=>{const L=R.getAttribute("title"),A=R.textContent.trim();if(L&&A){const O=L.match(/Rolling\s+([^\s=]+)/i);O&&y.push({type:"inline",formula:O[1].toUpperCase(),result:parseInt(A,10)||A})}});const C=e.cloneNode(!0);[".by",".tstamp",".avatar",".spacer",".flyout","[class*='sheet-rolltemplate']"].forEach(R=>{C.querySelectorAll(R).forEach(A=>A.remove())}),C.querySelectorAll("a").forEach(R=>{R.querySelector("img")&&R.remove()}),C.querySelectorAll(".inlinerollresult").forEach(R=>{R.removeAttribute("title"),R.removeAttribute("original-title"),R.className="inlinerollresult"});let x=C.innerHTML.trim();b&&(x=x.replace(b,"")),x=x.replace(/<br\s*\/?>/gi," "),x=x.replace(/<div>/gi," "),x=x.replace(/<\/div>/gi,"");const w=document.createElement("div");w.innerHTML=x;let E=x,k=w.textContent.trim();if(o&&k.startsWith(o)){const R=o.length;k=k.substring(R).trim(),E=E.replace(new RegExp(`^${o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}`),"").trim()}return k.startsWith(":")&&(k=k.substring(1).trim(),E=E.replace(/^:\s*/,"")),k&&k!==u&&(u=E||k),!u&&d.length===0?null:(e.querySelector("em")&&(u=u),{id:`step_0_${s}`,type:r,character:{name:o||"ì•Œ ìˆ˜ ì—†ìŒ",color:"var(--text-color)",avatarUrl:m},text:u||"",rawText:u,diceRolls:y,hasDice:y.length>0,statusChanges:S,hasStatusChange:S.length>0,dxCombos:N,hasDXCombo:N.length>0,illustrations:d,hasIllustration:d.length>0,effects:{sfx:null,bgm:null,background:null,backgroundOpacity:.3}})}static parseRoll20DiceTemplate(e){var s;try{const n=(s=e.querySelector("caption"))==null?void 0:s.textContent.trim(),t=e.querySelectorAll("tr");let r=null,i=null,o=null,l=null;if(t.forEach(g=>{var I;const m=(I=g.querySelector(".sheet-template_label"))==null?void 0:I.textContent.trim(),d=g.querySelector(".sheet-template_value");if(m&&d){const u=d.textContent.trim();if(m.includes("ê¸°ì¤€ì¹˜")||m.includes("value")){const y=u.split("/");r=parseInt(y[0],10)}else if(m.includes("êµ´ë¦¼")||m.includes("rolled")){const y=u.match(/\d+/);y&&(i=parseInt(y[0],10));const N=u.match(/\d+/g);N&&N.length>1&&(l=N.slice(1).map(S=>parseInt(S,10)))}else(m.includes("íŒì •ê²°ê³¼")||m.includes("result")||m.includes("íŒì •"))&&(o=u)}}),i!==null){const g={type:"judgement",checkName:n||"íŒì •",formula:r?`1D100<=${r}`:"1D100",threshold:r||100,result:i,judgement:o||"ì•Œ ìˆ˜ ì—†ìŒ"};return l&&l.length>0&&(g.bonusDice=l),g}}catch(n){console.error("Roll20 ë‹¤ì´ìŠ¤ í…œí”Œë¦¿ íŒŒì‹± ì˜¤ë¥˜:",n)}return null}static parseRoll20DX3Template(e){var s,n,t,r,i;try{const o=(s=e.querySelector(".sheet-chname"))==null?void 0:s.textContent.trim(),l=(n=e.querySelector(".sheet-title"))==null?void 0:n.textContent.trim(),g=(t=e.querySelector(".sheet-sub-title"))==null?void 0:t.textContent.trim(),m=(r=e.querySelector(".sheet-mid-title"))==null?void 0:r.textContent.trim(),d=(i=e.querySelector(".sheet-descript"))==null?void 0:i.textContent.trim();let I=null,u=null,y=null;const N=e.querySelector(".sheet-dicearea");if(N){const b=N.querySelector(".inlinerollresult");if(b){I=parseInt(b.textContent.trim(),10);const p=e.querySelector(".sheet-sub-title .inlinerollresult");if(p){const a=p.getAttribute("title");(a==null?void 0:a.match(/Rolling\s+\d+\s*=\s*(\d+)/i))&&(u=g.trim())}}}const S=e.querySelector(".sheet-dicedetail .inlinerollresult");S&&(y=S.textContent.trim());const c={};return e.querySelectorAll(".sheet-info p, .sheet-info span").forEach(b=>{const p=b.querySelector("strong");if(p){const a=p.textContent.trim(),h=b.textContent.replace(p.textContent,"").trim();a==="íƒ€ì´ë°"?c.timing=h:a==="ë‚œì´ë„"?c.difficulty=h:a==="ëŒ€ìƒ"?c.target=h:a==="ì‚¬ê±°ë¦¬"?c.range=h:a==="ê³µê²©ë ¥"?c.attack=h:a==="ì¹¨ì‹ì¹˜"||a==="ì¹¨ì‹ë¥ "?c.erosion=h:a==="Lv"?c.level=h:a==="ê¸°ëŠ¥"&&(c.spec=h)}}),{type:"dx-effect",isSingleEffect:!0,characterName:o,effectName:l,comboName:m||null,effects:[{name:l,level:c.level?parseInt(c.level,10):null}],timing:c.timing||"",difficulty:c.difficulty||"",target:c.target||"",range:c.range||"",attack:c.attack||"",erosion:c.erosion||"",spec:c.spec||"",description:d||"",diceRoll:I?{type:"dx3",formula:u||"",result:I,detail:y||""}:null}}catch(o){console.error("Roll20 DX3 í…œí”Œë¦¿ íŒŒì‹± ì˜¤ë¥˜:",o)}return null}static parseRoll20TableTemplate(e){var s;try{const n=(s=e.querySelector("caption"))==null?void 0:s.textContent.trim(),t=e.querySelector("table");if(!t)return null;let r='<div class="roll20-table">';return n&&(r+=`<div class="table-caption"><strong>${n}</strong></div>`),r+="<table>",t.querySelectorAll("tr").forEach(o=>{const l=o.querySelectorAll("td");l.length>0&&(r+="<tr>",l.forEach(g=>{const m=g.querySelector(".inlinerollresult");let d=g.innerHTML;d=d.replace(/<span[^>]*>/gi,""),d=d.replace(/<\/span>/gi,""),r+=`<td>${d}</td>`}),r+="</tr>")}),r+="</table></div>",{type:"table",caption:n,html:r}}catch(n){console.error("Roll20 í…Œì´ë¸” í…œí”Œë¦¿ íŒŒì‹± ì˜¤ë¥˜:",n)}return null}static parse(e,s=null,n="auto"){if(!e)throw new Error("ë¡œê·¸ ë‚´ìš©ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");let t;if(n==="roll20")console.log("[Parser] ê°•ì œ Roll20 ëª¨ë“œ"),t=this.parseRoll20Log(e);else if(n==="cocofolia")console.log("[Parser] ê°•ì œ Cocofolia ëª¨ë“œ"),t=this.parseHTMLLog(e);else if(n==="auto")if(console.log("[Parser] ìë™ ê°ì§€ ëª¨ë“œ"),e.trim().startsWith("<!DOCTYPE html")||e.trim().startsWith("<html"))e.includes('class="message"')&&(e.includes('class="sheet-rolltemplate')||e.includes('class="by"')||e.includes("Chat Log for"))?(console.log("[Parser] Roll20 ë¡œê·¸ ê°ì§€"),t=this.parseRoll20Log(e)):e.includes('<div class="cclog_wrap"')||e.includes('<div class="ccfolia_wrap"')||e.includes('<div class="gap"')?(console.log("[Parser] Cocofolia ë¡œê·¸ ê°ì§€"),t=this.parseHTMLLog(e)):(console.log("[Parser] ê¸°ë³¸ HTML íŒŒì„œ ì‚¬ìš©"),t=this.parseHTMLLog(e));else if(e.trim().startsWith("{")||e.trim().startsWith("[")){console.log("[Parser] JSON í˜•ì‹ ê°ì§€");try{t=JSON.parse(e)}catch(r){throw new Error("JSON íŒŒì‹± ì‹¤íŒ¨: "+r.message)}}else console.log("[Parser] í”Œë ˆì¸ í…ìŠ¤íŠ¸ë¡œ ì²˜ë¦¬"),t=this.parseTextLog(e);if(t.fileCode=this.generateFileCode(e),s){const r=s.replace(/\.(txt|log|json|html)$/i,"");t.title=r||t.title,t.fileName=s}return t}static generateFileCode(e){let s=0;for(let n=0;n<e.length;n++){const t=e.charCodeAt(n);s=(s<<5)-s+t,s=s&s}return"file_"+Math.abs(s).toString(36)+"_"+e.length}}const Z={name:"Home",setup(){return{logStore:B()}},data(){return{isLoading:!1,errorMessage:"",parserMode:"cocofolia"}},methods:{triggerFileInput(){this.$refs.fileInput.click()},triggerJSONInput(){this.$refs.jsonInput.click()},handleJSONSelect($){const e=$.target.files[0];if(!e)return;if(!e.name.endsWith(".json")){this.errorMessage="JSON íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.";return}this.isLoading=!0,this.errorMessage="";const s=new FileReader;s.onload=n=>{try{const t=n.target.result,r=JSON.parse(t);if(!r.scenes||!Array.isArray(r.scenes))throw new Error("ìœ íš¨í•˜ì§€ ì•Šì€ VN ë°ì´í„° í˜•ì‹ì…ë‹ˆë‹¤.");console.log("[Home] JSON ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ:",{title:r.title,sceneCount:r.scenes.length}),this.logStore.setRawLog(JSON.stringify(r)),this.logStore.setVNData(r,!0),this.$router.push("/player")}catch(t){console.error("[Home] JSON íŒŒì‹± ì˜¤ë¥˜:",t),this.errorMessage=`JSON íŒŒì¼ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${t.message}`}finally{this.isLoading=!1}},s.onerror=()=>{this.errorMessage="íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",this.isLoading=!1},s.readAsText(e)},async handleFileSelect($){const e=$.target.files[0];if(!e)return;this.isLoading=!0,this.errorMessage="";const s=new FileReader;s.onload=n=>{var t,r;try{const i=n.target.result;console.log("[Home] íŒŒì¼ ì½ê¸° ì™„ë£Œ:",{fileName:e.name,fileSize:i.length,parserMode:this.parserMode,contentPreview:i.substring(0,200)}),this.logStore.setRawLog(i);const o=z.parse(i,e.name,this.parserMode);if(console.log("[Home] íŒŒì‹± ì™„ë£Œ:",{title:o.title,sceneCount:((t=o.scenes)==null?void 0:t.length)||0,characterCount:Object.keys(o.characters||{}).length,firstScene:(r=o.scenes)==null?void 0:r[0]}),!o.scenes||o.scenes.length===0)throw new Error("íŒŒì‹±ëœ ì”¬ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");this.logStore.setVNData(o),console.log("[Home] logStoreì— ë°ì´í„° ì €ì¥ ì™„ë£Œ, PlayerViewë¡œ ì´ë™"),this.$refs.fileInput.value="",this.$router.push("/player")}catch(i){console.error("[Home] íŒŒì‹± ì˜¤ë¥˜:",i),this.errorMessage=`íŒŒì¼ íŒŒì‹± ì‹¤íŒ¨: ${i.message}`,this.$refs.fileInput.value=""}finally{this.isLoading=!1}},s.onerror=()=>{this.errorMessage="íŒŒì¼ ì½ê¸° ì‹¤íŒ¨",this.isLoading=!1,this.$refs.fileInput.value=""},s.readAsText(e)}}},Y={class:"home"},K={class:"container"},Q={class:"header"},ee={class:"parser-mode-section"},te={class:"mode-buttons"},se={class:"upload-section"},le={class:"upload-card"},oe=["disabled"],re={key:0,class:"error-message"},ne={class:"upload-card"},ie=["disabled"];function ce($,e,s,n,t,r){const i=G("EmojiToIcon");return J(),U("div",Y,[D("div",K,[D("header",Q,[D("h1",null,[q(i,{emoji:"ğŸ“–",size:40}),e[6]||(e[6]=H(" VNLog Player (v0.8) ",-1))]),e[7]||(e[7]=D("p",{class:"subtitle"},"TRPG ë¡œê·¸ë¥¼ ë¹„ì£¼ì–¼ ë…¸ë²¨ë¡œ ì¬ìƒí•˜ì„¸ìš”",-1)),e[8]||(e[8]=D("small",null,"(2025.11.19 15:28) ì €ì¥ & ë¶ˆëŸ¬ì˜¤ê¸° ê¸°ëŠ¥ ì¶”ê°€, ìë™ì¬ìƒ ì†ë„ ê°œì„ ",-1)),e[9]||(e[9]=D("small",null,"(2025.11.20 09:45) ëª¨ë°”ì¼ ì§€ì› ì¶”ê°€ ë° ìë™ì¬ìƒ ë²„ê·¸ ìˆ˜ì •",-1)),e[10]||(e[10]=D("small",null,"(2025.11.20 11:39) ë¡œê·¸ í¸ì§‘ ëª¨ë“œ ì¶”ê°€ ë° ìì˜í•œ ë²„ê·¸ ê°œì„ ",-1)),e[11]||(e[11]=D("small",null,"(2025.11.24 10:23) ê°„í—ì ìœ¼ë¡œ ìŠ¤í…ì´ ë¶„ë¦¬ë˜ì§€ ì•ŠëŠ” ë²„ê·¸ ë° ìì˜í•œ ë¹„ì£¼ì–¼ ìˆ˜ì •",-1)),e[12]||(e[12]=D("small",null,"(2025.11.24 12:00) ì¸ë²•/ì˜¤ì˜/íŒì •/ì„ íƒ/í…Œì´ë¸” ë‹¤ì´ìŠ¤ í‘œì‹œ ê¸°ëŠ¥ ì¶”ê°€",-1))]),D("div",ee,[e[17]||(e[17]=D("h2",null,"íŒŒì„œ ëª¨ë“œ ì„ íƒ",-1)),D("div",te,[D("button",{class:_(["mode-button",{active:t.parserMode==="cocofolia"}]),onClick:e[0]||(e[0]=o=>t.parserMode="cocofolia")},[q(i,{emoji:"ğŸ¦",size:24}),e[13]||(e[13]=D("span",null,"Cocolog",-1)),e[14]||(e[14]=D("small",null,"ì½”ì½”ë¡œê·¸ í˜•ì‹ .html",-1))],2),D("button",{class:_(["mode-button",{active:t.parserMode==="roll20"}]),onClick:e[1]||(e[1]=o=>t.parserMode="roll20")},[q(i,{emoji:"ğŸ²",size:24}),e[15]||(e[15]=D("span",null,"Roll20",-1)),e[16]||(e[16]=D("small",null,"Roll20 ì±„íŒ… ë¡œê·¸ .html",-1))],2)])]),D("div",se,[D("div",le,[q(i,{emoji:"ğŸ“",size:48,class:"upload-icon"}),e[18]||(e[18]=D("h2",null,"ë¡œê·¸ íŒŒì¼ ì—…ë¡œë“œ",-1)),e[19]||(e[19]=D("p",null,"HTML ë¡œê·¸ íŒŒì¼ì„ ì„ íƒí•˜ì—¬ íŒŒì‹±í•©ë‹ˆë‹¤",-1)),D("input",{ref:"fileInput",type:"file",accept:".txt,.log,.html",onChange:e[2]||(e[2]=(...o)=>r.handleFileSelect&&r.handleFileSelect(...o)),class:"file-input"},null,544),D("button",{onClick:e[3]||(e[3]=(...o)=>r.triggerFileInput&&r.triggerFileInput(...o)),class:"upload-button",disabled:t.isLoading},[q(i,{emoji:"ğŸ“¤",size:20}),H(" "+j(t.isLoading?"ì²˜ë¦¬ ì¤‘...":"íŒŒì¼ ì„ íƒ"),1)],8,oe),t.errorMessage?(J(),U("p",re,j(t.errorMessage),1)):X("",!0)]),e[22]||(e[22]=D("div",{class:"upload-divider"},[D("span",null,"ë˜ëŠ”")],-1)),D("div",ne,[q(i,{emoji:"ğŸ’»",size:48,class:"upload-icon"}),e[20]||(e[20]=D("h2",null,"JSON íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°",-1)),e[21]||(e[21]=D("p",null,"í¸ì§‘ëœ VN ë°ì´í„°ë¥¼ ì§ì ‘ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤ (íŒŒì‹± ìƒëµ)",-1)),D("input",{ref:"jsonInput",type:"file",accept:".json",onChange:e[4]||(e[4]=(...o)=>r.handleJSONSelect&&r.handleJSONSelect(...o)),class:"file-input"},null,544),D("button",{onClick:e[5]||(e[5]=(...o)=>r.triggerJSONInput&&r.triggerJSONInput(...o)),class:"upload-button json-button",disabled:t.isLoading},[q(i,{emoji:"ğŸ“¦",size:20}),H(" "+j(t.isLoading?"ì²˜ë¦¬ ì¤‘...":"JSON ì„ íƒ"),1)],8,ie)])])])])}const me=W(Z,[["render",ce],["__scopeId","data-v-b6e5b286"]]);export{me as default};
